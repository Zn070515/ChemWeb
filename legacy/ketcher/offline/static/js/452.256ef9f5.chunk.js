"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[452],{45452:(e,t,n)=>{n.r(t),n.d(t,{default:()=>hp});var r,o,i=n(97850),a=n(25063),l=n(61004),c=n(58878),d=n(60667),s=n(72860),u=n(18324),p=n(95989),h=n(19787),m=n(97796),f=n(5100),v=n(67278),g=n(26760),b=n(43361),y=n(53002),x=n(2459),w=n(213),A=n(94157),C=n(75466),M=n(450),k=n(10443),O=n(9352),I=n(14090),D=n(51645),S=n(49764),Y=n(67901),E=n(41194),P=n(20894),L=n(79884),j=n(41705),N=n(47963),F=n(19285),T=n(94300),B=n(92099),z=n(48183),R=n(58973),H=n.n(R),_=n(34363),q=n(38815),V=n(48725),W=n(64627),U=n(45841),K=n(61790),Q=n.n(K),G=n(81515),Z=n(72700),X=n(68263),J=n(83302),$=n(99459),ee=n(40694),te=n(29007),ne=n(37209),re=n(65534),oe=n.n(re),ie=n(12804),ae=n.n(ie);!function(e){e.Monomer="monomer",e.Preset="preset",e.Bond="bond",e.AmbiguousMonomer="ambiguousMonomer"}(r||(r={})),function(e){e.Library="library",e.ChainStart="chainStart",e.ChainMiddle="chainMiddle",e.ChainEnd="chainEnd"}(o||(o={}));var le,ce="select-submenu";function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.nanoMol="nM",e.microMol="\u03bcM",e.milliMol="mM"}(le||(le={}));var ue=(0,j.A)((0,j.A)((0,j.A)({},le.nanoMol,Math.pow(10,9)),le.microMol,Math.pow(10,6)),le.milliMol,Math.pow(10,3)),pe={ketcherId:"",isReady:null,activeTool:"select",editor:void 0,editorLayoutMode:void 0,editorLineLength:h.Vru.editorLineLength,preview:{type:r.Monomer,monomer:void 0,style:{}},position:void 0,isContextMenuActive:!1,isMacromoleculesPropertiesWindowOpened:!1,macromoleculesProperties:void 0,unipositiveIonsMeasurementUnit:le.milliMol,oligonucleotidesMeasurementUnit:le.microMol,unipositiveIonsValue:140,oligonucleotidesValue:200,app:{buildDate:"2026-02-06T14:05:24",indigoVersion:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.INDIGO_VERSION||"",indigoMachine:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.INDIGO_MACHINE||"",version:"3.13.0-rc.1"},selectedMenuGroupItems:{}},he=(0,N.Z0)({name:"editor",initialState:pe,reducers:{init:function(e){e.isReady=!1},initKetcherId:function(e,t){e.ketcherId=t.payload},initSuccess:function(e){e.isReady=!0},initFailure:function(e){e.isReady=!1},selectTool:function(e,t){e.activeTool=t.payload},setPosition:function(e,t){e.position=t.payload},createEditor:function(e,t){var n,r,o=new h.JxB({theme:t.payload.theme,canvas:t.payload.canvas,monomersLibraryUpdate:t.payload.monomersLibraryUpdate,monomersLibraryReplace:t.payload.monomersLibraryReplace});e.editor=o,null===(n=(r=t.payload).onInit)||void 0===n||n.call(r,o)},destroyEditor:function(e){var t,n;e.editorLayoutMode=null===(t=e.editor)||void 0===t?void 0:t.mode.modeName,null===(n=e.editor)||void 0===n||n.destroy(),e.editor=void 0},showPreview:function(e,t){e.preview=t.payload||{monomer:void 0,style:""}},setContextMenuActive:function(e,t){e.isContextMenuActive=t.payload},setMacromoleculesPropertiesWindowVisibility:function(e,t){e.isMacromoleculesPropertiesWindowOpened=t.payload},toggleMacromoleculesPropertiesWindowVisibility:function(e){e.isMacromoleculesPropertiesWindowOpened=!e.isMacromoleculesPropertiesWindowOpened},setMacromoleculesProperties:function(e,t){e.macromoleculesProperties=t.payload},setUnipositiveIonsMeasurementUnit:function(e,t){e.unipositiveIonsMeasurementUnit=t.payload},setOligonucleotidesMeasurementUnit:function(e,t){e.oligonucleotidesMeasurementUnit=t.payload},setEditorLineLength:function(e,t){e.editorLineLength=se(se({},e.editorLineLength),t.payload)},setUnipositiveIonsValue:function(e,t){e.unipositiveIonsValue=t.payload},setOligonucleotidesValue:function(e,t){e.oligonucleotidesValue=t.payload},setAppMeta:function(e,t){e.app=t.payload},setSelectedMenuGroupItem:function(e,t){e.selectedMenuGroupItems=se(se({},e.selectedMenuGroupItems),{},(0,j.A)({},t.payload.groupName,t.payload.activeItemName))}}}),me=he.actions;me.init,me.initSuccess,me.initFailure;var fe=me.initKetcherId,ve=me.selectTool;me.setPosition;var ge,be,ye=me.createEditor,xe=me.destroyEditor,we=me.showPreview,Ae=me.setContextMenuActive,Ce=me.setMacromoleculesPropertiesWindowVisibility,Me=me.toggleMacromoleculesPropertiesWindowVisibility,ke=me.setMacromoleculesProperties,Oe=me.setUnipositiveIonsMeasurementUnit,Ie=me.setOligonucleotidesMeasurementUnit,De=me.setEditorLineLength,Se=me.setUnipositiveIonsValue,Ye=me.setOligonucleotidesValue,Ee=me.setAppMeta,Pe=me.setSelectedMenuGroupItem,Le=function(e){return e.editor.preview},je=function(e){return e.editor.activeTool},Ne=function(e){return e.editor.ketcherId},Fe=function(e){return e.editor.editor},Te=function(e){var t;return null===(t=e.editor.editor)||void 0===t?void 0:t.isSequenceEditInRNABuilderMode},Be=function(e){var t;return null===(t=e.editor.editor)||void 0===t?void 0:t.isSequenceMode},ze=function(e){return e.editor.editorLayoutMode},Re=function(e){var t;return null===(t=e.editor.editor)||void 0===t?void 0:t.isHandToolSelected},He=function(e){var t;return null===(t=e.editor.editor)||void 0===t||null===(t=t.drawingEntitiesManager)||void 0===t?void 0:t.hasAntisenseChains},_e=function(e){return e.editor.isContextMenuActive},qe=function(e){return e.editor.isMacromoleculesPropertiesWindowOpened},Ve=function(e){return e.editor.macromoleculesProperties},We=function(e){return e.editor.unipositiveIonsMeasurementUnit},Ue=function(e){return e.editor.oligonucleotidesMeasurementUnit},Ke=function(e){return e.editor.unipositiveIonsValue},Qe=function(e){return e.editor.oligonucleotidesValue},Ge=function(e){return e.editor.editorLineLength},Ze=function(e){return e.editor.app},Xe=function(e){return e.editor.selectedMenuGroupItems[ce]||"select-rectangle"},Je=he.reducer,$e="FAVORITES",et="PEPTIDE",tt="CHEM",nt="RNA";!function(e){e.SUGARS="Sugars",e.BASES="Bases",e.PHOSPHATES="Phosphates",e.PEPTIDES="Amino Acids",e.NUCLEOTIDES="Nucleotides"}(ge||(ge={})),function(e){e.R="R",e.A="A",e.C="C",e.G="G",e.T="T",e.U="U",e.X="X",e.P="P"}(be||(be={})),ge.SUGARS,ge.BASES,ge.BASES,ge.BASES,ge.BASES,ge.BASES,ge.BASES,ge.PHOSPHATES;var rt="favoriteItemsUniqueKeys",ot="ketcher_custom_presets",it="thymine",at="uracil",lt=1,ct=2,dt=new(function(){function e(){(0,B.A)(this,e),this.localStorage=window.localStorage}return(0,z.A)(e,[{key:"getItem",value:function(e){var t=this.localStorage.getItem(e);return t?JSON.parse(t):null}},{key:"setItem",value:function(e,t){this.localStorage.setItem(e,JSON.stringify(t))}},{key:"removeItem",value:function(e){this.localStorage.removeItem(e)}}]),e}());function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pt=(0,j.A)((0,j.A)({},h.uP8.PEPTIDES,h.IPc.AminoAcid),h.uP8.BASES,h.IPc.Base),ht={monomers:[],defaultRnaPresets:[],favorites:{},searchFilter:"",selectedTabIndex:ct};function mt(e){var t;return(0,h.eoH)(e)?e.id||e.label:"".concat(e.props.MonomerName,"___").concat(null===(t=e.props)||void 0===t?void 0:t.Name)}function ft(e){var t,n,r;return"".concat(e.name,"_").concat((null===(t=e.base)||void 0===t?void 0:t.label)||".","_").concat((null===(n=e.sugar)||void 0===n?void 0:n.label)||".","_").concat((null===(r=e.phosphate)||void 0===r?void 0:r.label)||".")}var vt=(0,N.Z0)({name:"library",initialState:ht,reducers:{loadMonomerLibrary:function(e,t){var n=t.payload.map(function(e){return ut(ut({},e),{},{props:ut({},e.props)})});e.monomers=n},loadDefaultPresets:function(e,t){e.defaultRnaPresets=t.payload.map(function(e){return ut({},e)})},setFavoriteMonomersFromLocalStorage:function(e){var t={},n=dt.getItem(rt);n&&Array.isArray(n)&&(e.monomers.forEach(function(e){var r=mt(e);n.find(function(e){return e===r})&&(t[r]=ut(ut({},e),{},{favorite:!0}))}),e.favorites=t)},clearFavorites:function(e){e.favorites={}},toggleMonomerFavorites:function(e,t){var n=mt(t.payload),r=dt.getItem(rt)||[];e.favorites[n]?(delete e.favorites[n],dt.setItem(rt,r.filter(function(e){return e!==n}))):(e.favorites[n]=ut(ut({},t.payload),{},{favorite:!0}),r.push(n),dt.setItem(rt,r))},setSearchFilter:function(e,t){e.searchFilter=t.payload},setSelectedTabIndex:function(e,t){e.selectedTabIndex=t.payload}}}),gt=vt.actions,bt=gt.loadMonomerLibrary,yt=gt.loadDefaultPresets,xt=gt.setFavoriteMonomersFromLocalStorage;gt.clearFavorites;var wt=gt.toggleMonomerFavorites,At=gt.setSearchFilter,Ct=gt.setSelectedTabIndex,Mt=function(e,t){return e.filter(function(e){var n;return!e.isAmbiguous&&(null===(n=e.props)||void 0===n?void 0:n.MonomerType)===t})},kt=function(e,t){var n=e.filter(function(e){if(!(0,h.eoH)(e))return!1;var n=new h.cN8(e,void 0,!1);return pt[t]===n.monomerClass});if(0===n.length)return[];var r=[];t===h.uP8.BASES?r=[{groupTitle:"Ambiguous Bases",groupItems:n.filter(function(e){return(0,h.eoH)(e)&&e.options.every(function(e){return!e.templateId.toLowerCase().includes(it)&&!e.templateId.toLowerCase().includes(at)})})},{groupTitle:"Ambiguous DNA Bases",groupItems:n.filter(function(e){return(0,h.eoH)(e)&&e.options.find(function(e){return e.templateId.toLowerCase().includes(it)})})},{groupTitle:"Ambiguous RNA Bases",groupItems:n.filter(function(e){return(0,h.eoH)(e)&&e.options.find(function(e){return e.templateId.toLowerCase().includes(at)})})}]:r.push({groupTitle:"Ambiguous ".concat(t),groupItems:n});var o=["X","N"];return r.forEach(function(e){e.groupItems.sort(function(e,t){return e.label.localeCompare(t.label)}),e.groupItems.sort(function(e){return o.includes(e.label)?-1:1})}),r},Ot=function(e){return e.filter(function(e){return e.favorite&&!e.isAmbiguous})},It=(0,F.Mz)(function(e){return e.library},function(e){var t=e.searchFilter,n=e.monomers,r=e.favorites,o=t.toLowerCase(),i=function(e,t){var n,r,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],d=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"").toLowerCase(),s=i.toLowerCase(),u=null===e||void 0===e||null===(n=e.base)||void 0===n?void 0:n.toLowerCase(),p=null!==e&&void 0!==e&&e.modifications?Object.values(e.modifications).map(function(e){return e.toLowerCase()}).join(" "):"",h=null!==(r=null===a||void 0===a?void 0:a.toLowerCase())&&void 0!==r?r:"",m=null!==(o=null===l||void 0===l?void 0:l.toLowerCase())&&void 0!==o?o:"",f=c&&c.length>0?c.map(function(e){return e.toLowerCase()}).join(" "):"";if("/"===t)return Boolean(u||p);if(t.includes("/")){var v=t.split("/");if(v.length>3||3===v.length&&""!==v[2])return!1;if(3===v.length&&""!==v[1]){var g=v[1],b=(null===u||void 0===u?void 0:u.length)===g.length&&Array.from(u).every(function(e,t){return e===g[t]}),y=!!p&&p.split(" ").some(function(e){return e.length===g.length&&Array.from(e).every(function(e,t){return e===g[t]})});return b||y}var x=v[0],w=v[1];if(t.startsWith("/")&&t.length>1){var A=t.slice(1);return(null===u||void 0===u?void 0:u.startsWith(A))||(null===p||void 0===p?void 0:p.split(" ").some(function(e){return e.startsWith(A)}))}if(t.endsWith("/")&&t.length>1){var C=t.slice(0,-1);return(null===u||void 0===u?void 0:u.endsWith(C))||p&&p.split(" ").some(function(e){return e.endsWith(C)})}var M=(null===u||void 0===u?void 0:u.startsWith(w))&&(null===u||void 0===u?void 0:u.endsWith(x)),k=!!p&&p.split(" ").some(function(e){return e.startsWith(w)&&e.endsWith(x)});return M||k}var O=!!u&&u.includes(t),I=!!p&&p.includes(t),D=!!h&&h.includes(t),S=!!m&&m.includes(t),Y=!!f&&f.includes(t);return d.includes(t)||s.includes(t)||O||I||D||S||Y};return n.filter(function(e){var t;if(!e.isAmbiguous&&null!==(t=e.props)&&void 0!==t&&t.hidden)return!1;if(e.isAmbiguous){var n=e.label,r=e.id,a=e.idtAliases,l=e.monomers;return i(a,o,n,r)||l.some(function(e){var t=e.monomerItem.props,n=t.Name,r=t.MonomerName,a=t.idtAliases,l=t.aliasHELM,c=t.aliasAxoLabs,d=t.modificationTypes;return i(a,o,n,r,l,c,d)})}var c=e.props,d=c.Name,s=c.MonomerName,u=c.idtAliases,p=c.aliasHELM,h=c.aliasAxoLabs,m=c.modificationTypes;return i(u,o,d,s,p,h,m)}).map(function(e){return ut(ut({},e),{},{favorite:!!r[mt(e)]})})}),Dt=function(e){var t=e.reduce(function(e,t){var n=t.props.MonomerNaturalAnalogCode||"Z";return e[n]||(e[n]=[]),e[n].push(ut(ut({},t),{},{label:t.props.MonomerName})),e},{}),n=Object.entries(t).reduce(function(e,t){var n=(0,i.A)(t,2),r=n[0],o=n[1],a=(0,T.A)(o);a.sort(function(e,t){return e.label.localeCompare(t.label)});var l=a.findIndex(function(e){return e.label===r});if(-1!==l){var c=a.splice(l,1);a.unshift(c[0])}return e[r]=a,e},{}),r=Object.keys(n);return r.sort(function(e,t){return e.localeCompare(t)}),r.reduce(function(e,t){var r={groupTitle:"Z"===t?"No natural analogue":t,groupItems:[]};return n[t].forEach(function(e){r.groupItems.push(ut(ut({},e),{},{props:ut({},e.props)}))}),r.groupItems.length&&e.push(r),e},[])},St=function(e){return e.library.selectedTabIndex},Yt=vt.reducer,Et=function(e){return e.library.defaultRnaPresets},Pt=(0,N.Z0)({name:"modal",initialState:{name:null,isOpen:!1,additionalProps:null,errorTooltipText:"",errorModalText:"",errorModalTitle:""},reducers:{openModal:function(e,t){"string"===typeof t.payload?e.name=t.payload:(e.name=t.payload.name,e.additionalProps=t.payload.additionalProps),e.isOpen=!0},closeModal:function(e){e.name=null,e.isOpen=!1,e.additionalProps=null},openErrorTooltip:function(e,t){e.errorTooltipText=t.payload},closeErrorTooltip:function(e){e.errorTooltipText=""},openErrorModal:function(e,t){if("string"===typeof t.payload)e.errorModalText=t.payload;else{var n=t.payload,r=n.errorMessage,o=n.errorTitle;e.errorModalText=r,e.errorModalTitle=o}},closeErrorModal:function(e){e.errorModalText=""}}}),Lt=Pt.actions,jt=Lt.openModal,Nt=Lt.closeModal,Ft=Lt.openErrorTooltip,Tt=Lt.closeErrorTooltip,Bt=Lt.openErrorModal,zt=Lt.closeErrorModal,Rt=function(e){return e.modal.name},Ht=function(e){return e.modal.isOpen},_t=function(e){return e.modal.additionalProps},qt=function(e){return e.modal.errorTooltipText},Vt=function(e){return e.modal.errorModalText},Wt=function(e){return e.modal.errorModalTitle},Ut=Pt.reducer;function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Qt,Gt=function(){return dt.getItem(ot)},Zt=function(e){var t,n=Gt();return null!==(t=null===n||void 0===n?void 0:n.findIndex(function(t){return t.name===e}))&&void 0!==t?t:-1},Xt=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),n=Gt()||[],r=Zt(t.nameInList);t.nameInList=t.name,r>-1?(n.splice(r,1,t),dt.setItem(ot,n)):dt.setItem(ot,[].concat((0,T.A)(n),[t]))};function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.Presets="Presets"}(Qt||(Qt={}));var en={activePreset:null,sequenceSelection:void 0,sequenceSelectionName:void 0,isSequenceFirstsOnlyNucleoelementsSelected:void 0,activePresetMonomerGroup:null,groupItemValidations:(0,j.A)((0,j.A)((0,j.A)({},ge.BASES,[]),ge.SUGARS,[]),ge.PHOSPHATES,[]),presetsDefault:[],presetsCustom:[],activeRnaBuilderItem:null,activeMonomerKey:null,isEditMode:!1,uniqueNameError:"",invalidPresetError:"",activePresetForContextMenu:null},tn=(0,j.A)((0,j.A)((0,j.A)({},ge.BASES,"base"),ge.SUGARS,"sugar"),ge.PHOSPHATES,"phosphate"),nn=(0,N.Z0)({name:"rna-builder",initialState:en,reducers:{createNewPreset:function(e){e.activePreset={base:void 0,sugar:void 0,phosphate:void 0,name:"",nameInList:""}},setActivePreset:function(e,t){e.activePreset=$t($t({},t.payload),{},{nameInList:t.payload.name})},setSequenceSelection:function(e,t){e.sequenceSelection=(0,T.A)(t.payload)},setSequenceSelectionName:function(e,t){e.sequenceSelectionName=t.payload},setIsSequenceFirstsOnlyNucleoelementsSelected:function(e,t){e.isSequenceFirstsOnlyNucleoelementsSelected=t.payload},setActivePresetForContextMenu:function(e,t){e.activePresetForContextMenu=t.payload},setActivePresetName:function(e,t){e.activePreset.name=t.payload},setActiveRnaBuilderItem:function(e,t){e.activeRnaBuilderItem=t.payload},recalculateRnaBuilderValidations:function(e,t){var n=function(e,t){var n,r,o=[],i=[],a=[];return t&&(null!==e&&void 0!==e&&e.sugar||null!==e&&void 0!==e&&e.phosphate||null!==e&&void 0!==e&&e.base)?(null!==e&&void 0!==e&&e.phosphate&&o.push("R2"),null!==e&&void 0!==e&&e.base&&o.push("R3"),a.push("R1"),null!==e&&void 0!==e&&null!==(n=e.sugar)&&void 0!==n&&null!==(n=n.props)&&void 0!==n&&n.MonomerCaps&&!("R3"in e.sugar.props.MonomerCaps)&&a.push("DISABLED"),i.push("R1"),null!==e&&void 0!==e&&null!==(r=e.sugar)&&void 0!==r&&null!==(r=r.props)&&void 0!==r&&r.MonomerCaps&&!("R2"in e.sugar.props.MonomerCaps)&&i.push("DISABLED"),{sugarValidations:o,phosphateValidations:i,baseValidations:a}):{sugarValidations:o,phosphateValidations:i,baseValidations:a}}(t.payload.rnaPreset,t.payload.isEditMode),r=n.sugarValidations,o=n.phosphateValidations,i=n.baseValidations;e.groupItemValidations[ge.SUGARS]=r,e.groupItemValidations[ge.BASES]=i,e.groupItemValidations[ge.PHOSPHATES]=o},setActivePresetMonomerGroup:function(e,t){e.activePresetMonomerGroup=t.payload},savePreset:function(e,t){var n=$t({},t.payload);if(Xt(function(e){var t=["sugar","base","phosphate"],n=H()(e,t);n.templates=[];for(var r=0,o=t;r<o.length;r++){var i,a=e[o[r]],l=(null===a||void 0===a||null===(i=a.props)||void 0===i?void 0:i.id)||(null===a||void 0===a?void 0:a.id);l&&n.templates.push({$ref:a.isAmbiguous?(0,h.QDi)(l):(0,h.aRw)(l)})}return n}(n)),n.nameInList){var r=e.presetsCustom.findIndex(function(e){return e.name===n.nameInList});n.nameInList=n.name,-1===r?e.presetsCustom.push(n):e.presetsCustom.splice(r,1,n)}else e.presetsCustom.push(n);e.activePreset&&(e.activePreset.nameInList=n.name)},deletePreset:function(e,t){var n=t.payload;!function(e){if(e){var t=Gt(),n=Zt(e);t&&(t.splice(n,1),t.length?dt.setItem(ot,t):dt.removeItem(ot))}}(n.name);var r=e.presetsCustom.findIndex(function(e){return e.name===n.name});e.presetsCustom.splice(r,1),n.nameInList&&(e.activePreset=null)},setIsEditMode:function(e,t){e.isEditMode=t.payload},setUniqueNameError:function(e,t){e.uniqueNameError=t.payload},setInvalidPresetError:function(e,t){e.invalidPresetError=t.payload},setDefaultPresets:function(e,t){var n=t.payload[0];n&&(e.presetsDefault.find(function(e){return e.name===n.name})||(e.presetsDefault=t.payload))},setCustomPresets:function(e,t){e.presetsCustom=t.payload},setFavoritePresetsFromLocalStorage:function(e){var t=dt.getItem(rt);t&&Array.isArray(t)&&(e.presetsDefault=e.presetsDefault.map(function(e){var n="".concat(e.name,"_").concat(h.QKJ.RNA);return t.find(function(e){return e===n})?$t($t({},e),{},{favorite:!0}):e}))},clearFavorites:function(e){e.presetsDefault=[]},setActiveMonomerKey:function(e,t){e.activeMonomerKey=t.payload},togglePresetFavorites:function(e,t){var n=e.presetsDefault.findIndex(function(e){return e.name===t.payload.name}),r=e.presetsCustom.findIndex(function(e){return e.name===t.payload.name});if(n>=0){var o=e.presetsDefault[n].favorite;e.presetsDefault[n].favorite=!o}else if(r>=0){!function(e){if(e){var t=Gt(),n=Zt(e);t&&n>-1&&(t[n].favorite=!t[n].favorite,dt.setItem(ot,t))}}(e.presetsCustom[r].name);var i=e.presetsCustom[r].favorite;return void(e.presetsCustom[r].favorite=!i)}var a="".concat(t.payload.name,"_").concat(h.QKJ.RNA),l=dt.getItem(rt)||[];l.some(function(e){return e===a})?dt.setItem(rt,l.filter(function(e){return e!==a})):(l.push(a),dt.setItem(rt,l))}}}),rn=function(e){return e.rnaBuilder.activeRnaBuilderItem},on=function(e){return e.rnaBuilder.groupItemValidations},an=function(e){return e.rnaBuilder.activePreset},ln=function(e){return e.rnaBuilder.sequenceSelection},cn=function(e){return e.rnaBuilder.sequenceSelectionName},dn=function(e){return e.rnaBuilder.isSequenceFirstsOnlyNucleoelementsSelected},sn=function(e,t){if(tn[t]&&e)return e[tn[t]]},un=function(e){return e.rnaBuilder.activePresetMonomerGroup},pn=function(e){return Boolean(e.name&&e.sugar&&(e.base||e.phosphate))},hn=function(e){return e.rnaBuilder.isEditMode},mn=function(e){var t,n,r,o,i,a;if(!e)return"";var l=(null===(t=e.sugar)||void 0===t?void 0:t.label)||(null===(n=e.sugar)||void 0===n?void 0:n.props.MonomerName)||"",c=(null===(r=e.base)||void 0===r?void 0:r.label)||(null===(o=e.base)||void 0===o?void 0:o.props.MonomerName)||"",d=(null===(i=e.phosphate)||void 0===i?void 0:i.label)||(null===(a=e.phosphate)||void 0===a?void 0:a.props.MonomerName)||"",s=l;return s+=l&&d||(l||d)&&c?"(".concat(c,")"):c,s+=d},fn=function(e){return e.rnaBuilder.uniqueNameError},vn=function(e){return e.rnaBuilder.invalidPresetError},gn=function(e){var t=e.rnaBuilder.activePreset;return t&&!t.nameInList&&!t.name&&!t.sugar&&!t.base&&!t.phosphate},bn=function(e){return e.rnaBuilder.activePresetForContextMenu},yn=function(e){return e.filter(function(e){return e.favorite})},xn=function(e){return e.rnaBuilder.activeMonomerKey},wn=(0,F.Mz)(function(e){return e.rnaBuilder},function(e){var t=e.presetsDefault,n=void 0===t?[]:t,r=e.presetsCustom,o=void 0===r?[]:r;return[].concat((0,T.A)(n),(0,T.A)(o))}),An=(0,F.Mz)(wn,function(e){return e.library.searchFilter},function(e,t){var n=t.toLowerCase();return e.filter(function(e){var t,r,o,i,a,l,c,d,s=null===(t=e.name)||void 0===t?void 0:t.toLowerCase(),u=null===(r=e.sugar)||void 0===r||null===(r=r.label)||void 0===r?void 0:r.toLowerCase(),p=null===(o=e.phosphate)||void 0===o||null===(o=o.label)||void 0===o?void 0:o.toLowerCase(),h=null===(i=e.base)||void 0===i||null===(i=i.label)||void 0===i?void 0:i.toLowerCase(),m=null===(a=e.idtAliases)||void 0===a||null===(a=a.base)||void 0===a?void 0:a.toLowerCase(),f=null===(l=e.idtAliases)||void 0===l?void 0:l.modifications,v=m;if(m&&null!==(c=e.name)&&void 0!==c&&c.includes("MOE")){var g,b,y=m,x=null!==(g=null===f||void 0===f?void 0:f.endpoint5)&&void 0!==g?g:"5".concat(y),w=null!==(b=null===f||void 0===f?void 0:f.internal)&&void 0!==b?b:"i".concat(y);v="".concat(x,", ").concat(w)}var A=(n.match(/\//g)||[]).length,C=n.split("/");if(A>=2&&void 0!==C[2]&&""!==C[2])return!1;if(n.startsWith("/")&&n.length>1){var M,k=n.slice(1);return(null===(M=v)||void 0===M?void 0:M.toLowerCase().startsWith(k))||(null===m||void 0===m?void 0:m.startsWith(k))||f&&Object.values(f).some(function(e){return null===e||void 0===e?void 0:e.toLowerCase().startsWith(k)})}if(n.endsWith("/")&&n.length>1){var O,I=n.slice(0,-1),D=n[n.length-2];return(null===(O=v)||void 0===O?void 0:O.toLowerCase().endsWith(I))&&v[v.length-1]===D||(null===m||void 0===m?void 0:m.endsWith(I))&&m[m.length-1]===D||f&&Object.values(f).some(function(e){return(null===e||void 0===e?void 0:e.toLowerCase().endsWith(I))&&e[e.length-1]===D})}return"/"===n?!!e.idtAliases:(null===s||void 0===s?void 0:s.includes(n))||(null===u||void 0===u?void 0:u.includes(n))||(null===p||void 0===p?void 0:p.includes(n))||(null===h||void 0===h?void 0:h.includes(n))||(null===(d=v)||void 0===d?void 0:d.toLowerCase().includes(n))})}),Cn=nn.actions,Mn=Cn.setActivePreset,kn=Cn.setSequenceSelection,On=Cn.setSequenceSelectionName,In=Cn.setIsSequenceFirstsOnlyNucleoelementsSelected;Cn.setActivePresetName;var Dn=Cn.setActiveRnaBuilderItem,Sn=Cn.setActiveMonomerKey,Yn=Cn.recalculateRnaBuilderValidations,En=Cn.setActivePresetMonomerGroup,Pn=Cn.savePreset,Ln=Cn.deletePreset,jn=Cn.createNewPreset,Nn=Cn.setIsEditMode,Fn=Cn.setUniqueNameError,Tn=Cn.setInvalidPresetError,Bn=Cn.setDefaultPresets,zn=Cn.setCustomPresets,Rn=Cn.setActivePresetForContextMenu,Hn=Cn.togglePresetFavorites,_n=Cn.setFavoritePresetsFromLocalStorage,qn=Cn.clearFavorites,Vn=nn.reducer;var Wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,N.U1)({reducer:{editor:Je,modal:Ut,library:Yt,rnaBuilder:Vn},middleware:function(e){return e({serializableCheck:!1})},preloadedState:e})}(),Un={colorA:{regular:"#5ADC11",hover:"#4FC218"},colorCM:{regular:"#59D0FF",hover:"#3CB9EB"},colorDQ:{regular:"#AD4551",hover:"#AB0014"},colorEN:{regular:"#93F5F5",hover:"#00F0F0"},colorFY:{regular:"#5656BF",hover:"#2626BF"},colorGX:{regular:"#FFE97B",hover:"#F8DC50"},colorH:{regular:"#BFC9FF",hover:"#99AAFF"},colorILV:{regular:"#50E576",hover:"#00D936"},colorKR:{regular:"#365CFF",hover:"#002CEB"},colorP:{regular:"#F2C5B6",hover:"#FFA98C"},colorST:{regular:"#FF8D8D",hover:"#ED6868"},colorW:{regular:"#99458B",hover:"#7F006B"},colorU:{regular:"#FF973C",hover:"#2EE55D"},colorX:{regular:"#CAD3DD",hover:"#B8BBCC"},chem:{regular:"#333333",hover:"#555555"},default:{regular:"#CCCBD6",hover:"#B8BBCC"}},Kn={D:{regular:"#FF8C69",hover:"#0097A8"},E:{regular:"#DC143C",hover:"#0097A8"},K:{regular:"#B0E0E6",hover:"#0097A8"},H:{regular:"#007FFF",hover:"#0097A8"},O:{regular:"#2A52BE",hover:"#0097A8"},R:{regular:"#0A12FF",hover:"#0097A8"},Q:{regular:"#EDB4ED",hover:"#0097A8"},Y:{regular:"#D65CBC",hover:"#0097A8"},U:{regular:"#CA7DE3",hover:"#0097A8"},S:{regular:"#9966CC",hover:"#0097A8"},C:{regular:"#BF00FF",hover:"#0097A8"},N:{regular:"#800080",hover:"#0097A8"},T:{regular:"#FF00FF",hover:"#0097A8"},L:{regular:"#7FFF00",hover:"#0097A8"},I:{regular:"#4CBB17",hover:"#0097A8"},F:{regular:"#008A00",hover:"#0097A8"},A:{regular:"#008080",hover:"#0097A8"},W:{regular:"#50E576",hover:"#0097A8"},P:{regular:"#D2D900",hover:"#0097A8"},G:{regular:"#BDB76B",hover:"#0097A8"},M:{regular:"#FFF600",hover:"#0097A8"},V:{regular:"#FFD700",hover:"#0097A8"}},Qn={color:{background:{canvas:"#F5F5F5",primary:"#FFFFFF",secondary:"#F8FEFF",overlay:"rgba(94,94,94,.8)"},border:{primary:"#CAD3DD",secondary:"#7C7C7F"},text:{primary:"#333333",secondary:"#167782",light:"#585858",dark:"#000000",error:"#FF4A4A",lightgrey:"#7C7C7F"},tab:{regular:"#FFFFFF",active:"#E1E5EA",hover:"#00838F",content:"#EFF2F5"},scroll:{regular:"#717171",inactive:"#DDDDDD"},button:{primary:{active:"#167782",hover:"#00838F",clicked:"#4FB3BF",disabled:"rgba(113, 113, 113, 0.4)"},secondary:{active:"#585858",hover:"#333333",clicked:"#AEAEAE",disabled:"rgba(113, 113, 113, 0.4)"},group:{active:"#167782",hover:"#2E858F"},transparent:{active:"transparent"},text:{primary:"#FFFFFF",secondary:"#005662",disabled:"#7A7A7A"}},dropdown:{primary:"#333333",secondary:"#FFFFFF",hover:"#DDDDDD",disabled:"#7A7A7A"},tooltip:{background:"#FFFFFF",text:"#333333"},link:{active:"#00838F",hover:"#005662"},divider:"#AEAEAE",spinner:"#005662",error:"#FF4A4A",input:{text:{default:"#585858",active:"#333333",disabled:"#585858",error:"#FF4A4A"},background:{primary:"#FFFFFF",default:"#EFF2F5",hover:"#DDDDDD",disabled:"#eff2f5"},border:{regular:"#cad3dd",active:"#FFFFFF",hover:"#43b5c0",focus:"#EFF2F5",error:"#FF4A4A"}},icon:{grey:"#B4B9D6",hover:"#005662",active:"#525252",activeMenu:"#005662",clicked:"#FFFFFF",disabled:"rgba(82, 82, 82, 0.4)"},monomer:{default:"#C8C8C8"},editMode:{sequenceInRNABuilder:"#99d7dc"}},font:{size:{small:"10px",regular:"12px",medium:"14px",xsmall:"6px"},family:{montserrat:"Montserrat, sans-serif",inter:"Inter, FreeSans, Arimo, 'Droid Sans', Helvetica, 'Helvetica Neue',\nArial, sans-serif",roboto:"Roboto, FreeSans, Arimo, Droid Sans, Helvetica, Helvetica Neue, Arial, sans-serif"},weight:{light:300,regular:400,bold:600}},monomer:{color:{A:Un.colorA,C:Un.colorCM,M:Un.colorCM,D:Un.colorDQ,Q:Un.colorDQ,E:Un.colorEN,N:Un.colorEN,F:Un.colorFY,Y:Un.colorFY,G:Un.colorGX,X:Un.colorX,Other:Un.colorX,H:Un.colorH,I:Un.colorILV,L:Un.colorILV,V:Un.colorILV,K:Un.colorKR,R:Un.colorKR,P:Un.colorP,S:Un.colorST,T:Un.colorST,W:Un.colorW,U:Un.colorU,CHEM:Un.chem,default:Un.default}},peptide:{color:{D:Kn.D,E:Kn.E,K:Kn.K,H:Kn.H,O:Kn.O,R:Kn.R,Q:Kn.Q,Y:Kn.Y,U:Kn.U,S:Kn.S,C:Kn.C,N:Kn.N,T:Kn.T,L:Kn.L,I:Kn.I,F:Kn.F,A:Kn.A,W:Kn.W,P:Kn.P,G:Kn.G,M:Kn.M,V:Kn.V,Other:Un.colorX}},border:{regular:"1px solid #CAD3DD",small:"1px solid #E1E5EA",radius:{regular:"4px"}},shadow:{regular:"0px 1px 1px rgba(197, 203, 207, 0.7)",mainLayoutBlocks:"0px 2px 5px rgba(103, 104, 132, 0.15)"},outline:{small:"1px solid #B4B9D6",medium:"2px solid #B4B9D6",color:"#B4B9D6",selected:{color:"#167782",small:"1px solid #167782",medium:"2px solid #167782"},grey:{small:"1px solid #585858"}},transition:{regular:"all .3s"},zIndex:{base:0,toolbar:10,sticky:100,overlay:200,modal:1e3,critical:9999}},Gn=function(e){return(0,d.AH)({all:"unset",".Ketcher-polymer-editor-root":{all:"unset",fontSize:e.ketcher.font.size.medium,fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary,boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) div":{boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) input":{fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,fontSize:e.ketcher.font.size.regular,boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) h1":{fontSize:96},":where(.Ketcher-polymer-editor-root) h2":{fontSize:60},":where(.Ketcher-polymer-editor-root) h3":{fontSize:48},":where(.Ketcher-polymer-editor-root) h4":{fontSize:34},":where(.Ketcher-polymer-editor-root) h5":{fontSize:24},":where(.Ketcher-polymer-editor-root) h6":{fontSize:20,fontWeight:e.ketcher.font.weight.bold},":where(.Ketcher-polymer-editor-root) p":{fontSize:e.ketcher.font.size.regular},":where(.Ketcher-polymer-editor-root) button":{textTransform:"uppercase",fontWeight:e.ketcher.font.weight.bold}},"","")};var Zn=(0,L.A)("div",{target:"e1vkl5kv5"})("width:","254px",";height:calc(100% - 16px);display:flex;flex-direction:column;background-color:",function(e){return e.theme.ketcher.color.background.primary},";box-shadow:",function(e){return e.theme.ketcher.shadow.mainLayoutBlocks},";border-radius:4px;z-index:",function(e){return e.theme.ketcher.zIndex.toolbar},";"),Xn=(0,L.A)("div",{target:"e1vkl5kv4"})({name:"n1y6qf",styles:"padding:10px 0 10px 8px;position:relative;display:flex;align-items:center;gap:8px"}),Jn=(0,L.A)("div",{target:"e1vkl5kv3"})("height:24px;display:flex;flex-grow:1;gap:4px;align-items:center;padding:4px;background-color:",function(e){return e.theme.ketcher.color.input.background.default},";border-radius:4px;&:hover,&:has(input:focus){outline:",function(e){return e.theme.ketcher.outline.selected.small},";}"),$n=(0,L.A)("button",{target:"e1vkl5kv2"})("height:24px;display:flex;align-items:center;gap:2px;border:none;border-radius:4px 0 0 4px;cursor:pointer;background-color:#e2e5e9;text-transform:none;font-weight:",function(e){return e.theme.ketcher.font.weight.regular},";font-size:",function(e){return e.theme.ketcher.font.size.regular},";color:",function(e){return e.theme.ketcher.color.text.secondary},";"),er=(0,L.A)(m.In,{target:"e1vkl5kv1"})("height:16px;width:16px;color:",function(e){return e.theme.ketcher.color.text.secondary},";"),tr=(0,L.A)(m.pd,{target:"e1vkl5kv0"})({name:"pmmg8c",styles:"flex-grow:1;padding:0;margin:0;background-color:transparent;border:none;outline:none;&:hover{outline:none;}&:focus{outline:none;}"}),nr=["children"];function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ir=(0,L.A)("div",{target:"e1pv9pa12"})(function(e){var t=e.fullWidth;return{width:t?"100%":"fit-content",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingRight:e.withPaddingRight?"12px":0,overflow:t?"hidden":"initial"}},""),ar=(0,L.A)("div",{target:"e1pv9pa11"})(function(e){return{height:"100%",width:"100%",position:"relative",padding:"12px",paddingBottom:0,backgroundColor:e.theme.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",containerType:"size",overflow:"clip"}},""),lr=(0,L.A)("div",{target:"e1pv9pa10"})(function(e){return{height:"100%",width:"100%",position:"relative",paddingBottom:0,backgroundColor:e.theme.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",columnGap:"3px"}},""),cr=(0,L.A)("div",{target:"e1pv9pa9"})(function(e){var t=e.hide;return{height:"100%",width:"fit-content",display:void 0!==t&&t?"none":"flex",flexDirection:"column"}},""),dr=(0,L.A)(cr,{target:"e1pv9pa8"})(""),sr=(0,L.A)(cr,{target:"e1pv9pa7"})(""),ur=(0,L.A)("div",{target:"e1pv9pa6"})({name:"oixulj",styles:"display:flex;justify-content:space-between;width:100cqw"}),pr=(0,L.A)("div",{target:"e1pv9pa5"})(function(e){var t=e.shortened,n=void 0!==t&&t,r=e.theme;return{height:"36px",width:n?"100%":"calc(100% - ".concat("100px",")"),marginBottom:"6px",display:"flex",alignItems:"center",backgroundColor:"#FFFFFF",boxShadow:r.ketcher.shadow.mainLayoutBlocks,borderRadius:"4px",overflowX:"hidden"}},""),hr=(0,L.A)("div",{target:"e1pv9pa4"})("width:42px;height:36px;display:flex;position:relative;right:0;cursor:pointer;background:white;box-shadow:",function(e){return e.theme.ketcher.shadow.mainLayoutBlocks},";border-radius:4px;"),mr=(0,L.A)("div",{target:"e1pv9pa3"})({name:"1gavlve",styles:"&:not(:empty){margin-bottom:15px;}"}),fr=(0,L.A)("div",{target:"e1pv9pa2"})({name:"nc15h",styles:"height:100%;width:100%;position:relative;overflow:hidden"}),vr=(0,L.A)("div",{target:"e1pv9pa1"})({name:"0",styles:""}),gr=(0,L.A)("div",{target:"e1pv9pa0"})({name:"1k18kha",styles:"height:40px"}),br=function(e){var t=(0,Z.Wx)({threshold:1}),n=(0,i.A)(t,2),r=n[0],o=n[1],l=(0,Z.Wx)({threshold:1}),d=(0,i.A)(l,2),s=d[0],u=d[1],p=e.children,h=(0,G.A)(e,nr),f=(0,c.useRef)(null);return(0,a.FD)("div",{style:{display:"flex",position:"relative"},children:[(0,a.FD)(pr,or(or({},h),{},{ref:f,children:[(0,a.Y)("span",{ref:r}),(0,a.Y)(ur,{children:(0,a.Y)(a.FK,{children:p})}),(0,a.Y)("span",{ref:s})]})),o&&u?null:(0,a.Y)(hr,{children:(0,a.Y)(m.Nn,{startInView:o,endInView:u,scrollBack:function(e){f.current&&(f.current.scrollLeft-=300*e/1e3)},scrollForward:function(e){f.current&&(f.current.scrollLeft+=300*e/1e3)},isLeftRight:!0})})]})},yr=function(e){var t=e.children,n={Left:null,Main:null,Right:null,Top:null,Bottom:null,InsideRoot:null};return c.Children.forEach(t,function(e){e.type===dr?n.Left=e:e.type===sr?n.Right=e:e.type===br?n.Top=e:e.type===mr?n.Bottom=e:e.type===fr?n.Main=e:e.type===vr&&(n.InsideRoot=e)}),(0,a.FD)(ar,{children:[(0,a.FD)(ir,{fullWidth:!0,withPaddingRight:!0,children:[n.Top,(0,a.FD)(lr,{children:[n.Left,(0,a.Y)(gr,{}),n.Main]}),n.Bottom]}),(0,a.Y)(ir,{children:n.Right}),n.InsideRoot]})};yr.Left=dr,yr.Top=br,yr.Bottom=mr,yr.Right=sr,yr.Main=fr,yr.InsideRoot=vr;var xr="TabPanel-module_tabPanelDiv__wMffZ",wr="TabPanel-module_tabPanelBox__LY-BB",Ar=function(e){var t=e.children,n=e.value,r=e.index;return(0,a.Y)("div",{className:xr,role:"tabpanel",hidden:n!==r,id:r.toString(),children:n===r&&(0,a.Y)(S.A,{className:wr,children:(0,a.Y)(a.FK,{children:t})})})};var Cr=(0,L.A)(f.A,{shouldForwardProp:function(e){return"isLayoutToRight"!==e},target:"e1rrs7vg3"})("height:32px;min-height:32px;list-style-type:none;margin:0;padding:4px 8px 0 8px;border-bottom:",function(e){var t=e.theme;return"1px solid ".concat(t.ketcher.color.border.primary)},";overflow:unset;& .MuiTabs-scroller,& .MuiTabs-flexContainer{height:100%;overflow:unset!important;}& .MuiTabs-flexContainer{justify-content:",function(e){return e.isLayoutToRight?"flex-end":"flex-start"},";padding-right:",function(e){return e.isLayoutToRight?"16px":"0"},";}& .MuiTabs-indicator{display:none;}"),Mr=(0,L.A)(v.A,{shouldForwardProp:function(e){return"isLayoutToRight"!==e},target:"e1rrs7vg2"})("min-height:24px;min-width:0;position:relative;padding:7px 12px;font-size:",function(e){return e.theme.ketcher.font.size.regular},";text-transform:none;cursor:pointer;text-align:center;background-color:",function(e){return e.theme.ketcher.color.tab.regular},";color:",function(e){return e.theme.ketcher.color.text.light},";list-style-type:none;margin-left:1px;align-items:center;flex:",function(e){return e.isLayoutToRight?void 0:"1 1 auto;"},";border:1px solid transparent;border-bottom:none;border-radius:4px 4px 0 0;&:first-of-type{margin-left:0;}&:hover{background-color:",function(e){return e.theme.ketcher.color.tab.regular},";color:",function(e){return e.theme.ketcher.color.text.primary},";border-color:",function(e){return e.theme.ketcher.color.border.primary},";}&.Mui-selected{background-color:",function(e){return e.theme.ketcher.color.tab.active},";color:",function(e){return e.theme.ketcher.color.text.primary},";border-color:",function(e){return e.theme.ketcher.color.border.primary},";margin-bottom:-1px;padding-bottom:8px;&::after{content:'';position:absolute;left:0;bottom:-1px;height:1px;background-color:",function(e){return e.theme.ketcher.color.tab.active},";}}&[data-tab='Favorites']{font-size:16px;color:#faa500;}"),kr=(0,L.A)(v.A,{target:"e1rrs7vg1"})({name:"2934o7",styles:"width:0;height:0;min-width:0;min-height:0;padding:0;margin:0;visibility:hidden"}),Or=(0,L.A)("div",{target:"e1rrs7vg0"})({name:"2r6rpv",styles:"display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;width:100%;height:100%"});function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Sr=(0,c.memo)(function(e){var t=e.tabs,n=e.selectedTabIndex,r=e.isLayoutToRight,o=e.onChange,i=t[n],l=null===i||void 0===i?void 0:i.component,c=null===i||void 0===i?void 0:i.props;return(0,a.FD)(a.FK,{children:[(0,a.FD)(Cr,{value:n,onChange:o,isLayoutToRight:r,children:[t.map(function(e,t){return(0,a.Y)(Mr,Dr({label:e.caption,title:e.tooltip,isLayoutToRight:r,"data-testid":e.testId,"data-tab":e.tooltip},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(t)),e.caption||e.testId)}),(0,a.Y)(kr,{value:-1})]}),i&&(0,a.Y)(Ar,{value:n,index:n,children:(0,a.Y)(Or,{children:(0,a.Y)(l,Dr({},c))})})]})}),Yr=function(){};function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Lr=function(e,t,n){var r=new Map(e.map(function(e){return[(0,h.eoH)(e)?(0,h.QDi)(e.id):(0,h.aRw)(e.props.id||mt(e)),e]}));return t.filter(function(e){return e.templates.every(function(e){return Boolean(r.get(e.$ref))})}).map(function(e){var t=new Map(e.templates.map(function(e){var t=r.get(e.$ref),n=(0,h.w7j)(t);return[(0,i.A)(n,3)[2],t]})),o=t.get(h.IPc.Sugar),a=t.get(h.IPc.Base),l=t.get(h.IPc.Phosphate),c={base:a?Pr(Pr({},a),{},{label:a.label}):void 0,name:e.name,phosphate:l?Pr(Pr({},l),{},{label:l.label}):void 0,sugar:o?Pr(Pr({},o),{},{label:o.label}):void 0,favorite:e.favorite,default:n||e.default};return e.idtAliases?Pr(Pr({},c),{},{idtAliases:e.idtAliases}):c})},jr=function(e){return Object.entries(e).filter(function(e){var t=(0,i.A)(e,2);t[0];var n=t[1];return Boolean(n)}).map(function(e){return(0,i.A)(e,1)[0]})},Nr=function(e){return e?e.replace(/(?:^\/+)|(?:\/+$)/g,""):e},Fr=function(){return(0,l.wA)()},Tr=l.d4;function Br(){var e,t,n=Tr(Ne),r=Tr(Fe),o=Tr(ze);try{t=h.qd$.getKetcher(n)}catch(m){h.$yr.error("Failed to get ketcher instance with id ".concat(n),m)}var a=(null===(e=t)||void 0===e||null===(e=e.editor)||void 0===e?void 0:e.struct().isBlank())?h.jJA:h.cmw,l=(0,c.useState)(o||a),d=(0,i.A)(l,2),s=d[0],u=d[1],p=(0,c.useCallback)(function(e){u(e)},[]);return(0,c.useEffect)(function(){return null===r||void 0===r||r.events.layoutModeChange.add(p),function(){p(h.jJA),null===r||void 0===r||r.events.layoutModeChange.remove(p)}},[p,r]),s}var zr=c.createContext({}),Rr=(0,c.createContext)({width:0,height:0}),Hr=function(e){var t=e.children,n=e.rootRef,r=e.isMacromoleculesEditorTurnedOn,o=(0,c.useState)({width:0,height:0}),l=(0,i.A)(o,2),d=l[0],s=l[1],u=(0,c.useCallback)(function(){if(null!==n&&void 0!==n&&n.current){var e=n.current.getBoundingClientRect(),t=e.width,r=e.height;s({width:t,height:r})}},[n]),h=(0,c.useCallback)((0,p.debounce)(u,100),[u]);return(0,c.useEffect)(function(){u()},[r]),(0,c.useEffect)(function(){return h(),window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}},[h]),(0,a.Y)(Rr.Provider,{value:d,children:t})},_r=function(){return(0,c.useContext)(Rr).height<720};var qr=(0,L.A)("div",{target:"e719szw4"})("background:white;height:48px;text-align:center;cursor:",function(e){return e.disabled?"default":"pointer"},";opacity:",function(e){return e.disabled?"0.4":"1"},";display:flex;justify-content:space-between;align-items:center;font-size:",function(e){return e.theme.ketcher.font.size.small},";color:",function(e){return e.theme.ketcher.color.text.primary},";position:relative;overflow:hidden;border-radius:4px;box-shadow:0 2px 5px 0 rgba(103, 104, 132, 0.149);margin:0;user-select:none;border-color:#167782;border-width:",function(e){return e.selected?"2px 2px 2px":"0px"},";border-style:solid;box-sizing:border-box;z-index:",function(e){return e.selected?2:void 0},";.hidden & .star{visibility:hidden!important;}&:hover{outline:1px solid #b4b9d6;>.star,.autochain{visibility:visible;opacity:1;}}&::after{content:'';display:block;position:absolute;top:0;left:0;width:100%;height:8px;border-bottom:",function(e){return e.isVariantMonomer?"1px solid #CAD3DD":"none"},";background:",function(e){var t,n,r,o,i,a,l=e.code,c=e.theme,d=e.item;return d?"PEPTIDE"===(null===(n=d.props)||void 0===n?void 0:n.MonomerType)&&null!==(r=c.ketcher.peptide.color[l])&&void 0!==r&&r.regular?null===(a=c.ketcher.peptide.color[l])||void 0===a?void 0:a.regular:(null===(o=c.ketcher.monomer.color[l])||void 0===o?void 0:o.regular)||(null===(i=c.ketcher.monomer.color.default)||void 0===i?void 0:i.regular):null===(t=c.ketcher.monomer.color.default)||void 0===t?void 0:t.regular},";},>span{position:absolute;bottom:",function(e){return e.selected?"4px":"6px"},";left:",function(e){return e.selected?"4px":"6px"},";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:85%;}>.star{color:#cad3dd;position:absolute;left:calc(50% - 7px);top:11px;font-size:13px;line-height:13px;opacity:0;transition:0.2s ease;flex-shrink:0;&.visible{visibility:visible;opacity:1;}&:active{transform:scale(1.4);}&:hover,&.visible{color:#faa500;}}"),Vr=(0,L.A)("div",{target:"e719szw3"})("display:flex;justify-content:center;align-items:center;height:15px;width:",function(e){return e.monomersAmount>=10?"20px":"15px"},";border-radius:",function(e){return e.monomersAmount>=10?"20px":"50%"},";border:1px solid #cceaee;position:absolute;bottom:",function(e){return e.selected?"4px":"6px"},";left:",function(e){return e.selected?"18px":"20px"},";font-size:12px;line-height:12px;"),Wr=(0,L.A)("span",{target:"e719szw2"})({name:"rnnx2x",styles:"font-size:12px"}),Ur=(0,L.A)(m.In,{target:"e719szw1"})("color:#cad3dd;stroke-width:0;opacity:0;transition:0.2s ease;flex-shrink:0;width:13px;&:active{transform:scale(1.2);}&:hover{color:",function(e){return e.disabled?"#cad3dd":"#333333"},";}"),Kr=(0,L.A)("div",{target:"e719szw0"})({name:"evdt6m",styles:"position:absolute;top:12px;left:4px"}),Qr=function(e,t){var n,r,o,a=Tr(Te),d=(0,l.d4)(dn),s=(0,c.useState)(!1),u=(0,i.A)(s,2),p=u[0],m=u[1];return(0,c.useEffect)(function(){if(!a)return m(!1);var n;if(t===h.uP8.BASES)m(!(null!==e&&void 0!==e&&null!==(n=e.props)&&void 0!==n&&null!==(n=n.MonomerCaps)&&void 0!==n&&n.R1));else if(t===h.uP8.PHOSPHATES){var r,o;m(!(null!==e&&void 0!==e&&null!==(r=e.props)&&void 0!==r&&null!==(r=r.MonomerCaps)&&void 0!==r&&r.R1&&null!==e&&void 0!==e&&null!==(o=e.props)&&void 0!==o&&null!==(o=o.MonomerCaps)&&void 0!==o&&o.R2))}else if(t===h.uP8.SUGARS){var i,l,c,s,u;if(d)m(!(null!==e&&void 0!==e&&null!==(i=e.props)&&void 0!==i&&null!==(i=i.MonomerCaps)&&void 0!==i&&i.R3&&null!==e&&void 0!==e&&null!==(l=e.props)&&void 0!==l&&null!==(l=l.MonomerCaps)&&void 0!==l&&l.R2));else m(!(null!==e&&void 0!==e&&null!==(c=e.props)&&void 0!==c&&null!==(c=c.MonomerCaps)&&void 0!==c&&c.R3&&null!==e&&void 0!==e&&null!==(s=e.props)&&void 0!==s&&null!==(s=s.MonomerCaps)&&void 0!==s&&s.R2&&null!==e&&void 0!==e&&null!==(u=e.props)&&void 0!==u&&null!==(u=u.MonomerCaps)&&void 0!==u&&u.R1))}},[t,a,d,null===e||void 0===e||null===(n=e.props)||void 0===n||null===(n=n.MonomerCaps)||void 0===n?void 0:n.R1,null===e||void 0===e||null===(r=e.props)||void 0===r||null===(r=r.MonomerCaps)||void 0===r?void 0:r.R2,null===e||void 0===e||null===(o=e.props)||void 0===o||null===(o=o.MonomerCaps)||void 0===o?void 0:o.R3,m]),p},Gr=function(e,t){var n=(0,l.d4)(Fe);(0,c.useEffect)(function(){if(n&&t.current){var r=(0,V.Ltv)(t.current),o=(0,V.$Er)().on("start",function(){n.isLibraryItemDragCancelled="sequence-layout-mode"===n.mode.modeName,n.isLibraryItemDragCancelled||(document.body.style.cursor="grabbing")}).on("drag",function(t){var r,o;if(!n.isLibraryItemDragCancelled){var i=t.sourceEvent,a=i.clientX,l=i.clientY;n.events.setLibraryItemDragState.dispatch({item:e,position:{x:a-((null===(r=n.ketcherRootElementBoundingClientRect)||void 0===r?void 0:r.left)||0),y:l-((null===(o=n.ketcherRootElementBoundingClientRect)||void 0===o?void 0:o.top)||0)}})}}).on("end",function(t){if(!n.isLibraryItemDragCancelled){var r,o=t.sourceEvent,a=o.clientX,l=o.clientY,c=null===(r=h.OQ2.instance.canvasWrapper.node())||void 0===r?void 0:r.getBoundingClientRect();if(c){var d=c.top,s=c.left,u=c.right,p=c.bottom,m=h.OQ2.instance.zoomTransform,f=a-s+15*m.k,v=l-d+15*m.k,g=m.invert([f,v]),b=(0,i.A)(g,2),y=b[0],x=b[1];a>=s&&a<=u&&l>=d&&l<=p&&n.events.placeLibraryItemOnCanvas.dispatch(e,{x:y,y:x})}}n.events.setLibraryItemDragState.dispatch(null),n.isLibraryItemDragCancelled=!1,document.body.style.cursor=""});return r.call(o),function(){r.on(".drag",null)}}},[n,e,t])},Zr=function(e,t){var n=e.getDataForAutochain(),r=n.selectedMonomersWithFreeR2;return n.selectedMonomers.length>0&&1!==r.length?"Select a monomer or a chain that has one R2 available.":1!==r.length||(0,h.fdJ)(t)?"":"This monomer cannot be added to a chain using this button, as it lacks R1."},Xr=function(e,t,n){n(Zr(e,t))};function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eo="autochain",to=function(e){var t,n,r,o,l,d,s,u,p,m,f=e.item,v=e.groupName,g=e.onMouseLeave,b=e.onMouseMove,y=e.isSelected,x=e.disabled,w=e.onClick,A=void 0===w?Yr:w,C=Fr(),M=Tr(Fe),k=Tr(Be),O=(0,c.useState)(""),I=(0,i.A)(O,2),D=I[0],S=I[1],Y=(0,c.useRef)(null),E=Qr(f,v)||x,P="";(0,h.eoH)(f)||(P=f.props.MonomerType===tt?f.props.MonomerType:f.props.MonomerNaturalAnalogCode);var L=mt(f),j=(0,h.eoH)(f)?void 0:f,N=(0,c.useCallback)(function(e){e.stopPropagation(),C(wt(f))},[C,f]),F=(0,c.useCallback)(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),C(wt(f)))},[C,f]),T=(0,c.useCallback)(function(e){if(e.stopPropagation(),M){var t=Zr(M,f);if(S(t),t)return}null===M||void 0===M||M.events.autochain.dispatch(f)},[M,f]),B=(0,c.useCallback)(function(){return M&&Xr(M,f,S)},[M,f]),z=(0,c.useCallback)(function(){if(M){var e=Zr(M,f);if(S(e),e)return}null===M||void 0===M||M.events.previewAutochain.dispatch(f)},[M,f]),R=(0,c.useCallback)(function(){null===M||void 0===M||M.events.removeAutochainPreview.dispatch(f)},[M,f]);return Gr(f,Y),(0,a.FD)(qr,$r($r({selected:y,disabled:E,"data-testid":L,"data-monomer-item-id":L,item:j,isVariantMonomer:f.isAmbiguous,code:P,onMouseOver:B,onMouseLeave:g,onMouseMove:b,onDoubleClick:function(e){T(e),R()}},E?{}:{onClick:A}),{},{ref:Y,"data-idtalias-base":null!==(t=null===j||void 0===j||null===(n=j.props.idtAliases)||void 0===n?void 0:n.base)&&void 0!==t?t:void 0,"data-idtalias-modifications-endpoint5":null!==(r=null===j||void 0===j||null===(o=j.props.idtAliases)||void 0===o||null===(o=o.modifications)||void 0===o?void 0:o.endpoint5)&&void 0!==r?r:void 0,"data-idtalias-modifications-endpoint3":null!==(l=null===j||void 0===j||null===(d=j.props.idtAliases)||void 0===d||null===(d=d.modifications)||void 0===d?void 0:d.endpoint3)&&void 0!==l?l:void 0,"data-idtalias-modifications-internal":null!==(s=null===j||void 0===j||null===(u=j.props.idtAliases)||void 0===u||null===(u=u.modifications)||void 0===u?void 0:u.internal)&&void 0!==s?s:void 0,"data-axolabs":null!==(p=null===j||void 0===j?void 0:j.props.aliasAxoLabs)&&void 0!==p?p:void 0,"data-helm":null!==(m=null===j||void 0===j?void 0:j.props.aliasHELM)&&void 0!==m?m:void 0,"data-modificationtype":null!==j&&void 0!==j&&j.props.modificationTypes?Array.isArray(null===j||void 0===j?void 0:j.props.modificationTypes)?null===j||void 0===j?void 0:j.props.modificationTypes.join(", "):null===j||void 0===j?void 0:j.props.modificationTypes:void 0,children:[(0,a.Y)(Wr,{children:f.label}),!E&&(0,a.FD)(a.FK,{children:[!k&&(0,a.Y)(te.A,{title:D,children:(0,a.Y)(Kr,{children:(0,a.Y)(Ur,{className:eo,name:"monomer-autochain",disabled:Boolean(D),onMouseOver:z,onMouseOut:R,onClick:T,onDoubleClick:function(e){return e.stopPropagation()}})})}),(0,a.Y)("div",{onClick:N,onKeyDown:F,className:"star ".concat(f.favorite?"visible":""),role:"button",tabIndex:0,"aria-label":"Toggle favorite",children:"\u2605"})]}),(0,h.eoH)(f)&&(0,a.Y)(Vr,{selected:y,monomersAmount:f.monomers.length,children:f.monomers.length})]}))};var no=(0,L.A)("div",{target:"e10tnh3n3"})({name:"37420",styles:"display:grid;grid-template-columns:repeat(3, 1fr);grid-template-rows:auto;flex:1;gap:4px;&::after{content:'';flex:auto;}"}),ro=(0,L.A)("div",{target:"e10tnh3n2"})("position:relative;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;font-size:",function(e){return e.theme.ketcher.font.size.small},";font-family:",function(e){return e.theme.ketcher.font.family.roboto},";color:",function(e){return e.theme.ketcher.color.divider},";margin:0;gap:4px;"),oo=(0,L.A)(ro,{target:"e10tnh3n1"})({name:"qdeacm",styles:"flex-direction:column"}),io=(0,L.A)("div",{target:"e10tnh3n0"})("height:100%;display:flex;flex-grow:0;flex-basis:14px;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;font-size:",function(e){return e.theme.ketcher.font.size.medium},";font-family:",function(e){return e.theme.ketcher.font.family.roboto},";color:",function(e){return e.theme.ketcher.color.text.primary},";margin:0;"),ao=[eo],lo=function(e){return ao.some(function(t){return e.classList.contains(t)||e.closest(".".concat(t))})};function co(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return so(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?so(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var uo=function(e){var t=e.items,n=e.title,o=e.groupName,i=e.selectedMonomerUniqueKey,l=e.libraryName,d=e.disabled,s=e.onItemClick,u=void 0===s?Yr:s,f=Fr(),v=Tr(Fe),g=Tr(on),b=function(e){var t=!1;if((0,h.eoH)(e))return!1;if(d)t=d;else{var n,r,o=g["".concat(null===(n=e.props)||void 0===n?void 0:n.MonomerClass,"s")];if((null===o||void 0===o?void 0:o.length)>0&&null!==(r=e.props)&&void 0!==r&&r.MonomerCaps){var i,a=co(o);try{for(a.s();!(i=a.n()).done;){i.value in e.props.MonomerCaps||(t=!0)}}catch(l){a.e(l)}finally{a.f()}}}return t},y=(0,c.useCallback)(function(e){return f(we(e))},[f]),x=(0,c.useCallback)((0,p.debounce)(function(e){return y(e)},500),[y]),w=function(){x.cancel(),f(we(void 0))},A=function(e){return i===mt(e)};return t&&0!==t.length?(0,a.FD)(oo,{children:[n&&(0,a.Y)(io,{children:n}),(0,a.Y)(no,{children:t.map(function(e){return(0,a.Y)(to,{disabled:b(e),item:e,groupName:o,isSelected:A(e),onMouseLeave:w,onMouseMove:function(t){return function(e,t){if(w(),!lo(t.target)){var n,o,i,a=t.currentTarget.getBoundingClientRect();if((0,h.eoH)(e)){i=e?(0,m.Xv)(e)(a):"";var l="".concat(a.left+a.width/2,"px");o=r.AmbiguousMonomer,n={left:l,top:i,transform:"translate(-50%, 0)"}}else n={right:"-88px",top:i=e?(0,m.Dk)(a):"",transform:"translate(-50%, 0)"},o=r.Monomer;x({type:o,monomer:e,style:n})}}(e,t)},onClick:function(){return function(e){["FAVORITES","PEPTIDE","CHEM"].includes(null!==l&&void 0!==l?l:"")&&(null===v||void 0===v||v.events.selectMonomer.dispatch(e)),u(e)}(e)}},mt(e))})})]}):null};var po,ho=(0,L.A)("div",{target:"e1bp6il60"})({name:"8z91a1",styles:"width:100%;display:flex;flex-direction:column;justify-items:center;gap:8px;padding:8px"}),mo=(0,L.A)(qr,{target:"e1txcvj90"})("&::after{content:'';background:",function(e){var t=e.theme;return e.selected?t.ketcher.color.button.primary.active:"#faa500"},";}.dots{visibility:hidden;position:absolute;right:2px;top:10px;}&:hover .dots{visibility:visible;}>.star{right:0;left:calc(50% - 7px);top:11px;width:min-content;}"),fo=(0,L.A)("div",{target:"e1h0dkll2"})(function(e){return{minHeight:"32px",display:"flex",alignItems:"center",padding:"8px 12px",gap:"8px",borderBottom:e.theme.ketcher.border.small}},""),vo=(0,L.A)("span",{target:"e1h0dkll1"})(function(e){return{flexGrow:1,fontSize:e.theme.ketcher.font.size.regular}},""),go=(0,L.A)(m.In,{target:"e1h0dkll0"})(function(e){return{width:"16px",height:"16px",color:e.theme.ketcher.color.icon.grey,transition:e.theme.ketcher.transition.regular,transform:e.expanded?"rotate(180deg)":"none"}},""),bo=(0,c.memo)(function(e){var t=e.preset,n=e.isSelected,r=e.onClick,o=void 0===r?Yr:r,l=e.onContextMenu,d=void 0===l?Yr:l,s=e.onMouseLeave,u=void 0===s?Yr:s,p=e.onMouseMove,h=void 0===p?Yr:p,m=Fr(),f=Tr(Fe),v=Tr(Be),g=(0,c.useState)(""),b=(0,i.A)(g,2),y=b[0],x=b[1],w=(0,c.useRef)(null),A=(0,c.useCallback)(function(e){e.stopPropagation(),m(Hn(t))},[m,t]),C=(0,c.useCallback)(function(e){e.stopPropagation(),y||null===f||void 0===f||f.events.autochain.dispatch(t)},[y,f,t]),M=(0,c.useCallback)(function(){return f&&Xr(f,t,x)},[f,t]),k=(0,c.useCallback)(function(){y||null===f||void 0===f||f.events.previewAutochain.dispatch(t)},[y,f,t]),O=(0,c.useCallback)(function(){null===f||void 0===f||f.events.removeAutochainPreview.dispatch(t)},[f,t]);return Gr(t,w),(0,a.FD)(mo,{"data-testid":ft(t),onClick:o,onContextMenu:d,onMouseOver:M,onMouseLeave:u,onMouseMove:h,onDoubleClick:function(e){C(e),O()},selected:n,code:t.name,"data-rna-preset-item-name":t.name,ref:w,children:[!v&&(0,a.Y)(te.A,{title:y,children:(0,a.Y)(Kr,{children:(0,a.Y)(Ur,{className:eo,name:"monomer-autochain",disabled:Boolean(y),onMouseOver:k,onMouseOut:O,onClick:C,onDoubleClick:function(e){return e.stopPropagation()}})})}),(0,a.Y)("span",{children:t.name}),(0,a.Y)(go,{name:"vertical-dots",className:"dots",onClick:d}),(0,a.Y)("div",{"aria-hidden":!0,onClick:A,className:"star ".concat(t.favorite?"visible":""),children:"\u2605"})]})});!function(e){e.FOR_RNA="context-menu-for-RNA",e.FOR_SEQUENCE="context-menu-for-sequence",e.FOR_POLYMER_BOND="context-menu-for-polymer-bond",e.FOR_SELECTED_MONOMERS="context-menu-for-selected-monomers"}(po||(po={}));var yo=(0,L.A)(_.W1,{target:"ekj16lc0"})("--contexify-activeItem-bgColor:rgba(243, 245, 247, 1);--contexify-menu-minWidth:140px;--contexify-activeItem-color:rgba(51, 51, 51, 1);--contexify-menu-padding:4px;--contexify-itemContent-padding:6px 8px;--contexify-separator-margin:4px 0;--contexify-separator-color:#e1e5ea;.contexify_itemContent{font-family:",function(e){return e.theme.ketcher.font.family.inter},";font-size:",function(e){return e.theme.ketcher.font.size.regular},";height:28px;}.contexify_item-title{opacity:1;font-weight:bold;background:#e1e5ea;margin:-4px 0 4px -4px;width:calc(100% + 8px);border-radius:4px 4px 0 0;}.context_menu-icon{width:16px;height:16px;display:flex;align-items:center;margin-right:4px;}.context_menu-text{display:flex;align-items:center;line-height:",function(e){return e.theme.ketcher.font.size.regular},";}.context_menu-delete-text{display:flex;align-items:center;line-height:",function(e){return e.theme.ketcher.font.size.regular},";margin-left:-3px;}"),xo=function e(t,n){var r=!1,o=[];return t.forEach(function(t){var i=t.name,l=t.title,c=t.icon,d=t.hidden,s=t.disabled,u=t.isMenuTitle,p=t.separator,h=t.subMenuItems,m=t.onMouseOver,f=t.onMouseOut,v=null!==h&&void 0!==h&&h.length?(0,a.Y)(_.Qw,{label:l,"data-testid":i,children:e(h,n)},i):(0,a.FD)(_.q7,{id:i,onClick:function(e){r=!0,setTimeout(function(){r=!1},500),n(e)},"data-testid":i,hidden:d,disabled:s,className:u?"contexify_item-title":"",onMouseOver:function(){r||null===m||void 0===m||m(i)},onMouseOut:function(){return null===f||void 0===f?void 0:f(i)},children:[c&&(0,a.Y)("span",{className:"context_menu-icon",children:c}),(0,a.Y)("span",{className:"delete"===i?"context_menu-delete-text":"context_menu-text",children:l})]},i);o.push(v),p&&o.push((0,a.Y)(_.wv,{},"separator-".concat(i)))}),o},wo=function(e){var t=e.id,n=e.handleMenuChange,r=e.menuItems,o=Fr();return(0,c.useEffect)(function(){var e=function(e){var t,n;(null===(t=e.target)||void 0===t||null===(t=t.__data__)||void 0===t?void 0:t.node)||(null===(n=e.target)||void 0===n||null===(n=n.__data__)||void 0===n?void 0:n.monomer)?e.stopPropagation():o(Ae(!1))};return document.addEventListener("click",e),document.addEventListener("contextmenu",e),function(){document.removeEventListener("click",e),document.removeEventListener("contextmenu",e)}},[o,t]),(0,a.Y)(yo,{id:t,children:xo(r,n)})},Ao=function(){var e=ct,t=Fr(),n=Tr(bn),r=Tr(St),o=Tr(Te),i=[{name:"duplicateandedit",title:"Duplicate and Edit...",disabled:!1},{name:"edit",title:"Edit...",separator:!0,disabled:null===n||void 0===n?void 0:n.default},{name:"deletepreset",title:"Delete Preset",disabled:null===n||void 0===n?void 0:n.default}],l=document.querySelector(m.tS);return l&&!o?(0,q.createPortal)((0,a.Y)(wo,{id:po.FOR_RNA,menuItems:i,handleMenuChange:function(o){var i=o.id,a=o.props;switch(i){case"duplicateandedit":a.duplicatePreset(n),r!==e&&t(Ct(e));break;case"edit":a.editPreset(n),r!==e&&t(Ct(e));break;case"deletepreset":t(jt("delete"))}}}),l):null},Co=function(e){var t=e.presets,n=e.duplicatePreset,i=e.editPreset,d=Tr(an),s=Tr(Fe),u=(0,_.EF)({id:po.FOR_RNA}).show,f=(0,l.wA)(),v=function(e){return function(){var t=function(e){var t,n,r,o,i,a=!0,l=!0,c=!0;return null!==e&&void 0!==e&&null!==(t=e.base)&&void 0!==t&&null!==(t=t.props)&&void 0!==t&&t.MonomerCaps&&(a="R1"in e.base.props.MonomerCaps),null!==e&&void 0!==e&&null!==(n=e.sugar)&&void 0!==n&&null!==(n=n.props)&&void 0!==n&&n.MonomerCaps&&a&&null!==e&&void 0!==e&&null!==(o=e.base)&&void 0!==o&&null!==(o=o.props)&&void 0!==o&&o.MonomerCaps&&(l="R3"in e.sugar.props.MonomerCaps),null!==e&&void 0!==e&&null!==(r=e.phosphate)&&void 0!==r&&null!==(r=r.props)&&void 0!==r&&r.MonomerCaps&&(c="R1"in e.phosphate.props.MonomerCaps,l&&null!==e&&void 0!==e&&null!==(i=e.sugar)&&void 0!==i&&null!==(i=i.props)&&void 0!==i&&i.MonomerCaps&&(l="R2"in e.sugar.props.MonomerCaps)),a&&l&&c}(e);t||!e.name?(f(Mn(e)),null===s||void 0===s||s.events.selectPreset.dispatch(e),e.name!==d.name&&f(Nn(!1))):f(Tn(e.name))}},g=function(e){var t;!(e instanceof HTMLDivElement)&&e.parentElement&&(e=e.parentElement);var n=e.getBoundingClientRect(),r=null===(t=e.offsetParent)||void 0===t?void 0:t.getBoundingClientRect(),o=n.right-140,i=n.y+n.height/2;return null!==r&&void 0!==r&&r.x&&(null===r||void 0===r?void 0:r.x)>o&&(o=n.x),{x:o,y:i}},b=Tr(Le),y=(0,c.useCallback)(function(e){return f(we(e))},[f]),x=(0,c.useCallback)((0,p.debounce)(function(e){return y(e)},500),[y]),w=function(){x.cancel(),f(we(void 0))},A=function(e){return function(t){t.stopPropagation(),f(Rn(e)),u({event:t,props:{duplicatePreset:n,editPreset:i},position:g(t.currentTarget)})}};return(0,a.FD)(ro,{"data-testid":"rna-preset-group",children:[(0,a.Y)(no,{children:t.map(function(e,t){return(0,a.Y)(bo,{isSelected:(null===d||void 0===d?void 0:d.name)===e.name,preset:e,onClick:v(e),onContextMenu:A(e),onMouseMove:function(t){return function(e,t){if(w(),!lo(t.target)&&b.type!==r.Preset&&t.currentTarget){var n=[e.sugar,e.base,e.phosphate],i=t.currentTarget.getBoundingClientRect(),a={left:"".concat(i.left+i.width,"px"),top:(0,h.eoH)(e.base)?(0,m.Xv)(e.base)(i):(0,m._Y)(i),transform:"translate(-100%, 0)"},l=(0,h.eoH)(e.base)?{type:r.AmbiguousMonomer,monomer:e.base,presetMonomers:n,style:a}:{type:r.Preset,monomers:n,name:e.name,idtAliases:e.idtAliases,position:o.Library,style:a};x(l)}}(e,t)},onMouseLeave:w},"".concat(e.name).concat(t))})}),(0,a.Y)(Ao,{})]})},Mo=function(e){var t=e.onItemClick,n=e.libraryName,r=e.duplicatePreset,o=e.editPreset,l=Tr(It),d=Tr(An),s=Tr(je),u=n===$e,p=u?{monomers:Ot(l),presets:yn(d)}:Mt(l,n),m=Dt(u?p.monomers:p),f=u?function(e){var t=[];for(var n in h.uP8){var r=kt(e,h.uP8[n]);t=[].concat((0,T.A)(t),(0,T.A)(r))}return t.forEach(function(e){e.groupItems=e.groupItems.filter(function(e){return e.favorite})}),t.filter(function(e){return e.groupItems.length})}(l):kt(l,ge.PEPTIDES),v=(0,c.useState)(""),g=(0,i.A)(v,2),b=g[0],y=g[1];return(0,c.useEffect)(function(){"monomer"!==s&&y("")},[s]),(0,a.FD)(ho,{children:[u&&m.length>0&&(0,a.Y)("div",{children:"Monomers"}),m.map(function(e,r,o){var i=e.groupItems,l=e.groupTitle;return(0,a.Y)(uo,{title:1===o.length?void 0:l,items:i,libraryName:n,onItemClick:t,selectedMonomerUniqueKey:b},l)}),u&&p.presets.length>0&&(0,a.FD)(a.FK,{children:[(0,a.Y)("div",{children:"Presets"}),(0,a.Y)(Co,{duplicatePreset:r,editPreset:o,presets:p.presets})]}),(0,a.Y)(a.FK,{children:("PEPTIDE"===n||u)&&f.map(function(e){return(0,a.Y)(uo,{title:e.groupTitle,items:e.groupItems,libraryName:n,onItemClick:t,selectedMonomerUniqueKey:b},e.groupTitle)})})]})};var ko=(0,L.A)("div",{target:"e1fsx6x2"})({name:"kxxltl",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:8px;background-color:#f7f9fa;border-radius:0 0 4px 4px"}),Oo=(0,L.A)("span",{target:"e1fsx6x1"})("font-size:",function(e){return e.theme.ketcher.font.size.medium},";overflow:hidden;text-overflow:ellipsis;color:",function(e){return e.theme.ketcher.color.text.primary},";"),Io=(0,L.A)("div",{target:"e1fsx6x0"})({name:"1x17g94",styles:"display:flex;align-items:center;width:100%"}),Do=(0,c.memo)(function(e){var t=e.name,n=e.fullName;return t||n?(0,a.Y)(ko,{children:(0,a.Y)(Io,{children:(0,a.Y)(Oo,{children:null!==t&&void 0!==t?t:n})})}):null});var So=(0,L.A)("div",{target:"e1ie5fzr8"})(function(e){var t=e.selected,n=e.isEditMode,r=e.theme,o="transparent";return t?o=r.ketcher.color.button.primary.active:n&&(o=r.ketcher.color.background.primary),{height:"40px",position:"relative",marginLeft:n?"30px":"28.5px",display:"flex",alignItems:"center",border:n?"none":"1.5px solid ".concat(r.ketcher.outline.color),backgroundColor:o,borderRadius:r.ketcher.border.radius.regular,boxShadow:n?r.ketcher.shadow.regular:"none",padding:"5px 10px",color:t?"white":"black",gap:"8px",cursor:"pointer",outlineOffset:"1px",boxSizing:"border-box",":hover":{outline:r.ketcher.outline.small},":not(:last-child)":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:r.ketcher.outline.medium,borderBottom:r.ketcher.outline.medium,height:"2px",width:"17px"}},":last-child":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:r.ketcher.outline.medium,borderBottom:r.ketcher.outline.medium,borderRadius:"0 0 0 4px",height:"130px",width:"17px"}}}},""),Yo=(0,L.A)("div",{target:"e1ie5fzr7"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),Eo=(0,L.A)("span",{target:"e1ie5fzr6"})("font-size:",function(e){return e.theme.ketcher.font.size.small},";color:",function(e){var t=e.selected,n=e.theme;return t?n.ketcher.color.background.primary:n.ketcher.color.text.light},";opacity:",function(e){return e.selected?.4:1},";"),Po=(0,L.A)("span",{target:"e1ie5fzr5"})("margin-top:1px;font-size:",function(e){return e.theme.ketcher.font.size.medium},";color:",function(e){var t=e.selected,n=e.empty,r=e.theme;return t?r.ketcher.color.button.text.primary:n?"#b4b9d6":r.ketcher.color.text.primary},";opacity:",function(e){var t=e.selected,n=e.empty;return t&&n?.4:1},";"),Lo=(0,L.A)("div",{target:"e1ie5fzr4"})({name:"wgokoh",styles:"position:relative;width:16px;height:16px;display:flex;align-items:center;justify-content:center"}),jo=(0,L.A)(m.In,{target:"e1ie5fzr3"})("fill:",function(e){var t=e.selected,n=e.empty,r=e.theme;return n?"none":t?r.ketcher.color.background.primary:r.ketcher.color.icon.grey},";color:",function(e){var t=e.selected,n=e.theme;return t?n.ketcher.color.background.primary:n.ketcher.color.icon.grey},";"),No=(0,L.A)("div",{target:"e1ie5fzr2"})("position:relative;width:60px;display:flex;flex-direction:column;gap:8px;padding:4px;border-radius:4px;box-shadow:0 1px 2px 0 rgba(180, 185, 214, 0.6);cursor:pointer;background-color:",function(e){var t=e.selected,n=e.theme;return t?n.ketcher.color.button.primary.active:n.ketcher.color.background.primary},";&:hover{outline:",function(e){return e.theme.ketcher.outline.selected.small},";}"),Fo=(0,L.A)("div",{target:"e1ie5fzr1"})("position:absolute;top:-35%;left:50%;height:15px;width:2px;background-color:",function(e){return e.theme.ketcher.outline.color},";"),To=(0,L.A)("p",{target:"e1ie5fzr0"})("margin:0;font-size:",function(e){return e.theme.ketcher.font.size.small},";font-weight:",function(e){return e.theme.ketcher.font.weight.regular},";color:",function(e){var t=e.selected,n=e.empty,r=e.theme;return t?r.ketcher.color.button.text.primary:n?"#b4b9d6":r.ketcher.color.text.primary},";opacity:",function(e){var t=e.selected,n=e.empty;return t&&n?.4:1},";"),Bo=(0,j.A)((0,j.A)((0,j.A)({},ge.SUGARS,"Sugar"),ge.BASES,"Base"),ge.PHOSPHATES,"Phosphate"),zo=(0,c.memo)(function(e){var t=e.selected,n=e.empty,r=e.name;return(0,a.Y)(Lo,{children:(0,a.Y)(jo,{selected:t,empty:n,name:r})})}),Ro=function(e){var t=e.groupName,n=e.iconName,r=e.monomerName,o=e.selected,i=e.onClick,l=e.testid,c=Tr(hn),d=!r;return(0,a.FD)(No,{selected:o,onClick:i,isEditMode:c,"data-testid":l,children:[(0,a.Y)(Fo,{}),(0,a.Y)(zo,{name:n,selected:o,empty:d}),(0,a.Y)(To,{selected:o,empty:d,children:null!==r&&void 0!==r?r:Bo[t]})]})},Ho=function(e){var t=e.groupName,n=e.iconName,r=e.monomerName,o=e.selected,i=e.onClick,l=e.testid,c=Tr(hn),d=!r;return(0,a.FD)(So,{selected:o,onClick:i,isEditMode:c,"data-testid":l,children:[(0,a.Y)(zo,{name:n,selected:o,empty:d}),(0,a.FD)(Yo,{children:[(0,a.Y)(Eo,{selected:o,children:Bo[t]}),(0,a.Y)(Po,{empty:d,selected:o,children:null!==r&&void 0!==r?r:"Not selected"})]})]})};function _o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Vo=function(e){return _r()?(0,a.Y)(Ro,qo({},e)):(0,a.Y)(Ho,qo({},e))};var Wo=(0,L.A)("div",{target:"e18wzlbg8"})(function(e){return{display:"flex",flexDirection:"column",padding:"10px",backgroundColor:"#F7F9FA",borderRadius:"0 0 4px 4px","&.rna-editor-expanded--sequence-edit-mode":{padding:"8px",paddingTop:"10px",border:"2px ".concat(e.theme.ketcher.color.editMode.sequenceInRNABuilder," solid"),borderTop:"none"}}},""),Uo=(0,L.A)("input",{target:"e18wzlbg7"})("width:100%;padding:6px;border:none;border-radius:4px;box-shadow:0 1px 2px 0 rgba(180, 185, 214, 0.6);&:hover,&:focus{outline:",function(e){return e.theme.ketcher.outline.selected.small},";}"),Ko=(0,L.A)("div",{target:"e18wzlbg6"})("width:100%;display:flex;flex-direction:",function(e){return e.compact?"row":"column"},";justify-content:",function(e){return e.compact?"space-between":"flex-start"},";gap:8px;margin-top:16px;"),Qo=(0,L.A)("div",{target:"e18wzlbg5"})({name:"zmhcg5",styles:"margin-top:16px;display:flex;justify-content:space-evenly;align-items:center;gap:8px"}),Go=(0,L.A)(m.$n,{target:"e18wzlbg4"})(function(e){return{width:"100%",whiteSpace:"nowrap",fontSize:e.theme.ketcher.font.size.regular,backgroundColor:e.primary?e.theme.ketcher.color.button.primary.active:void 0,color:e.primary&&!e.disabled?e.theme.ketcher.color.button.text.primary:e.theme.ketcher.color.text.light,outline:e.primary&&!e.disabled?e.theme.ketcher.outline.selected.small:e.theme.ketcher.outline.grey.small}},""),Zo=(0,L.A)("div",{target:"e18wzlbg3"})(function(e){return{position:"relative",borderRadius:e.theme.ketcher.border.radius.regular,backgroundColor:e.theme.ketcher.color.background.primary,boxShadow:e.theme.ketcher.shadow.regular,cursor:"pointer",overflow:"hidden",padding:"0 6px 6px 6px",display:"flex",alignItems:"flex-end",height:"48px",outline:e.selected?e.theme.ketcher.outline.selected.medium:"none",":hover":{outline:e.selected?void 0:e.theme.ketcher.outline.small}}},""),Xo=(0,L.A)("span",{target:"e18wzlbg2"})(function(e){return{position:"absolute",top:"0",left:"0",width:"100%",height:"8px",backgroundColor:e.selected?e.theme.ketcher.outline.selected.color:e.theme.ketcher.outline.color}},""),Jo=(0,L.A)(m.pd,{target:"e18wzlbg1"})({name:"1jdipvd",styles:"width:100%;&:disabled{background:none;outline:none;color:inherit;}"}),$o=(0,L.A)("div",{target:"e18wzlbg0"})({name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"});function ei(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ti(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ti(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ni=function(e){return 0===e.size?"":1===e.size?(0,T.A)(e)[0]:"[multiple]"},ri=function(e){if(null!==e&&void 0!==e&&e.length){var t,n={sugarLabel:new Set,baseLabel:new Set,phosphateLabel:new Set},r=ei(e);try{for(r.s();!(t=r.n()).done;)for(var o=t.value,i=0,a=["sugarLabel","baseLabel","phosphateLabel"];i<a.length;i++){var l=a[i];(null!==o&&void 0!==o&&o[l]||(null===o||void 0===o||!o[l])&&o.type===h.WDE.Nucleoside&&!o.isNucleosideConnectedAndSelectedWithPhosphate)&&n[l].add(null===o||void 0===o?void 0:o[l])}}catch(c){r.e(c)}finally{r.f()}return{Sugars:ni(n.sugarLabel),Bases:ni(n.baseLabel),Phosphates:ni(n.phosphateLabel)}}},oi=function(e){e(En(null)),e(Nn(!1))},ii=function(e){oi(e)},ai=function(e,t){oi(e),e(kn([])),null===t||void 0===t||t.events.turnOffSequenceEditInRNABuilderMode.dispatch(),(null===t||void 0===t?void 0:t.mode)instanceof h.zuW&&t.mode.turnOffEditMode()},li=function(e){return e.filter(function(e){return e.type?e.type===h.WDE.Nucleotide||e.type===h.WDE.Nucleoside:!!e.node&&(e.node instanceof h.NxW||e.node instanceof h.yYC)}).length};function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var si=function(e){var t=e.isEditMode,n=e.onDuplicate,r=[{groupName:ge.SUGARS,iconName:"sugar",testId:"rna-builder-slot--sugar"},{groupName:ge.BASES,iconName:"base",testId:"rna-builder-slot--base"},{groupName:ge.PHOSPHATES,iconName:"phosphate",testId:"rna-builder-slot--phosphate"}],o=(0,l.wA)(),d=Tr(an),s=Tr(gn),u=Tr(rn),p=Tr(Fe),m=Tr(wn),f=Tr(un),v=(0,c.useState)(d),g=(0,i.A)(v,2),b=g[0],y=g[1],x=Tr(ln),w=Tr(cn),A=Tr(Te),C=(0,c.useState)(!1),M=(0,i.A)(C,2),k=M[0],O=M[1],I=(0,c.useState)(ri(x)),D=(0,i.A)(I,2),S=D[0],Y=D[1],E="sequence-layout-mode"===Br();(0,c.useEffect)(function(){y(d)},[d]),(0,c.useEffect)(function(){x&&(1===li(x)&&o(On(function(e){var t,n=ri(e);return"".concat(null===n||void 0===n?void 0:n.Sugars,"(").concat(null===n||void 0===n?void 0:n.Bases,")").concat(null!==(t=null===n||void 0===n?void 0:n.Phosphates)&&void 0!==t?t:"")}(x))),Y(ri(x)))},[o,x]),(0,c.useEffect)(function(){if(u!==Qt.Presets&&t)if(A&&f){var e=tn[f.groupName],n="".concat(e,"Label"),r=x.map(function(e){return e.isNucleosideConnectedAndSelectedWithPhosphate&&"phosphateLabel"===n||e.type===h.WDE.Phosphate&&("sugarLabel"===n||"baseLabel"===n)?e:di(di({},e),{},(0,j.A)((0,j.A)({},n,f.groupItem.label),"rnaBaseMonomerItem","Bases"===f.groupName?f.groupItem:e.rnaBaseMonomerItem))});O(!0),o(kn(r))}else{var i=function(){if(f){var e=tn[f.groupName],t=di(di({},b),{},(0,j.A)({},e,f.groupItem));return y(t),t}return b}(),a=null===b||void 0===b?void 0:b.name;i.editedName||(a=mn(i)),y(di(di({},i),{},{name:a}))}},[null===f||void 0===f?void 0:f.groupItem,A]);var P,L=function(e){return function(){var n=sn(b,e);n&&!E&&(null===p||void 0===p||p.events.selectMonomer.dispatch(n)),b[tn[e]]&&o(Sn(mt(b[tn[e]]))),o(Dn(e)),o(Yn({rnaPreset:b,isEditMode:t}));var r="";if(A&&x.length>0){var i=x[0].baseLabel;if(i&&x.every(function(e){return e.baseLabel===i})){var a=x[0].rnaBaseMonomerItem;a&&(r=mt(a),o(Sn(r)))}}setTimeout(function(){return function(e,t){if(e===Qt.Presets)return fi(null===b||void 0===b?void 0:b.name),void(b&&(null===p||void 0===p||p.events.selectPreset.dispatch(b)));var n=b[tn[e]];n?vi(mt(n)):t&&vi(t)}(e,r)},100)}},N=function(e){if(t){var n=e.target.value;y(di(di({},b),{},{name:n.trim(),editedName:!0}))}},F=function(){li(x)>1?o(jt("updateSequenceInRNABuilder")):(null===p||void 0===p||p.events.modifySequenceInRnaBuilder.dispatch(x),ai(o,p))},T=function(){if(null!==b&&void 0!==b&&b.name){var e=m.find(function(e){return e.name===b.name});e&&d.nameInList!==e.name?o(Fn(b.name)):(o(Pn(b)),o(Mn(b)),E||null===p||void 0===p||p.events.selectPreset.dispatch(b),setTimeout(function(){fi(b.name)},0),ii(o))}},B=function(){A?ai(o,p):(y(d),ii(o))},z=function(e){var t,n,r;return f&&f.groupName===e?f.groupItem.label:(null!==(t=null===(n=sn(b,e))||void 0===n?void 0:n.label)&&void 0!==t?t:null===(r=sn(b,e))||void 0===r?void 0:r.props.MonomerName)||void 0},R=function(e){return S?S[e]:""};(0,c.useEffect)(function(){var e=function(e){"Escape"===e.key?(B(),e.preventDefault(),e.stopPropagation()):"Enter"===e.key&&(A?F():null===p||void 0===p||p.events.startNewSequence.dispatch({}),e.preventDefault(),e.stopPropagation())};return null===p||void 0===p||p.events.keyDown.add(e),function(){null===p||void 0===p||p.events.keyDown.remove(e)}},[p,x]),P=s&&!A?(0,a.Y)(Go,{disabled:!pn(b),primary:!0,"data-testid":"add-to-presets-btn",onClick:T,children:"Add to Presets"}):t?(0,a.Y)(Go,{primary:!0,disabled:!!A&&!k,"data-testid":"save-btn",onClick:A?F:T,children:A?"Update":"Save"}):(0,a.Y)(Go,{"data-testid":"edit-btn",onClick:function(){o(Nn(!0))},disabled:d.default,children:"Edit"});var H=_r();return(0,a.FD)(Wo,{"data-testid":"rna-editor-expanded",className:(0,W.A)(A&&"rna-editor-expanded--sequence-edit-mode"),children:[H?(0,a.Y)(Uo,{value:A?w:null===b||void 0===b?void 0:b.name,placeholder:"Name your structure","data-testid":"name-your-structure-editbox",disabled:A,onChange:N}):(0,a.FD)(Zo,{selected:u===Qt.Presets,onClick:function(){return L(Qt.Presets)},children:[t?(0,a.Y)(Jo,{value:A?w:null===b||void 0===b?void 0:b.name,placeholder:"Name your structure","data-testid":"name-your-structure-editbox",disabled:A,onChange:N}):(0,a.Y)($o,{children:null===b||void 0===b?void 0:b.name}),(0,a.Y)(Xo,{selected:u===Qt.Presets})]}),(0,a.Y)(Ko,{compact:H,children:r.map(function(e){var t=e.groupName,n=e.iconName,r=e.testId;return(0,a.Y)(Vo,{selected:u===t,groupName:t,monomerName:A?R(t):z(t),iconName:n,testid:r,onClick:L(t)},t)})}),(0,a.FD)(Qo,{children:[t?(0,a.Y)(Go,{"data-testid":"cancel-btn",onClick:B,children:"Cancel"}):(0,a.Y)(Go,{"data-testid":"duplicate-btn",disabled:!pn(b),onClick:function(){return n(b)},children:"Duplicate and Edit"}),P]})]})};var ui=(0,L.A)("div",{target:"e1ms1w5g2"})({name:"1tk8yx0",styles:"padding:8px"}),pi=(0,L.A)("button",{target:"e1ms1w5g1"})("width:100%;display:flex;justify-content:space-between;align-items:center;padding:8px;background-color:",function(e){return e.theme.ketcher.color.background.primary},";font-weight:",function(e){return e.theme.ketcher.font.weight.regular},";font-size:",function(e){return e.theme.ketcher.font.size.regular},";border:none;border-radius:4px;text-transform:none;cursor:pointer;&.styled-header--sequence-edit-mode{background-color:",function(e){return e.theme.ketcher.color.editMode.sequenceInRNABuilder},";}&.styled-header--expanded,&.styled-header--active-preset{border-radius:4px 4px 0 0;}"),hi=(0,L.A)(m.In,{target:"e1ms1w5g0"})("height:16px;width:16px;transform:",function(e){return e.expanded?"rotate(180deg)":"none"},";"),mi=function(e){var t=document.body.querySelector(e);null===t||void 0===t||t.scrollIntoView()},fi=function(e){mi('[data-rna-preset-item-name="'.concat(e,'"]'))},vi=function(e){mi('[data-monomer-item-id="'.concat(e,'"]'))},gi=function(e){var t=e.duplicatePreset,n=Tr(an),r=Tr(hn),o=Tr(Te),l=mn(n),d=Fr(),s=(0,c.useState)(!1),u=(0,i.A)(s,2),p=u[0],h=u[1];(0,c.useEffect)(function(){n?(n.name||r)&&h(!0):(d(jn()),d(Dn(Qt.Presets)))},[n]),(0,c.useEffect)(function(){d(Yn({rnaPreset:n,isEditMode:r}))},[r]);return(0,a.FD)(ui,{"data-testid":"rna-editor",children:[(0,a.FD)(pi,{className:(0,W.A)(o&&"styled-header--sequence-edit-mode",p&&"styled-header--expanded",(null===n||void 0===n?void 0:n.name)&&"styled-header--active-preset"),onClick:function(){h(!p),null!==n&&void 0!==n&&n.nameInList||d(Nn(!0))},"data-testid":"rna-builder-expand-button",children:["RNA Builder",(0,a.Y)(hi,{expanded:p,name:"chevron"})]}),n&&(p?(0,a.Y)(si,{isEditMode:r,onDuplicate:t}):(0,a.Y)(Do,{name:n.name,fullName:l}))]})};var bi=(0,L.A)("div",{target:"e1ocltcl0"})({name:"16fpk5u",styles:"height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between"}),yi=function(e){var t=e.ketcher;return(0,d.AH)("scrollbar-width:thin;scrollbar-color:",t.color.scroll.regular," ",t.color.scroll.inactive,";&::-webkit-scrollbar{width:4px;height:4px;background-color:",t.color.scroll.inactive,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb{background-color:",t.color.scroll.regular,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb:active{background-color:",t.color.scroll.regular,";}","")},xi="Modal-module_expandButton__J1QYl";function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ci=(0,L.A)(g.A,{target:"e45wfhi5"})({name:"dzuq2w",styles:".MuiPaper-root{min-width:304px;}"}),Mi=(0,L.A)(b.A,{target:"e45wfhi4"})(function(e){var t=e.theme,n=e.hideborder;return{padding:"2px 4px 2px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",fontFamily:"".concat(t.ketcher.font.family.inter),fontSize:"".concat(t.ketcher.font.size.medium),fontWeight:500,textTransform:"capitalize",borderBottom:n?"none":"1px solid rgba(202, 211, 221, 1)"}},""),ki=(0,L.A)("div",{target:"e45wfhi3"})({name:"10by1a4",styles:"margin-right:10px;font-size:14px"}),Oi=(0,L.A)(m.In,{target:"e45wfhi2"})({name:"4jxctt",styles:"width:16px;height:16px;color:rgba(51, 51, 51, 1)"}),Ii=(0,L.A)(y.A,{target:"e45wfhi1"})("padding:0;font-size:",function(e){return e.theme.ketcher.font.size.medium},";line-height:17px;color:#000000;",function(e){var t=e.theme;return yi(t)},";"),Di=(0,L.A)(x.A,{target:"e45wfhi0"})("height:52px;margin:0;padding:0 12px;border-top:",function(e){var t=e.theme;return"true"===e.withborder?t.ketcher.border.small:"none"},";justify-content:flex-end;.MuiButtonBase-root{border-radius:4px;font-size:",function(e){return e.theme.ketcher.font.size.regular},";}"),Si=function(e){var t=e.children,n=e.title,r=e.isOpen,o=e.showCloseButton,i=void 0===o||o,l=e.showExpandButton,d=void 0!==l&&l,u=e.onClose,p=e.className,h=e.modalWidth,f=e.expanded,v=void 0!==f&&f,g=e.setExpanded,b=void 0===g?Yr:g,y=e.testId,x=e.hideHeaderBorder,A=(0,s.u)(),C=(0,c.useMemo)(function(){return Ai(Ai({},y?{testid:y}:{}),{},{"data-testid":y,style:Ai({background:A.ketcher.color.background.primary,borderRadius:"8px",color:A.ketcher.color.text.primary},d&&{margin:"auto",width:v?"100%":h,height:v?"100%":void 0,maxWidth:"calc(min(1280px, 100%))",maxHeight:"calc(min(980px, 100%))"})})},[y,A.ketcher.color.text.primary,A.ketcher.color.background.canvas,v]),M=(0,c.useMemo)(function(){return{style:{background:A.ketcher.color.background.overlay,opacity:.4}}},[A.ketcher.color.background.overlay]),k={Content:null,Footer:null};return c.Children.forEach(t,function(e){e.type===Ii?k.Content=e:e.type===Di&&(k.Footer=e)}),(0,a.FD)(Ci,{BackdropProps:M,PaperProps:C,open:r,onClose:u,container:document.querySelector(m.tS),disableEscapeKeyDown:!i,className:p,sx:{padding:"24px"},children:[n||i||d?(0,a.FD)(Mi,{hideborder:x,children:[(0,a.Y)(ki,{children:n}),(0,a.FD)("span",{children:[d&&(0,a.Y)(w.A,{title:v?"Minimize window":"Expand window","data-testid":"expand-window-button",className:xi,onClick:function(){b(!v)},children:(0,a.Y)(Oi,{name:v?"minimize-expansion":"expand"})}),i&&(0,a.Y)(w.A,{title:"Close window",onClick:u,"data-testid":"close-window-button",children:(0,a.Y)(Oi,{name:"close"})})]})]}):"",k.Content,k.Footer]})};Si.Content=Ii,Si.Footer=Di;var Yi=(0,L.A)("div",{target:"e117eqk610"})({name:"uawiic",styles:"display:flex;flex-direction:column;justify-content:flex-start;overflow:hidden;height:100%"}),Ei=(0,L.A)(m.nD,{target:"e117eqk69"})({name:"u6kpdv",styles:"min-height:32px"}),Pi=(0,L.A)("div",{target:"e117eqk68"})({name:"vz8pb8",styles:"flex-grow:2;min-height:32px"}),Li=(0,L.A)("div",{target:"e117eqk67"})("position:relative;width:100%;display:flex;flex-direction:column;gap:8px;justify-content:start;padding:",function(e){return e.compact?"4px":"8px"},";"),ji=(0,L.A)("div",{target:"e117eqk66"})({name:"6imefc",styles:"flex-grow:1;min-height:0;background-color:#f7f9fa;border-radius:4px;margin:4px 8px;padding:4px;&.first-tab{border-radius:0 4px 4px 4px;}&.last-tab{border-radius:4px 0 4px 4px;}"}),Ni=(0,L.A)("div",{target:"e117eqk65"})("height:100%;background-color:",function(e){return e.theme.ketcher.color.tab.content},";border-radius:2px;overflow:auto;"),Fi=(0,L.A)(m.$n,{target:"e117eqk64"})("background-color:",function(e){return e.theme.ketcher.color.button.transparent.active},";color:",function(e){return e.theme.ketcher.color.text.light},";border-color:",function(e){return e.theme.ketcher.color.text.light},";"),Ti=(0,L.A)("div",{target:"e117eqk63"})({name:"1q5khk2",styles:"width:100%;height:100%;background-color:#eff2f594;position:absolute;top:0;left:0"}),Bi=(0,L.A)("div",{target:"e117eqk62"})({name:"bimmx8",styles:"display:flex;justify-content:space-between;gap:8px;padding:6px 8px 0"}),zi=(0,L.A)("div",{target:"e117eqk61"})({name:"qnk899",styles:"position:relative;display:flex;align-items:center;&.rna-tab--selected{& button{border-radius:4px 4px 0 0;background-color:#f7f9fa;}&::after{content:'';position:absolute;bottom:-4px;left:0;right:0;height:8px;background-color:#f7f9fa;}}"}),Ri=(0,L.A)(v.A,{target:"e117eqk60"})("height:24px;min-height:24px;min-width:24px;",function(e){return e.selected?"min-width: 104px;":""}," display:flex;flex-direction:row;gap:4px;align-items:center;justify-content:center;padding:4px;",function(e){return e.selected?"margin-top: -8px;":""}," font-weight:400;font-size:10px;border-radius:4px;background-color:white;opacity:",function(e){return e.selected?1:.6},";text-transform:none;&:hover{background-color:#f3f8f9;}>svg{height:16px;width:16px;color:#b4b9d6;&.MuiTab-iconWrapper{margin:0;}}");function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var qi=function(e){var t=Tr(It),n=Tr(An),r=Mt(t,e),o=Dt(r),i=function(e){return e.filter(function(e){var t,n;return!e.isAmbiguous&&((null===(t=e.props)||void 0===t?void 0:t.MonomerClass)===h.IPc.RNA||(null===(n=e.props)||void 0===n?void 0:n.MonomerClass)===h.IPc.DNA)})}(t),a=Dt(i);return(0,c.useMemo)(function(){return[{groupName:Qt.Presets,iconName:"preset",groups:[{groupItems:n}]},{groupName:ge.SUGARS,iconName:"sugar",groups:o.map(function(e){return _i(_i({},e),{},{groupItems:e.groupItems.filter(function(e){var t;return(null===(t=e.props)||void 0===t?void 0:t.MonomerClass)===h.IPc.Sugar})})}).filter(function(e){return e.groupItems.length})},{groupName:ge.BASES,iconName:"base",groups:o.map(function(e){return _i(_i({},e),{},{groupItems:e.groupItems.filter(function(e){var t;return(null===(t=e.props)||void 0===t?void 0:t.MonomerClass)===h.IPc.Base})})}).filter(function(e){return e.groupItems.length})},{groupName:ge.PHOSPHATES,iconName:"phosphate",groups:o.map(function(e){return _i(_i({},e),{},{groupItems:e.groupItems.filter(function(e){var t;return(null===(t=e.props)||void 0===t?void 0:t.MonomerClass)===h.IPc.Phosphate})})}).filter(function(e){return e.groupItems.length})},{groupName:ge.NUCLEOTIDES,iconName:"nucleotide",groups:a}]},[o,n,a])},Vi=(0,c.memo)(function(e){var t=e.activeRnaBuilderItem,n=e.groupsData,r=e.onNewPresetClick,o=e.onSelectItem,i=e.duplicatePreset,c=e.editPreset,d=e.libraryName,s=(0,l.wA)(),u=Tr(An),p=Tr(It),h=Tr(hn),f=Tr(gn),v=Tr(xn);return(0,a.FD)(a.FK,{children:[(0,a.Y)(Bi,{children:n.map(function(e){var n=e.groupName,r=e.groups,o=e.iconName,i=n===t,l=kt(p,n),c=[].concat((0,T.A)(r),(0,T.A)(l)).reduce(function(e,t){return e+(t.groupItems.length||0)},0),d=i?"".concat(n," (").concat(c,")"):null;return(0,a.Y)(zi,{className:(0,W.A)(i&&"rna-tab--selected"),children:(0,a.Y)(Ri,{label:d,title:n,selected:i,icon:(0,a.Y)(m.In,{name:o}),onClick:function(){return s(Dn(n))},"data-testid":"summary-".concat(n)})},n)})}),n.map(function(e){var n=e.groupName,l=e.groups;if(n!==t)return null;var s=kt(p,n),m=n===Qt.Presets?(0,a.FD)(Li,{compact:!0,children:[(0,a.Y)(Fi,{onClick:r,"data-testid":"new-preset-button",children:"New Preset"}),(0,a.Y)(Co,{duplicatePreset:i,editPreset:c,presets:u}),h&&!f&&(0,a.Y)(Ti,{})]}):(0,a.Y)(Li,{compact:!0,children:(0,a.FD)(a.FK,{children:[l.map(function(e){var t=e.groupItems,r=e.groupTitle;return(0,a.Y)(uo,{title:l.length>1?r:void 0,groupName:n,items:t,selectedMonomerUniqueKey:v,onItemClick:function(e){return o(e,n)}},r)}),s.map(function(e){var t=e.groupTitle,r=e.groupItems;return(0,a.Y)(uo,{title:t,items:r,libraryName:d,selectedMonomerUniqueKey:v,onItemClick:function(e){return o(e,n)}},t)})]})}),g=t===Qt.Presets,b=t===ge.NUCLEOTIDES;return(0,a.Y)(ji,{className:(0,W.A)(g&&"first-tab",b&&"last-tab"),children:(0,a.Y)(Ni,{children:m})},n)})]})}),Wi=function(e){var t=e.groupName,n=e.quantity,r=e.expanded,o=e.iconName;return(0,a.FD)(fo,{"data-testid":"summary-".concat(t),children:[(0,a.Y)(go,{name:o}),(0,a.FD)(vo,{children:[t," (",n,")"]}),(0,a.Y)(go,{name:"chevron",expanded:r})]})},Ui=(0,c.memo)(function(e){var t=e.activeRnaBuilderItem,n=e.groupsData,r=e.newPreset,o=e.onNewPresetClick,d=e.onSelectItem,s=e.duplicatePreset,u=e.editPreset,p=e.libraryName,h=(0,l.wA)(),m=Tr(An),f=Tr(It),v=Tr(hn),g=Tr(gn),b=Tr(xn),y=(0,c.useState)(t),x=(0,i.A)(y,2),w=x[0],A=x[1],C=function(e){w===e?A(null):(A(e),h(Yn({rnaPreset:r,isEditMode:v})))};return(0,c.useEffect)(function(){A(t)},[t]),(0,a.Y)(a.FK,{children:n.map(function(e){var t=w===e.groupName,n=kt(f,e.groupName),r=[].concat((0,T.A)(e.groups),(0,T.A)(n)).reduce(function(e,t){return e+(t.groupItems.length||0)},0),i=(0,a.Y)(Wi,{iconName:e.iconName,groupName:e.groupName,quantity:r,expanded:t}),l=e.groupName===Qt.Presets?(0,a.FD)(Li,{children:[(0,a.Y)(Fi,{onClick:o,"data-testid":"new-preset-button",children:"New Preset"}),(0,a.Y)(Co,{duplicatePreset:s,editPreset:u,presets:m}),v&&!g&&(0,a.Y)(Ti,{})]}):(0,a.Y)(Li,{children:(0,a.FD)(a.FK,{children:[e.groups.map(function(t){var n=t.groupItems,r=t.groupTitle,o=[ge.BASES,ge.NUCLEOTIDES,ge.PEPTIDES].includes(e.groupName);return(0,a.Y)(uo,{title:o?r:void 0,groupName:e.groupName,items:n,selectedMonomerUniqueKey:b,onItemClick:function(t){return d(t,e.groupName)}},r)}),n.map(function(t){return(0,a.Y)(uo,{title:t.groupTitle,items:t.groupItems,libraryName:p,selectedMonomerUniqueKey:b,onItemClick:function(t){return d(t,e.groupName)}},t.groupTitle)})]})});return e.groupName===Qt.Presets&&t?(0,a.Y)(Pi,{children:(0,a.Y)(Ei,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(e.groupName),summary:i,details:l,expanded:t,onSummaryClick:function(){return C(e.groupName)}})},e.groupName):(0,a.Y)(Ei,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(e.groupName),summary:i,details:l,expanded:t,onSummaryClick:function(){return C(e.groupName)}},e.groupName)})})});function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Gi=function(e){var t=e.view,n=e.libraryName,r=e.duplicatePreset,o=e.editPreset,d=(0,l.wA)(),s=Tr(rn),u=Tr(an),p=Tr(hn),m=Tr(Fe),f=Tr(Te),v=(0,c.useState)(u),g=(0,i.A)(v,2),b=g[0],y=g[1];(0,c.useEffect)(function(){d(Dn(p&&u?s:Qt.Presets))},[p]);var x=qi(n),w=(0,c.useCallback)(function(){d(jn()),d(Dn(Qt.Presets)),d(Nn(!0))},[d]),A=(0,c.useCallback)(function(e,t){var n;if(p&&d(Sn(mt(e))),f||p||null===m||void 0===m||m.events.selectMonomer.dispatch(e),p){var r=(0,h.eoH)(e)?null===(n=e.monomers[0].monomerItem.props.MonomerClass)||void 0===n?void 0:n.toLowerCase():e.props.MonomerClass.toLowerCase(),o=Qi(Qi({},b),{},(0,j.A)({},r,e));y(o),d(En({groupName:t,groupItem:e})),d(Dn(t))}},[d,m,p,f,b]);return(0,a.Y)(Yi,{"data-testid":"rna-accordion",children:"tabs"===t?(0,a.Y)(Vi,{activeRnaBuilderItem:s,groupsData:x,onNewPresetClick:w,onSelectItem:A,libraryName:n,editPreset:o,duplicatePreset:r}):(0,a.Y)(Ui,{activeRnaBuilderItem:s,groupsData:x,newPreset:b,onNewPresetClick:w,onSelectItem:A,libraryName:n,editPreset:o,duplicatePreset:r})})},Zi=function(e){var t=e.libraryName,n=e.duplicatePreset,r=e.editPreset,o=Fr(),i=Tr(fn),l=Tr(vn),c=_r(),d=function(){i.length>0&&o(Fn("")),l.length>0&&o(Tn(""))};return(0,a.FD)(bi,{children:[(0,a.Y)(gi,{duplicatePreset:n}),(0,a.Y)(Gi,{libraryName:t,duplicatePreset:n,editPreset:r,view:c?"tabs":"accordion"}),(0,a.FD)(Si,{isOpen:!!i||!!l,title:"Error Message",onClose:d,children:[(0,a.Y)(Si.Content,{children:(0,a.FD)("div",{style:{padding:"12px"},children:[i&&'Preset with name "'.concat(i,'" already exists. Please choose another name.'),l&&'Preset with name "'.concat(l,"\" can't be used. Because it is impossible to establish bonds between monomers. Edit it's structure or choose another one.")]})}),(0,a.Y)(Si.Footer,{children:(0,a.Y)(Fi,{onClick:d,children:"Close"})})]})]})};function Xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $i="_Copy",ea=function(e){var t=e.toggleLibraryVisibility,n=(0,c.useRef)([]),r=Fr(),o=Tr(St);(0,c.useEffect)(function(){r(At(""))},[r]),Tr(wn,function(e){return n.current=e,!0});var i=(0,c.useCallback)(function(e){r(At(e.target.value))},[r]),l=(0,c.useCallback)(function(e){var t,o="".concat(null===e||void 0===e?void 0:e.name).concat($i);do{t=n.current.find(function(e){return e.name===o}),t&&(o+=$i)}while(t);if(t)r(Fn(o));else{var i=t?"".concat(o).concat($i):o,a=Ji(Ji({},e),{},{name:i,nameInList:i,default:!1,favorite:!1});r(Mn(a)),r(Nn(!0)),fi(null===e||void 0===e?void 0:e.name)}},[r]),d=(0,c.useCallback)(function(e){r(Mn(e)),r(Nn(!0))},[r]),s=(0,c.useMemo)(function(){return function(e,t){return[{caption:"\u2605",tooltip:"Favorites",component:Mo,testId:"FAVORITES-TAB",props:{libraryName:$e,duplicatePreset:e,editPreset:t}},{caption:"Peptides",component:Mo,testId:"PEPTIDES-TAB",props:{libraryName:et}},{caption:"RNA",testId:"RNA-TAB",component:Zi,props:{libraryName:nt,duplicatePreset:e,editPreset:t}},{caption:"CHEM",component:Mo,testId:"CHEM-TAB",props:{libraryName:tt}}]}(l,d)},[l,d]),u=(0,c.useCallback)(function(e,t){r(Ct(t))},[r]);return(0,a.FD)(Zn,{"data-testid":"monomer-library",children:[(0,a.FD)(Xn,{children:[(0,a.FD)(Jn,{children:[(0,a.Y)(er,{name:"search"}),(0,a.Y)(tr,{type:"search","data-testid":"monomer-library-input",onChange:i,placeholder:"Search by name..."})]}),(0,a.Y)($n,{title:"Hide library",onClick:t,"data-testid":"hide-monomer-library",children:(0,a.Y)(m.In,{name:"arrows-right"})})]}),(0,a.Y)(Sr,{tabs:s,selectedTabIndex:o,onChange:u})]})},ta=(0,L.A)("div",{target:"emj253a0"})(function(e){var t=e.theme;return{margin:0,fontSize:t.ketcher.font.size.regular,position:"absolute",top:"12px",cursor:"pointer",visibility:"visible",opacity:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",lineHeight:1,userSelect:"none",backgroundColor:t.ketcher.color.button.primary.active,color:t.ketcher.color.button.text.primary,right:"12px",padding:"10px 8px",borderRadius:"4px","& > span":{display:"flex",justifyContent:"center",alignItems:"center","&.icon":{marginRight:"2px"}}}},""),na=function(e){var t=e.onClick;return(0,a.FD)(ta,{onClick:t,"data-testid":"show-monomer-library",children:[(0,a.Y)("span",{className:"icon",children:(0,a.Y)(m.In,{name:"arrows-left"})})," ","Show Library"]})},ra=(0,L.A)("div",{target:"e10ckbgw0"})("display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;width:40px;height:12px;margin-top:10px;& span{display:inline-block;width:8px;height:8px;border:2px solid ",function(e){return e.theme.ketcher.color.spinner},";border-radius:100%;box-sizing:border-box;&:nth-of-type(1){animation:bounce 1s ease-in-out infinite;}&:nth-of-type(2){animation:bounce 1s ease-in-out 0.33s infinite;}&:nth-of-type(3){animation:bounce 1s ease-in-out 0.66s infinite;}}@keyframes bounce{0%,75%,100%{-webkit-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);}25%{-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);-o-transform:translateY(-100%);transform:translateY(-100%);}}"),oa=function(){return(0,a.FD)(ra,{className:"loading-spinner","data-testid":"loading-spinner",children:[(0,a.Y)("span",{}),(0,a.Y)("span",{}),(0,a.Y)("span",{})]})};var ia=(0,L.A)("div",{target:"ep0evuw1"})({name:"1btsn9l",styles:"width:410px;min-height:23em;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center"}),aa=(0,L.A)("div",{target:"ep0evuw0"})({name:"vbftiw",styles:"display:flex;flex-direction:row;align-items:center;svg{margin-right:13px;}p{color:#585858;font-size:16px;line-height:19px;}"}),la=function(e){var t=e.fileName;return(0,a.FD)(ia,{children:[t&&(0,a.FD)(aa,{children:[(0,a.Y)(m.In,{name:"file-thumbnail"}),(0,a.Y)("p",{children:t})]}),(0,a.Y)(oa,{})]})},ca=["textLabel","iconName","disabled","disabledText"];function da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?da(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):da(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ua={width:"100%",height:"100%",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-between"},pa=(0,L.A)(m.In,{target:"erk2iw52"})("filter:",function(e){return e.disabled?"grayscale(1)":""},";opacity:",function(e){return e.disabled?"0.6":"1"},";"),ha={backgroundColor:"#F8FEFFFF"},ma=(0,L.A)("div",{target:"erk2iw51"})("display:flex;flex-direction:column;align-items:center;&>span{font-size:",function(e){return e.theme.ketcher.font.size.small},";color:",function(e){return e.theme.ketcher.color.text.primary},";opacity:50%;}&>svg{margin-bottom:8px;}"),fa=(0,L.A)("button",{target:"erk2iw50"})({name:"1tt0jw3",styles:"all:unset;width:100%;height:100%;display:flex;align-items:center;flex-direction:column;justify-content:space-between;cursor:pointer;&:disabled{cursor:default;}"}),va=function(e){var t=e.textLabel,n=e.iconName,r=e.disabled,o=e.disabledText,i=(0,G.A)(e,ca),l=(0,J.VB)(sa({multiple:!1,noClick:!0,disabled:r},i)),d=l.getRootProps,s=l.getInputProps,u=l.isDragActive,p=l.open,h=(0,c.useMemo)(function(){return sa(sa({},ua),u?ha:{})},[u]);return(0,a.FD)(fa,sa(sa({},d({style:h})),{},{role:void 0,onClick:p,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r||p())},tabIndex:r?-1:0,disabled:r,type:"button",children:[(0,a.Y)("input",sa({},s())),(0,a.Y)(pa,{name:n,disabled:r}),r?(0,a.Y)(wa,{children:o}):(0,a.FD)(a.FK,{children:[(0,a.Y)(ma,{children:t&&(0,a.Y)("span",{children:t})}),(0,a.Y)(xa,{children:"Open from file"})]})]}))};var ga="open-window-paste-icon",ba="open-window-upload-icon",ya="image-frame",xa=(0,L.A)("p",{target:"e1035cyz3"})("font-size:10px;text-transform:uppercase;color:",function(e){return e.theme.ketcher.color.text.light},";margin:0;text-align:center;line-height:12px;"),wa=(0,L.A)("p",{target:"e1035cyz2"})("font-size:10px;margin:0;text-align:center;color:",function(e){return e.theme.ketcher.color.text.primary},";opacity:50%;line-height:12px;"),Aa=(0,L.A)("div",{target:"e1035cyz1"})({name:"h9hj7s",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;margin-bottom:20px;&>*{margin-right:18px;}& :last-child{margin-right:0;}"}),Ca=(0,L.A)("div",{target:"e1035cyz0"})("width:128px;height:134px;box-shadow:0 4px 12px rgba(103, 104, 132, 0.18);padding:16px;border-radius:12px;flex:1;display:flex;flex-direction:column;justify-content:space-between;align-items:center;box-sizing:border-box;position:relative;cursor:pointer;&>p{margin-top:6px;text-align:center;}svg{fill:",function(e){return e.theme.ketcher.color.button.primary.active},";}"),Ma=function(e){var t=e.selectClipboard,n=e.fileLoadHandler,r=e.errorHandler;return(0,a.FD)(Aa,{children:[(0,a.FD)(Ca,{"data-testid":"paste-from-clipboard-button",onClick:t,children:[(0,a.Y)(m.In,{name:ga}),(0,a.Y)(xa,{children:"Paste from clipboard"})]}),(0,a.Y)(Ca,{"data-testid":"open-from-file-button",children:(0,a.Y)(va,{onDropAccepted:n,onDropRejected:function(e){return r("Unable to accept file(s). ".concat(e))},buttonLabel:"Open from file",textLabel:"or drag file here",iconName:ba})}),(0,a.Y)(Ca,{"data-testid":"open-from-image-button",children:(0,a.Y)(va,{accept:"image/*",onDropAccepted:n,onDropRejected:function(e){return r("Unable to accept file(s). ".concat(e))},buttonLabel:"Open from image",textLabel:"or drag file here",iconName:ya,disabled:!0,disabledText:"Image Recognition service is not available"})})]})},ka=(0,L.A)("textarea",{target:"e1q335jk0"})("min-width:430px;padding:12px;width:100%;height:100%;overflow:auto;white-space:pre-wrap;resize:none;box-sizing:border-box;outline:transparent;border:none;color:",function(e){return e.theme.ketcher.color.input.text.active},";font-size:",function(e){return e.theme.ketcher.font.size.regular},";background-color:",function(e){var t=e.theme;return e.readOnly?t.ketcher.color.input.background.disabled:t.ketcher.color.input.background.primary},";",function(e){var t=e.theme;return yi(t)},";"),Oa=function(e){var t=e.value,n=e.inputHandler,r=e.readonly,o=void 0!==r&&r,i=e.selectOnInit,l=void 0!==i&&i,d=e.className,s=e.testId,u=(0,c.useRef)(null);return(0,c.useEffect)(function(){var e;l&&(null===(e=u.current)||void 0===e||e.select())},[u,t,l]),(0,a.Y)(ka,{value:t,readOnly:o,onChange:n&&function(e){return n(e.target.value)},ref:u,className:d,"data-testid":s})};function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Sa=(0,L.A)(Oa,{target:"e17hogtk0"})({name:"17fmpnb",styles:"width:100%;height:320px"}),Ya=function(e){if(e.isAnalyzingFile)return(0,a.Y)(la,{fileName:e.fileName});switch(e.currentState){case e.states.openOptions:return(0,a.Y)(Ma,Da({},e));case e.states.textEditor:return(0,a.Y)(Sa,Da({testId:"open-structure-textarea"},e));default:return null}},Ea=["label","clickHandler","children","styleType"];function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ja={name:"zlt300",styles:"padding:5px 8px;border-radius:2px;text-transform:none;line-height:14px;font-size:12px;text-align:center;&.MuiButtonBase-root{width:unset;min-width:70px;}"},Na=(0,L.A)(X.A,{target:"ejign8b1"})(function(e){var t=e.theme;return{backgroundColor:t.ketcher.color.button.primary.active,border:"1px solid ".concat(t.ketcher.color.button.primary.active),color:"rgb(245, 245, 245)",fontWeight:t.ketcher.font.weight.regular,width:"62px",height:"24px","&:hover":{backgroundColor:t.ketcher.color.button.primary.hover},"&:disabled":{background:t.ketcher.color.button.primary.disabled,border:"1px solid transparent",opacity:.4}}},ja,""),Fa=(0,L.A)(X.A,{target:"ejign8b0"})(function(e){var t=e.theme;return{backgroundColor:"transparent",border:"1px solid ".concat(t.ketcher.color.button.secondary.active),color:t.ketcher.color.button.secondary.active,fontWeight:t.ketcher.font.weight.regular,width:"72px",height:"24px","&:hover":{border:"1px solid ".concat(t.ketcher.color.button.secondary.hover),color:t.ketcher.color.button.secondary.hover},"&:disabled":{border:"1px solid ".concat(t.ketcher.color.button.secondary.disabled),color:t.ketcher.color.button.secondary.disabled},"&:clicked":{border:"1px solid ".concat(t.ketcher.color.button.secondary.clicked),color:t.ketcher.color.button.secondary.clicked}}},ja,""),Ta=function(e){var t=e.label,n=e.clickHandler,r=e.children,o=e.styleType,i=(0,G.A)(e,Ea);return"secondary"===o?(0,a.Y)(Fa,La(La({onClick:n,title:i.title||t},i),{},{children:r||t})):(0,a.Y)(Na,La(La({onClick:n,title:i.title||t},i),{},{children:r||t}))};function Ba(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){var n=r.result;e.msClose&&e.msClose(),t(n)},r.onerror=function(e){n(new Error("Failed to read file: ".concat(e.type)))},r.readAsText(e,"UTF-8")})}var za=(0,L.A)("div",{target:"efvrr8x1"})("position:relative;padding:",function(e){return e.currentState===Cl.openOptions?"10px 12px":"0"},";");(0,L.A)(Ta,{target:"efvrr8x0"})({name:"1tx1l5v",styles:"margin-right:auto"}),(0,L.A)(m.In,{target:"e23iben1"})({name:"1ux2zfx",styles:"fill:#343434"});var Ra=(0,L.A)(m.In,{target:"e23iben0"})({name:"wpnrak",styles:"user-select:none;width:16px;height:1em;display:inline-block;flex-shrink:0;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;position:absolute;right:7px;top:calc(50% - 0.5em);pointer-events:none;fill:#5b6077"}),Ha=function(e){var t=e.className;return(0,a.Y)(Ra,{name:"chevron",className:t})};function _a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Va=(0,L.A)(A.A,{target:"e944g1i2"})({name:"1pt8ucq",styles:"width:100%;padding:0 8px;& label{font-size:12px;line-height:unset;}"}),Wa={name:"af34ib",styles:"background-color:white;border-bottom-left-radius:0;border-bottom-right-radius:0"},Ua=(0,L.A)(C.A,{target:"e944g1i1"})("height:24px;border:1px solid #e1e5ea;border-radius:4px;font-size:12px;background-color:white;",function(e){return e.open&&Wa}," & .MuiSelect-select{padding:0 24px 0 8px;height:100%;display:flex;align-items:center;}& span{",function(e){var t=e.theme;return"font-size: ".concat(t.ketcher.font.size.regular)},";}& .MuiOutlinedInput-notchedOutline{border:0;}"),Ka={backgroundColor:"white",border:"1px solid #5B6077",borderTopWidth:"0",borderRadius:"0px 0px 2px 2px",boxShadow:"0 6px 10px rgba(103, 104, 132, 0.15)"},Qa=(0,L.A)(M.A,{target:"e944g1i0"})("display:flex;flex-direction:row;justify-content:space-between;padding:0 8px;height:28px;font-size:12px;&.MuiButtonBase-root:hover{border-left:2px solid #167782;}& .MuiTypography-root{",function(e){var t=e.theme;return"font-size: ".concat(t.ketcher.font.size.regular)},";}"),Ga=function(e){var t=e.options,n=e.currentSelection,r=e.selectionHandler,o=e.className,l=e.label,d=e.testId,s=e.customStylesForExpanded,u=void 0===s?{}:s,p=e.disabled,h=void 0!==p&&p,m=(0,c.useState)(!1),f=(0,i.A)(m,2),v=f[0],g=f[1];return(0,a.FD)(Va,{className:o,children:[l&&(0,a.Y)("label",{htmlFor:"fileformat",children:"File format:"}),(0,a.Y)(Ua,{value:n,onChange:function(e){r(e.target.value)},open:v,onOpen:function(e){"keydown"!==e.type&&g(!0)},onClose:function(){g(!1)},renderValue:function(e){var n=t.filter(function(t){return t.id===e})[0];return(0,a.Y)("span",{children:n.label})},IconComponent:Ha,disabled:h,fullWidth:!0,"data-testid":null!==d&&void 0!==d?d:"dropdown-select",MenuProps:{PaperProps:{style:qa(qa({},Ka),u)},MenuListProps:{style:{padding:"0"}}},children:t.map(function(e){return(0,a.Y)(Qa,{value:e.id,"data-testid":"".concat(e.label,"-option"),children:(0,a.Y)(k.A,{primary:e.label})},e.id)})})]})};var Za=(0,L.A)("form",{target:"el6v3ot5"})({name:"9pd72t",styles:"display:flex;flex-direction:column;height:300px"}),Xa=(0,L.A)("div",{target:"el6v3ot4"})({name:"itz7qk",styles:"display:flex;justify-content:space-between;margin-bottom:16px"}),Ja=(0,L.A)(Ga,{target:"el6v3ot3"})(function(e){var t=e.theme;return{width:"230px",height:"28px",flexShrink:0,"& .MuiOutlinedInput-root:hover:not(.Mui-disabled)":{border:"1px solid ".concat(t.ketcher.color.input.border.hover)},"& .MuiOutlinedInput-root":{border:"1px solid ".concat(t.ketcher.color.input.border.regular),backgroundColor:t.ketcher.color.background.primary,color:t.ketcher.color.text.primary,fontFamily:t.ketcher.font.family.inter}}},""),$a={border:"none"},el=(0,L.A)("div",{target:"el6v3ot2"})({name:"kq43v2",styles:"position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:#fff"}),tl=(0,L.A)("div",{target:"el6v3ot1"})(function(e){var t=e.theme;return{height:"100%",position:"relative",border:"1px solid ".concat(t.ketcher.color.input.border.regular),"& svg":{width:"100%",height:"100%","& .drawn-structures":{"& .monomer":{lineHeight:"initial !important"}}}}},""),nl=(0,L.A)("div",{target:"el6v3ot0"})(function(e){var t=e.theme;return{display:"flex",flexGrow:1,position:"relative","& button":{opacity:0,position:"absolute",right:"12px",top:"12px",borderRadius:"4px",padding:"2px",width:"28px",height:"28px","&:not(:active)":{backgroundColor:t.ketcher.color.background.primary,color:t.ketcher.color.text.primary}},"&:hover button":{opacity:1},"&:focus-within button":{opacity:0},"&:focus-within button:hover":{opacity:1}}},"");var rl=(0,L.A)(Si,{target:"e1oaegu38"})(function(e){var t=e.modalWidth;return"\n    .MuiPaper-root {\n      width: ".concat(t,";\n      max-width: ").concat(t,";\n    }")},""),ol=(0,L.A)("div",{target:"e1oaegu37"})({name:"kj5rtd",styles:"width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center"}),il=(0,L.A)("div",{target:"e1oaegu36"})({name:"rpuipy",styles:"display:flex;height:24px;font-size:12px"}),al=(0,L.A)(Ja,{target:"e1oaegu35"})({name:"7nflbq",styles:"padding:0;font-size:12px;& .MuiSelect-select{display:flex;align-items:center;padding:0 20px 0 8px;padding-right:20px !important;height:100%;}& span{font-size:12px;}"}),ll=(0,L.A)(al,{target:"e1oaegu34"})(function(){return{width:"140px"}},""),cl=(0,L.A)(al,{target:"e1oaegu33"})({name:"16zm0c",styles:"width:76px;margin-left:8px"}),dl=(0,L.A)(al,{target:"e1oaegu32"})({name:"l4tg7k",styles:"width:105px;margin-left:8px"}),sl=(0,L.A)("div",{target:"e1oaegu31"})({name:"oq6u0f",styles:"display:flex;gap:10px"}),ul=(0,L.A)(Ta,{target:"e1oaegu30"})({name:"b9l38d",styles:"width:min-content"}),pl="ket",hl="seq",ml="rna",fl="peptide",vl="fasta",gl="one-letter",bl="three-letter",yl=[{id:"ket",label:"Ket Format"},{id:"mol",label:"MDL Molfile V3000"},{id:"seq",label:"Sequence"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"axo-labs",label:"AxoLabs"},{id:"helm",label:"HELM"}],xl=[{id:ml,label:"RNA"},{id:"dna",label:"DNA"},{id:fl,label:"Peptide"}],wl=[{id:gl,label:"1-letter code"},{id:bl,label:"3-letter code"}],Al=h.vsV,Cl={openOptions:"openOptions",textEditor:"textEditor"},Ml=function(e){var t=e.ketSerializer,n=e.editor,r=e.struct,o=!n.drawingEntitiesManager.hasDrawingEntities,i=t.deserializeToDrawingEntities(r);if(!i)throw new Error("Error during parsing file");i.drawingEntitiesManager.centerMacroStructure();var a=i.drawingEntitiesManager.mergeInto(n.drawingEntitiesManager).command,l=new h.kPZ(n),c=n.mode instanceof h.zuW,d=n.mode instanceof h.G6$;n.mode instanceof h.jZ6&&n.drawingEntitiesManager.hasAntisenseChains&&(a.merge(n.drawingEntitiesManager.applySnakeLayout(!0,!0,!0)),a.setUndoOperationsByPriority()),n.drawingEntitiesManager.detectBondsOverlappedByMonomers(),n.renderersContainer.update(a),l.update(a),c&&(a.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:h.hJO.sequence,mergeWithLatestHistoryCommand:!0})),d&&(a.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:h.hJO.snake,mergeWithLatestHistoryCommand:!0})),o&&n.zoomToStructuresIfNeeded(),n.calculateAndStoreNextAutochainPosition(i.drawingEntitiesManager)},kl=function(){var e=(0,U.A)(Q().mark(function e(t){var n,r,o,i,a,l,c,d,s,u,p,f,v,g,b,y,x,w;return Q().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.struct,r=t.formatSelection,o=t.additionalSelection,i=t.peptideLettersFormatSelection,a=t.onCloseCallback,l=t.setIsLoading,c=t.dispatch,d=r===pl,s=r===hl,u=r===vl,p=new h.BBJ,f=h.JxB.provideEditorInstance(),g=n,b=function(e){c(Bt({errorMessage:"Convert error! "+e,errorTitle:s||u?"Unsupported symbols":""}))},!d){e.next=13;break}try{Ml({struct:n,ketSerializer:p,editor:f}),a()}catch(A){b("Error during file parsing.")}return e.abrupt("return");case 13:u||s&&i!==bl?(v=Al[r][o],g=g.toUpperCase()):v=s&&i===bl?Al.seq.peptide3Letter:Al[r];case 14:return y=m.e3.getIndigo(),e.prev=15,l(!0),e.next=19,y.convert({struct:g,output_format:h.Raq.KET,input_format:v});case 19:x=e.sent,Ml({struct:x.struct,ketSerializer:p,editor:f}),a(),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(15),w="string"===typeof e.t0?e.t0:JSON.stringify(e.t0),b(w),h.$yr.error(e.t0);case 29:return e.prev=29,l(!1),e.finish(29);case 32:case"end":return e.stop()}},e,null,[[15,24,29,32]])}));return function(t){return e.apply(this,arguments)}}(),Ol=!1,Il=function(e){},Dl=["value","id","onChange","label","type","className","inputClassName"];function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var El,Pl=(0,L.A)("label",{target:"e10m4n7r1"})(function(e){return{display:"flex",flexDirection:"column",marginRight:"8px",color:e.theme.ketcher.color.text.primary,fontSize:"12px"}},""),Ll=(0,L.A)("input",{target:"e10m4n7r0"})(function(e){var t=e.theme;return{height:"24px",padding:"3px 7px",border:"1px solid ".concat(t.ketcher.color.input.border.regular),fontSize:"14px",borderRadius:"4px",backgroundColor:t.ketcher.color.input.background.primary,color:t.ketcher.color.text.primary,outline:"transparent",width:"164px",letterSpacing:"normal","&:active, &:focus":{color:t.ketcher.color.input.text.active},"&:hover":{border:"1px solid ".concat(t.ketcher.color.input.border.hover)}}},""),jl=function(e){var t=e.value,n=e.id,r=e.onChange,o=e.label,i=e.type,l=e.className,c=e.inputClassName,d=(0,G.A)(e,Dl);return(0,a.FD)(Pl,{htmlFor:n,className:l,children:[o&&(0,a.Y)("span",{children:o}),(0,a.Y)(Ll,Yl({type:i||"text",id:n,value:t,className:c,onChange:function(e){r(e.target.value)}},d))]})};!function(e){e.Ket="chemical/x-ket",e.Mol="chemical/x-mdl-molfile",e.HELM="chemincal/x-helm",e.Fasta="chemical/x-fasta",e.Sequence="chemical/x-sequence",e.Idt="chemical/x-idt",e.AxoLabs="chemical/x-axo-labs",e.Svg="image/svg+xml"}(El||(El={}));var Nl=(0,z.A)(function e(t,n,r,o,i){(0,B.A)(this,e),this.name=t,this.mime=n,this.extensions=r,this.supportsCoords=o||!1,this.options=i||{}}),Fl={ket:new Nl("Ket file",El.Ket,[".ket"],!0,{}),mol:new Nl("MDL Molfile V3000",El.Mol,[".mol"],!0,{"molfile-saving-mode":"3000"}),fasta:new Nl("FASTA",El.Fasta,[".fasta"],!1,{}),sequence:new Nl("SEQUENCE",El.Sequence,[".seq"],!1,{}),"sequence-3-letter":new Nl("SEQUENCE (3-letter code)",El.Sequence,[".seq"],!1,{}),idt:new Nl("IDT",El.Idt,[".idt"],!1,{}),"axo-labs":new Nl("AxoLabs",El.AxoLabs,[".axolabs"],!1,{}),helm:new Nl("HELM",El.HELM,[".helm"]),svg:new Nl("SVG Document",El.Svg,[".svg"])},Tl=function(e){return Fl[e]};var Bl=[{id:"ket",label:"Ket Format"},{id:"mol",label:"MDL Molfile V3000"},{id:"sequence",label:"Sequence (1-letter code)"},{id:"sequence-3-letter",label:"Sequence (3-letter code)"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"axo-labs",label:"AxoLabs"},{id:"svg",label:"SVG Document"},{id:"helm",label:"HELM"}],zl={mol:h.Raq.Mol,fasta:h.Raq.FASTA,sequence:h.Raq.SEQUENCE,"sequence-3-letter":h.Raq.PeptideSequenceThreeLetter,idt:h.Raq.IDT,"axo-labs":h.Raq.AXOLABS,helm:h.Raq.HELM},Rl=(0,L.A)(Si,{target:"e12csxs60"})({name:"krpfk5",styles:"& div.MuiPaper-root{background:white;min-height:400px;min-width:430px;}& .MuiDialogContent-root{overflow:hidden;height:100%;}"}),Hl=(0,L.A)(Ta,{target:"e1kgbmg80"})(function(){return{width:"72px"}},"");var _l=(0,L.A)("div",{target:"e11sfr0q0"})({name:"606i4c",styles:"padding:12px"});var ql=(0,L.A)("div",{target:"e1wvbgsi0"})({name:"606i4c",styles:"padding:12px"}),Vl=(0,L.A)("div",{target:"e1tvvbc92"})(function(){return{display:"flex",flexDirection:"column",rowGap:"2px",alignItems:"center",marginBottom:"5px"}},""),Wl=(0,L.A)("span",{target:"e1tvvbc91"})(function(e){return{margin:0,padding:0,textAlign:"center",display:"block",font:e.theme.ketcher.font.family.inter,fontSize:e.theme.ketcher.font.size.small,fontWeight:e.theme.ketcher.font.weight.regular,color:e.disabled?"rgba(180, 185, 214, 1)":e.theme.ketcher.color.text.light}},""),Ul=(0,L.A)("div",{target:"e1tvvbc90"})(function(){return{height:"100%"}},""),Kl=function(e){return"O"===e?"OH":e};var Ql=(0,L.A)(m.c9,{target:"e1huhxto1"})(function(e){var t=e.theme,n=e.isExpanded;return{display:"flex",border:"1.5px solid ".concat(t.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:n?"auto":"150px",width:n?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}},""),Gl=(0,L.A)("div",{target:"e1huhxto0"})({name:"wfzm1y",styles:"display:flex;flex-wrap:wrap;justify-content:center;align-self:flex-start;width:100%;gap:7px"});var Zl=(0,L.A)("div",{target:"e8i5wzj0"})({name:"2oefzz",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;padding:8px;color:#7c7c7f;border:1px solid #cad3dd;width:100%;height:100%"}),Xl=function(e){var t=e.testId;return(0,a.FD)(Zl,{"data-testid":t,children:[(0,a.Y)(m.In,{name:"questionMark"}),"Unknown structure"]})},Jl=(0,L.A)("div",{target:"e1q9gayd0"})(function(e){var t=e.theme,n=e.expanded;return{display:"flex",border:"1.5px solid ".concat(t.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:n?"auto":"150px",width:n?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}},""),$l=function(e){var t=e.monomer,n=e.expanded,r=e.selectedAttachmentPoint,o=e.connectedAttachmentPoints,i=e.usage,l=e.testId,d=(0,c.useRef)(null);return(0,c.useLayoutEffect)(function(){var e=d.current;if(e){var n=(0,V.Ltv)(e);if(t instanceof h.cN8){var a=(e.width.baseVal.value-e.x.baseVal.value)/2,l=(e.height.baseVal.value-e.y.baseVal.value)/2,c=new h.ZY9(a,l),s=h.E$k.canvasToModel(c),u=new h.cN8(t.variantMonomerItem,s);new h.TYn(u).showExternal({canvas:n,usage:i,selectedAttachmentPoint:r,connectedAttachmentPoints:o})}}},[r,o]),(0,a.Y)(Jl,{expanded:n,"data-testid":l,children:(0,a.Y)("svg",{ref:d})})},ec=function(e){var t,n=e.monomer,r=e.attachmentPoints,o=e.connectedAttachmentPoints,i=e.selectedAttachmentPoint,l=e.usage,c=e.needCache,d=e.update,s=e.expanded,u=e.testId,p=n instanceof h.cN8,m=n.monomerItem.props.unresolved;return t=p?(0,a.Y)($l,{monomer:n,expanded:s,selectedAttachmentPoint:i,connectedAttachmentPoints:o,usage:l,testId:u}):m?(0,a.Y)(Xl,{testId:u}):(0,a.Y)(Ql,{struct:n.monomerItem.struct,options:{connectedMonomerAttachmentPoints:o,currentlySelectedMonomerAttachmentPoint:null!==i&&void 0!==i?i:void 0,usageInMacromolecule:l,labelInMonomerConnectionsModal:!0,needCache:null!==c&&void 0!==c&&c},update:d,isExpanded:s,testId:u}),(0,a.FD)(a.FK,{children:[t,(0,a.Y)(Gl,{children:(0,a.Y)(a.FK,{children:r})})]})},tc=(0,L.A)("div",{target:"e14t14ao2"})(function(e){var t=e.theme,n=e.isExpanded;return{margin:0,padding:0,textAlign:"center",alignSelf:"flex-end",display:"block",font:t.ketcher.font.family.inter,fontSize:t.ketcher.font.size.regular,fontWeight:t.ketcher.font.weight.regular,flexBasis:"200px",lineHeight:"14px",maxWidth:n?void 0:"150px"}},""),nc=(0,L.A)("div",{target:"e14t14ao1"})(function(e){var t=e.theme;return{width:10,height:2,display:"block",color:t.ketcher.color.button.secondary.hover,backgroundColor:t.ketcher.color.button.secondary.hover,borderRadius:20,margin:"auto"}},""),rc=(0,L.A)("div",{target:"e14t14ao0"})(function(){return{display:"grid",gridAutoFlow:"column",gridTemplateRows:"auto auto auto",gridTemplateColumns:"1fr 10px 1fr",justifyContent:"center",alignItems:"flex-start",padding:"12px",paddingBottom:0,height:"100%",columnGap:"12px",rowGap:"8px"}},""),oc=function(e){return e instanceof h.cN8?function(e){var t=e.monomerClass,n=e.variantMonomerItem,r=n.label,o=n.options||[];if(t===h.IPc.Base){var i=o.some(function(e){return e.templateId.toLowerCase().includes("thymine")}),a=o.some(function(e){return e.templateId.toLowerCase().includes("uracil")});return i?"N"===r?"Any DNA base":"Ambiguous DNA Base":a?"N"===r?"Any RNA Base":"Ambiguous RNA Base":"Ambiguous Base"}return t===h.IPc.AminoAcid?"X"===r?"Any Amino acid":"Ambiguous Amino acid":"Ambiguous ".concat(t)}(e):e.monomerItem.props.Name},ic=function(e){var t=e.firstMonomer,n=e.secondMonomer,r=e.expanded,o=e.firstMonomerOverview,i=e.secondMonomerOverview,l=oc(t),c=oc(n);return(0,a.Y)(rc,{children:(0,a.FD)(a.FK,{children:[(0,a.Y)(tc,{isExpanded:r,children:l}),o,(0,a.Y)("span",{}),(0,a.Y)(nc,{}),(0,a.Y)("span",{}),(0,a.Y)(tc,{isExpanded:r,children:c}),i]})})};function ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var lc=(0,L.A)(Si,{target:"e1byht5d3"})({name:"1j7jcep",styles:"& .MuiPaper-root{background:#fff !important;}& .MuiDialogContent-root{overflow:hidden;}"}),cc=(0,L.A)(Ta,{target:"e1byht5d2"})(function(){return{width:"97px !important"}},""),dc=(0,L.A)(Ta,{target:"e1byht5d1"})(function(e){return{width:"97px !important",color:e.disabled?"rgba(51, 51, 51, 0.6)":"",background:e.disabled?"rgba(225, 229, 234, 1) !important":"",opacity:"1 !important",minHeight:"0"}},""),sc=(0,L.A)(Ta,{target:"e1byht5d0"})(function(e){return{borderRadius:5,minWidth:"45px !important",padding:"4px",border:"1px solid ".concat(e.theme.ketcher.color.border.secondary),color:e.disabled?"rgba(51, 51, 51, 0.6) !important":"",background:e.disabled?"rgba(225, 229, 234)":"",borderColor:e.disabled?"rgba(225, 229, 234) !important":""}},"");function uc(e){var t=e.monomer,n=e.selectedAttachmentPoint,r=e.onSelectAttachmentPoint,o=e.expanded,l=void 0!==o&&o,d=e.position,s=(0,c.useState)(t.attachmentPointsToBonds),u=(0,i.A)(s,2),p=u[0],m=u[1],f=(0,c.useState)(function(){return jr(p)}),v=(0,i.A)(f,2),g=v[0],b=v[1];(0,c.useEffect)(function(){m(t.attachmentPointsToBonds)},[n]),(0,c.useEffect)(function(){var e=jr(p);b(e)},[p]);var y=function(e){var n=t.monomerCaps,r=t instanceof h.cN8;if(!n)return r?null:"H";var o=n[e];return Kl(o)},x=function(e){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ac(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.attachmentPointsToBonds),i=n?o[n]:null;n&&i&&t.removeBond(i);var a=t.getPotentialBond(e);o[e]=a,m(o),r(e);var l=jr(o);b(l)};return(0,a.Y)(ec,{monomer:t,connectedAttachmentPoints:g,selectedAttachmentPoint:n,usage:h.HT5.MonomerConnectionsModal,update:l,expanded:l,attachmentPoints:t.listOfAttachmentPoints.map(function(e){var t=Boolean(g.includes(e)&&e!==n);return(0,a.FD)(Vl,{children:[(0,a.Y)(sc,{label:e,styleType:e===n?"primary":"secondary",clickHandler:function(){return x(e)},disabled:t,"data-testid":"".concat(d,"-").concat(e),"data-isactive":e===n}),(0,a.Y)(Wl,{"data-testid":"leaving-group-value",disabled:t,children:y(e)})]},e)}),testId:"".concat(d,"-monomer-preview")})}function pc(e){if(e.chosenFirstAttachmentPointForBond)return e.chosenFirstAttachmentPointForBond;if(e.chosenSecondAttachmentPointForBond)return e.chosenSecondAttachmentPointForBond;var t=Object.entries(e.attachmentPointsToBonds).filter(function(e){var t=(0,i.A)(e,2);return t[0],null==t[1]});return 1===t.length?(0,i.A)(t[0],1)[0]:null}var hc=(0,L.A)("p",{target:"e1e4h5hm0"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),mc={open:function(e){var t=e.isModalOpen,r=e.onClose,o=Fr(),l=(0,c.useState)(""),d=(0,i.A)(l,2),s=d[0],u=d[1],p=(0,c.useState)(""),m=(0,i.A)(p,2),f=m[0],v=m[1],g=(0,c.useState)(!1),b=(0,i.A)(g,2),y=b[0],x=b[1],w=(0,c.useState)(),A=(0,i.A)(w,2),C=A[0],M=A[1],k=(0,c.useState)(Cl.openOptions),O=(0,i.A)(k,2),I=O[0],D=O[1],S=(0,c.useState)(pl),Y=(0,i.A)(S,2),E=Y[0],P=Y[1],L=(0,c.useState)(ml),j=(0,i.A)(L,2),N=j[0],F=j[1],T=(0,c.useState)(gl),B=(0,i.A)(T,2),z=B[0],R=B[1];(0,c.useEffect)(function(){var e=null===f||void 0===f?void 0:f.split("."),t=e[e.length-1];if(t){var n=yl.find(function(e){return e.id===t}),r=null!==n&&void 0!==n&&n.id?n.id:hl;P(r)}},[f]),(0,c.useEffect)(function(){new Promise(function(e,t){n.g.FileReader?e(Ba):t(new Error("Your browser does not support opening files locally"))}).then(function(e){M({chosenOpener:e})})},[]);var H=(0,c.useCallback)(function(){D(Cl.openOptions),u(""),P(pl),F(ml),r()},[r]),_=function(){kl({struct:s,formatSelection:E,additionalSelection:N,peptideLettersFormatSelection:z,onCloseCallback:H,setIsLoading:x,dispatch:o})},q=function(){var e=h.JxB.provideEditorInstance(),t=new h.kPZ(e),n=e.drawingEntitiesManager.deleteAllEntities();t.update(n),e.renderersContainer.update(n),e.zoomToStructuresIfNeeded(),kl({struct:s,formatSelection:E,additionalSelection:N,peptideLettersFormatSelection:z,onCloseCallback:H,setIsLoading:x,dispatch:o})};return(0,a.FD)(rl,{isOpen:t,title:"Open Structure",onClose:H,modalWidth:I===Cl.textEditor?"620px":"",testId:"openStructureModal",children:[(0,a.Y)(Si.Content,{children:(0,a.FD)(za,{currentState:I,children:[(0,a.Y)(Ya,{isAnalyzingFile:Ol,fileName:f,currentState:I,states:Cl,selectClipboard:function(){return D(Cl.textEditor)},fileLoadHandler:function(e){v(e[0].name),null===C||void 0===C||C.chosenOpener(e[0]).then(function(e){u(e),D(Cl.textEditor)},function(){})},errorHandler:Il,value:s,inputHandler:u}),y&&(0,a.Y)(el,{children:(0,a.Y)(oa,{})})]})}),I===Cl.textEditor?(0,a.Y)(Si.Footer,{withborder:"true",children:(0,a.FD)(ol,{children:[(0,a.FD)(il,{children:[(0,a.Y)(ll,{options:yl,currentSelection:E,selectionHandler:P,customStylesForExpanded:$a},E),E===hl||E===vl?(0,a.Y)(cl,{options:xl,currentSelection:N,selectionHandler:F,customStylesForExpanded:$a,testId:"dropdown-select-type"},N):null,E===hl&&N===fl?(0,a.Y)(dl,{options:wl,currentSelection:z,selectionHandler:R,testId:"dropdown-select-peptide-letters-format"}):null]}),(0,a.FD)(sl,{children:[(0,a.Y)(ul,{disabled:!s.trim(),clickHandler:q,label:"Open as New",styleType:"secondary","data-testid":"open-as-new-button"},"openButton"),(0,a.Y)(ul,{disabled:!s.trim(),clickHandler:_,label:"Add to Canvas",title:"Structure will be loaded as fragment and added to Clipboard","data-testid":"add-to-canvas-button"},"copyButton")]})]})}):(0,a.Y)(a.FK,{})]})},save:function(e){var t=e.onClose,n=e.isModalOpen,r=Fr(),o=(0,c.useState)("ket"),l=(0,i.A)(o,2),d=l[0],s=l[1],u=(0,c.useState)("ketcher"),p=(0,i.A)(u,2),f=p[0],v=p[1],g=(0,c.useState)(""),b=(0,i.A)(g,2),y=b[0],x=b[1],w=(0,c.useState)(!1),A=(0,i.A)(w,2),C=A[0],M=A[1],k=(0,c.useState)(),O=(0,i.A)(k,2),I=O[0],D=O[1],S=m.e3.getIndigo(),Y=h.JxB.provideEditorInstance(),E=function(){var e=(0,U.A)(Q().mark(function e(t){var n,o,i,a,l,c,d,u,p;return Q().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t),n=new h.BBJ,o=n.serialize(Y.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),Y.drawingEntitiesManager),D(void 0),"ket"!==t){e.next=7;break}return x(o),e.abrupt("return");case 7:if("svg"!==t){e.next=14;break}return i=Y.ketcherRootElementBoundingClientRect,a=(null===i||void 0===i?void 0:i.x)||0,l=(null===i||void 0===i?void 0:i.y)||0,c=(0,h.xRJ)(Y.canvas,"preview",{horizontal:a,vertical:l}),D(c),e.abrupt("return");case 14:if("helm"!==t||(0,h.aVK)(Array.from(Y.drawingEntitiesManager.monomers.values()),Y.monomersLibrary)||Y.events.error.dispatch("Some of the monomers do not have aliases in the HELM Core Library - they are exported using Ketcher aliases."),e.prev=15,M(!0),"fasta"!==t&&"sequence"!==t){e.next=21;break}if(Y.drawingEntitiesManager.validateIfApplicableForFasta()){e.next=21;break}throw new Error("Error during sequence type recognition(RNA, DNA or Peptide)");case 21:return e.next=23,S.convert({struct:o,output_format:zl[t]});case 23:d=e.sent,x(d.struct),e.next=34;break;case 27:e.prev=27,e.t0=e.catch(15),u=e.t0 instanceof Error?e.t0.message:"string"===typeof e.t0?e.t0:JSON.stringify(e.t0),r(Bt(p="Convert error! "+u)),h.$yr.error(p),s("ket");case 34:return e.prev=34,M(!1),e.finish(34);case 37:case"end":return e.stop()}},e,null,[[15,27,34,37]])}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e;if("svg"===d){var n=Y.ketcherRootElementBoundingClientRect,r=(null===n||void 0===n?void 0:n.x)||0,o=(null===n||void 0===n?void 0:n.y)||0,i=(0,h.xRJ)(Y.canvas,"file",{horizontal:r,vertical:o});if(!i)return void t();e=i}else e=y;var a=new Blob([e],{type:Tl(d).mime}),l=Tl(d);(0,$.saveAs)(a,"".concat(f).concat(l.extensions[0])),t()};return(0,c.useEffect)(function(){if("ket"===d){var e=(new h.BBJ).serialize(Y.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),Y.drawingEntitiesManager);x(e)}},[d]),(0,a.FD)(Rl,{title:"save structure",isOpen:n,onClose:t,testId:"save-structure-dialog",children:[(0,a.Y)(Si.Content,{children:(0,a.FD)(Za,{onSubmit:P,id:"save",children:[(0,a.FD)(Xa,{style:{padding:"12px 12px 10px"},children:[(0,a.Y)("div",{children:(0,a.Y)(jl,{value:f,id:"filename",onChange:function(e){v(e)},label:"File name:","data-testid":"filename-input"})}),(0,a.Y)(Ja,{label:"File format:",options:Bl,currentSelection:d,selectionHandler:E,customStylesForExpanded:$a,testId:"file-format-list"})]}),I?(0,a.Y)(tl,{dangerouslySetInnerHTML:{__html:I},"data-testid":"preview-area"}):(0,a.FD)(nl,{children:[(0,a.Y)(Oa,{testId:"preview-area",value:y,readonly:!0}),(0,a.Y)(m.K0,{onClick:function(e){e.preventDefault();try{(0,h.ulQ)()?navigator.clipboard.writeText(y):(0,h.VVv)(e.clipboardData,{"text/plain":y})}catch(t){h.$yr.error("copyAs.js::copyAs",t),r(Bt("This feature is not available in your browser"))}},iconName:"copy",title:"Copy to clipboard",testId:"copy-to-clipboard"}),C&&(0,a.Y)(el,{children:(0,a.Y)(oa,{})})]})]})}),(0,a.FD)(Si.Footer,{children:[(0,a.Y)(Ta,{label:"Cancel",styleType:"secondary",clickHandler:t,"data-testid":"cancel-button"}),(0,a.Y)(Ta,{label:"Save",clickHandler:P,disabled:!f,"data-testid":"save-button"})]})]})},delete:function(e){var t=e.isModalOpen,n=e.onClose,r=Fr(),o=Tr(bn),i=Tr(Fe),l=(0,c.useCallback)(function(){n()},[n]);return(0,a.FD)(Si,{isOpen:t,title:"Delete RNA Preset",onClose:l,"data-testid":"delete-preset-modal",children:[(0,a.Y)(Si.Content,{children:(0,a.FD)(_l,{"data-testid":"delete-preset-popup-content",children:[(0,a.Y)("div",{children:"You are about to delete"}),(0,a.FD)("div",{children:['"',o.name,'" RNA preset.']}),(0,a.Y)("div",{children:"This operation cannot be undone."})]})}),(0,a.FD)(Si.Footer,{children:[(0,a.Y)(Hl,{clickHandler:function(){l()},label:"Cancel",styleType:"secondary","data-testid":"cancel-delete-preset-button"},"cancel"),(0,a.Y)(Hl,{clickHandler:function(){l(),r(Ln(o)),r(Nn(!1)),r(jn()),null===i||void 0===i||i.events.selectPreset.dispatch(null)},label:"Delete","data-testid":"delete-preset-button"},"delete")]})]})},updateSequenceInRNABuilder:function(e){var t=e.isModalOpen,n=e.onClose,r=Fr(),o=Tr(ln),i=Tr(Fe),l=li(o),d=(0,c.useCallback)(function(){n()},[n]);return(0,a.FD)(Si,{isOpen:t,title:"Update sequence",onClose:d,children:[(0,a.Y)(Si.Content,{children:(0,a.FD)(ql,{children:["You are going to modify ",l," nucleotides. Are you sure?"]})}),(0,a.FD)(Si.Footer,{children:[(0,a.Y)(Ta,{clickHandler:function(){d()},label:"Cancel",styleType:"secondary",title:"","data-testid":"update-sequence-cancel-button"},"cancel"),(0,a.Y)(Ta,{clickHandler:function(){d(),null===i||void 0===i||i.events.modifySequenceInRnaBuilder.dispatch(o),ai(r,i)},label:"Yes",title:"","data-testid":"update-sequence-yes-button"},"update")]})]})},monomerConnection:function(e){var t=e.onClose,n=e.isModalOpen,r=e.firstMonomer,o=e.secondMonomer,l=e.polymerBond,d=e.isReconnectionDialog,s=Tr(Fe),u=(0,c.useRef)(null===l||void 0===l?void 0:l.firstMonomerAttachmentPoint),p=(0,c.useRef)(null===l||void 0===l?void 0:l.secondMonomerAttachmentPoint),h=(0,c.useRef)((null===r||void 0===r?void 0:r.hasFreeAttachmentPoint)||(null===o||void 0===o?void 0:o.hasFreeAttachmentPoint));if(!r||!o)throw new Error("Monomers must exist!");var m=(0,c.useState)(u.current||pc(r)),f=(0,i.A)(m,2),v=f[0],g=f[1],b=(0,c.useState)(p.current||pc(o)),y=(0,i.A)(b,2),x=y[0],w=y[1],A=(0,c.useState)(!1),C=(0,i.A)(A,2),M=C[0],k=C[1],O=function(){var e;d?(null===l||void 0===l||l.firstMonomer.setBond(u.current,l),null===l||void 0===l||null===(e=l.secondMonomer)||void 0===e||e.setBond(p.current,l),t()):(null===s||void 0===s||s.events.cancelBondCreationViaModal.dispatch(o),t())};return(0,a.FD)(lc,{title:d?"Edit Attachment Points":"Select Attachment Points",isOpen:n,onClose:O,showExpandButton:!0,modalWidth:"358px",expanded:M,setExpanded:k,testId:"monomer-connection-modal",children:[(0,a.Y)(Si.Content,{children:(0,a.Y)(Ul,{children:(0,a.Y)(ic,{firstMonomer:r,secondMonomer:o,expanded:M,firstMonomerOverview:(0,a.Y)(uc,{monomer:r,selectedAttachmentPoint:v,onSelectAttachmentPoint:g,expanded:M,position:"left"}),secondMonomerOverview:(0,a.Y)(uc,{monomer:o,selectedAttachmentPoint:x,onSelectAttachmentPoint:w,expanded:M,position:"right"})})})}),(0,a.FD)(Si.Footer,{children:[(0,a.Y)(cc,{label:"Cancel","data-testid":"cancel-button",styleType:"secondary",clickHandler:O}),(0,a.Y)(dc,{label:d?"Reconnect":"Connect","data-testid":d?"Reconnect-button":"Connect-button",disabled:!v||!x||!h.current,clickHandler:function(){if(!v||!x)throw new Error("Attachment points cannot be falsy");v!==u.current||x!==p.current?(null===s||void 0===s||s.events.createBondViaModal.dispatch({firstMonomer:r,secondMonomer:o,firstSelectedAttachmentPoint:v,secondSelectedAttachmentPoint:x,polymerBond:l,isReconnection:d,initialFirstMonomerAttachmentPoint:u.current,initialSecondMonomerAttachmentPoint:p.current}),t()):O()}})]})]})},confirmationDialog:function(e){var t=e.title,n=e.confirmationText,r=e.onConfirm,o=e.isModalOpen,i=e.onClose;return(0,a.FD)(Si,{isOpen:o,title:null!==t&&void 0!==t?t:"Confirm your action",onClose:i,testId:"confirmation-dialog",children:[(0,a.Y)(Si.Content,{children:(0,a.Y)(hc,{"data-testid":"confirmation-text",children:n})}),(0,a.FD)(Si.Footer,{children:[(0,a.Y)(Ta,{label:"Cancel",clickHandler:i,"data-testid":"cancel-button"}),(0,a.Y)(Ta,{label:"Yes",clickHandler:function(){r(),i()},styleType:"secondary","data-testid":"yes-button"})]})]})}};function fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var vc=function(){var e=Tr(Ht),t=Tr(Rt),n=Tr(_t),r=Fr(),o=(0,c.useCallback)(function(){r(Nt())},[r]);if(!t)return null;var i=mc[t];if(!i)throw new Error("There is no modal window named ".concat(t));return n?(0,a.Y)(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fc(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({onClose:o,isModalOpen:e},n)):(0,a.Y)(i,{onClose:o,isModalOpen:e})};var gc=(0,L.A)("div",{target:"e15avtnm2"})({name:"1bweptz",styles:"background-color:#333333;max-height:40px;display:flex;align-items:stretch"}),bc=(0,L.A)("div",{target:"e15avtnm1"})({name:"1my6l07",styles:"max-width:356px;padding:4px 10px 4px 10px;color:white;display:flex"}),yc=(0,L.A)(m.K0,{target:"e15avtnm0"})({name:"1c8hqv0",styles:"color:white;width:24px;height:auto;display:flex;align-items:center;justify-content:center;&:hover{background-color:#585858;color:white;}svg{width:16px;height:16px;}"}),xc=function(){return(0,a.FD)(a.FK,{children:[(0,a.Y)("symbol",{id:"chem",viewBox:"0 0 59 59",width:"59",height:"59",children:(0,a.Y)("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"0.75"})}),(0,a.Y)("symbol",{id:"chem-selection",viewBox:"0 0 59 59",width:"59",height:"59",children:(0,a.Y)("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"0.75",stroke:"#0097A8",fill:"none",strokeWidth:"1.5"})}),(0,a.FD)("symbol",{id:"chem-autochain-preview",viewBox:"0 0 32 32",width:"32",height:"32","data-actual-width":"32","data-actual-height":"32",children:[(0,a.Y)("path",{d:"M1 4.63574V2.63574C1 1.53117 1.89543 0.635742 3 0.635742H5"}),(0,a.Y)("path",{d:"M1 26.6357V28.6357C1 29.7403 1.89543 30.6357 3 30.6357H5"}),(0,a.Y)("path",{d:"M31 4.63574V2.63574C31 1.53117 30.1046 0.635742 29 0.635742H27"}),(0,a.Y)("path",{d:"M31 26.6357V28.6357C31 29.7403 30.1046 30.6357 29 30.6357H27"}),(0,a.Y)("path",{d:"M7.02142 30.6357L10.0214 30.6357"}),(0,a.Y)("path",{d:"M12.0013 30.6357L15.0013 30.6357"}),(0,a.Y)("path",{d:"M16.9816 30.6357L19.9816 30.6357"}),(0,a.Y)("path",{d:"M22.0222 30.6357L25.0222 30.6357"}),(0,a.Y)("path",{d:"M1.02185 6.63574L1.02185 9.63574"}),(0,a.Y)("path",{d:"M1.02185 11.6152L1.02185 14.6152"}),(0,a.Y)("path",{d:"M1.02185 16.5957L1.02185 19.5957"}),(0,a.Y)("path",{d:"M1.02185 21.6367L1.02185 24.6367"}),(0,a.Y)("path",{d:"M7.02142 0.635742L10.0214 0.635742"}),(0,a.Y)("path",{d:"M12.0013 0.635742L15.0013 0.635742"}),(0,a.Y)("path",{d:"M16.9816 0.635742L19.9816 0.635742"}),(0,a.Y)("path",{d:"M22.0222 0.635742L25.0222 0.635742"}),(0,a.Y)("path",{d:"M31.0219 6.63574L31.0219 9.63574"}),(0,a.Y)("path",{d:"M31.0219 11.6152L31.0219 14.6152"}),(0,a.Y)("path",{d:"M31.0219 16.5957L31.0219 19.5957"}),(0,a.Y)("path",{d:"M31.0219 21.6367L31.0219 24.6367"})]})]})},wc=function(){return(0,a.FD)(a.FK,{children:[(0,a.Y)("symbol",{id:"peptide",viewBox:"0 0 70 61",width:"70",height:"61",children:(0,a.Y)("path",{className:"monomer-body",transform:"scale(0.5)","data-actual-width":"35","data-actual-height":"30.5",d:"M16.9236 1.00466C17.2801 0.383231 17.9418 6.10888e-07 18.6583 5.98224e-07L51.3417 2.04752e-08C52.0582 7.81036e-09 52.7199 0.383234 53.0764 1.00466L69.4289 29.5047C69.7826 30.1211 69.7826 30.8789 69.4289 31.4953L53.0764 59.9953C52.7199 60.6168 52.0582 61 51.3417 61H18.6583C17.9418 61 17.2801 60.6168 16.9236 59.9953L0.571095 31.4953C0.217407 30.8789 0.217408 30.1211 0.571096 29.5047L16.9236 1.00466Z"})}),(0,a.FD)("symbol",{id:"peptide-hover",viewBox:"0 0 70 61",width:"70",height:"61",children:[(0,a.Y)("path",{d:"M18.2246 1.75116C18.3137 1.59581 18.4792 1.5 18.6583 1.5L51.3417 1.5C51.5208 1.5 51.6863 1.59581 51.7754 1.75116L53.06 1.01408L51.7754 1.75117L68.1279 30.2512C68.2163 30.4053 68.2163 30.5947 68.1279 30.7488L51.7754 59.2488C51.6863 59.4042 51.5208 59.5 51.3417 59.5H18.6583C18.4792 59.5 18.3137 59.4042 18.2246 59.2488L1.87215 30.7488C1.78372 30.5947 1.78372 30.4053 1.87215 30.2512L18.2246 1.75116Z",fill:"none",transform:"scale(0.5)",stroke:"#0097A8",strokeWidth:"3"})," "]}),(0,a.Y)("symbol",{id:"modified-background",viewBox:"0 0 60 20",width:"30",height:"20",x:"2.5",y:"5",children:(0,a.Y)("path",{xmlns:"http://www.w3.org/2000/svg",d:"M6.52702 20C5.81057 20 5.14885 19.6168 4.79229 18.9953L0.570974 11.6382C0.217285 11.0218 \n           0.217285 10.2639 0.570974 9.64751L5.52999 1.00466C5.88654 0.383235 6.54827 0 7.26472 0H52.735C53.4515\n           0 54.1132 0.383234 54.4698 1.00466L59.4288 9.64751C59.7825 10.2639 59.7825 11.0218 59.4288 11.6382\n           L55.2075 18.9953C54.8509 19.6168 54.1892 20 53.4727 20H6.52702Z",fillOpacity:"0.6"})}),(0,a.FD)("symbol",{id:"peptide-autochain-preview",viewBox:"0 0 37 32",width:"37",height:"32","data-actual-width":"37","data-actual-height":"32",children:[(0,a.Y)("path",{d:"M8.27143 3.53027L9.29272 1.77462C9.65083 1.15901 10.3093 0.780274 11.0215 0.780274L13.1642 0.780274M29.2131 3.53027L28.1919 1.77462C27.8337 1.15901 27.1753 0.780273 26.4631 0.780273L24.3164 0.780273M2.45429 13.5303L1.585 15.0246C1.22337 15.6463 1.22337 16.4143 1.585 17.0359L2.45429 18.5303M29.0386 28.5303L28.0233 30.2756C27.6619 30.897 26.991 31.2803 26.2646 31.2803L24.1459 31.2803M8.09693 28.5303L9.11221 30.2756C9.47371 30.897 10.1446 31.2803 10.871 31.2803H12.9936M34.8558 18.5303L35.7311 17.0256C36.0896 16.4092 36.0896 15.6514 35.7311 15.0349L34.8558 13.5303"}),(0,a.Y)("path",{d:"M14.8937 0.780178L17.8937 0.780178"}),(0,a.Y)("path",{d:"M19.597 0.780178L22.597 0.780178"}),(0,a.Y)("path",{d:"M14.8937 31.2804H17.8937"}),(0,a.Y)("path",{d:"M19.597 31.2804H22.597"}),(0,a.Y)("path",{d:"M3.61253 11.7412L5.11253 9.14309"}),(0,a.Y)("path",{d:"M5.96421 7.66792L7.46421 5.06984"}),(0,a.Y)("path",{d:"M30.1034 26.877L31.6034 24.2789"}),(0,a.Y)("path",{d:"M32.455 22.8038L33.955 20.2057"}),(0,a.Y)("path",{d:"M7.32633 26.9903L5.82633 24.3922"}),(0,a.Y)("path",{d:"M4.97465 22.917L3.47465 20.319"}),(0,a.Y)("path",{d:"M33.9528 11.8759L32.4782 9.26339"}),(0,a.Y)("path",{d:"M31.6409 7.78023L30.1662 5.16769"})]})]})},Ac=function(){return(0,a.FD)(a.FK,{children:[(0,a.Y)("symbol",{id:"sugar",viewBox:"0 0 70 70",width:"70",height:"70",children:(0,a.Y)("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",rx:"5"})}),(0,a.Y)("symbol",{id:"sugar-selection",viewBox:"-1 -1 100 100",width:"70",height:"70",children:(0,a.Y)("rect",{width:"39",height:"39",rx:"5",fill:"none",stroke:"#0097A8",strokeWidth:"2.5"})}),(0,a.Y)("symbol",{id:"sugar-variant",viewBox:"0 0 72 72",width:"70",height:"70",children:(0,a.Y)("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",x:"0.5",y:"0.5",rx:"5",stroke:"#585858",strokeWidth:"0.5"})}),(0,a.Y)("symbol",{id:"sugar-modified-background",viewBox:"0 0 28 10",width:"27",height:"10",x:"0.7",y:"10",children:(0,a.Y)("path",{d:"M1.5 10C0.947715 10 0.5 9.55229 0.5 9V1C0.5 0.447715 0.947715 0 1.5 0H26.5C27.0523 0 27.5 0.447715 27.5 1V9C27.5 9.55228 27.0523 10 26.5 10H1.5Z",fill:"white",fillOpacity:"0.6"})}),(0,a.FD)("symbol",{id:"sugar-autochain-preview",viewBox:"0 0 32 32",width:"32",height:"32","data-actual-width":"32","data-actual-height":"32",children:[(0,a.Y)("path",{d:"M1 4.63574V2.63574C1 1.53117 1.89543 0.635742 3 0.635742H5"}),(0,a.Y)("path",{d:"M1 26.6357V28.6357C1 29.7403 1.89543 30.6357 3 30.6357H5"}),(0,a.Y)("path",{d:"M31 4.63574V2.63574C31 1.53117 30.1046 0.635742 29 0.635742H27"}),(0,a.Y)("path",{d:"M31 26.6357V28.6357C31 29.7403 30.1046 30.6357 29 30.6357H27"}),(0,a.Y)("path",{d:"M7.02142 30.6357L10.0214 30.6357"}),(0,a.Y)("path",{d:"M12.0013 30.6357L15.0013 30.6357"}),(0,a.Y)("path",{d:"M16.9816 30.6357L19.9816 30.6357"}),(0,a.Y)("path",{d:"M22.0222 30.6357L25.0222 30.6357"}),(0,a.Y)("path",{d:"M1.02185 6.63574L1.02185 9.63574"}),(0,a.Y)("path",{d:"M1.02185 11.6152L1.02185 14.6152"}),(0,a.Y)("path",{d:"M1.02185 16.5957L1.02185 19.5957"}),(0,a.Y)("path",{d:"M1.02185 21.6367L1.02185 24.6367"}),(0,a.Y)("path",{d:"M7.02142 0.635742L10.0214 0.635742"}),(0,a.Y)("path",{d:"M12.0013 0.635742L15.0013 0.635742"}),(0,a.Y)("path",{d:"M16.9816 0.635742L19.9816 0.635742"}),(0,a.Y)("path",{d:"M22.0222 0.635742L25.0222 0.635742"}),(0,a.Y)("path",{d:"M31.0219 6.63574L31.0219 9.63574"}),(0,a.Y)("path",{d:"M31.0219 11.6152L31.0219 14.6152"}),(0,a.Y)("path",{d:"M31.0219 16.5957L31.0219 19.5957"}),(0,a.Y)("path",{d:"M31.0219 21.6367L31.0219 24.6367"})]})]})},Cc=function(){return(0,a.FD)(a.FK,{children:[(0,a.Y)("symbol",{id:"phosphate",viewBox:"0 0 70 70",width:"70",height:"70",children:(0,a.Y)("rect",{className:"monomer-body",width:"28",height:"28","data-actual-width":"28","data-actual-height":"28",rx:"15"})}),(0,a.Y)("symbol",{id:"phosphate-selection",viewBox:"-1 -1 75 75",width:"70",height:"70",children:(0,a.Y)("rect",{width:"28",height:"28",rx:"15",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})}),(0,a.Y)("symbol",{id:"phosphate-variant",viewBox:"0 0 70 70",width:"70",height:"70",children:(0,a.Y)("rect",{className:"monomer-body",width:"27",height:"27","data-actual-width":"27","data-actual-height":"27",stroke:"#585858",strokeWidth:"0.5",x:"0.5",y:"0.5",rx:"15"})}),(0,a.Y)("symbol",{id:"phosphate-modified-background",viewBox:"0 0 28 10",width:"26",height:"10",x:"1",y:"9.5",children:(0,a.Y)("path",{d:"M2.13388 0C1.72465 0 1.35333 0.248229 1.22109 0.635509C0.753639 2.00455 0.5 3.47265 0.5 5C0.5 6.52735 0.753639 7.99545 1.22109 9.36449C1.35333 9.75177 1.72465 10 2.13389 10H25.8661C26.2753 10 26.6467 9.75177 26.7789 9.36449C27.2464 7.99545 27.5 6.52735 27.5 5C27.5 3.47265 27.2464 2.00455 26.7789 0.635509C26.6467 0.248229 26.2753 0 25.8661 0H2.13388Z",fill:"#333333",fillOpacity:"0.6"})}),(0,a.Y)("symbol",{id:"phosphate-autochain-preview",viewBox:"-1 -1 30 30",width:"30",height:"30","data-actual-width":"30","data-actual-height":"30",children:(0,a.Y)("rect",{width:"28",height:"28",rx:"15",strokeDasharray:"4 4"})})]})},Mc=function(){return(0,a.FD)(a.FK,{children:[(0,a.Y)("symbol",{id:"rna-base",viewBox:"-16 0 65 65",width:"65",height:"95",children:(0,a.Y)("rect",{width:"22.5",height:"22.5","data-actual-width":"31.82","data-actual-height":"31.82",rx:"1",x:"-11.25",y:"-11.25",transform:"rotate(45)",className:"monomer-body"})}),(0,a.Y)("symbol",{id:"rna-base-selection",viewBox:"-15.75 -0.25 65 65",width:"65",height:"95",children:(0,a.Y)("rect",{width:"21",height:"21",rx:"1",x:"-10.5",y:"-10.5",transform:"rotate(45)",stroke:"#0097A8",strokeWidth:"1.5",fill:"none"})}),(0,a.Y)("symbol",{id:"rna-base-variant",viewBox:"-16 0 65 65",width:"65",height:"94",children:(0,a.Y)("rect",{width:"21.5",height:"21.5","data-actual-width":"30","data-actual-height":"30",stroke:"#585858",strokeWidth:"0.5",rx:"1",x:"-10.25",y:"-10.25",transform:"rotate(45)",className:"monomer-body"})}),(0,a.Y)("symbol",{id:"rna-base-modified-background",viewBox:"0 0 32 10",width:"30",height:"9",x:"0.8",y:"10.8",children:(0,a.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.30156 10C6.03634 10 5.78199 9.89464 5.59445 9.70711L1.1508 5.26346C0.760279 4.87293 0.760279 4.23977 1.1508 3.84924L4.70715 0.292893C4.89469 0.105357 5.14904 0 5.41426 0H26.5858C26.851 0 27.1054 0.105357 27.2929 0.292893L30.8493 3.84924C31.2398 4.23977 31.2398 4.87293 30.8493 5.26346L26.4056 9.70711C26.2181 9.89464 25.9637 10 25.6985 10H6.30156Z",fill:"#333333",fillOpacity:"0.6"})}),(0,a.FD)("symbol",{id:"rna-base-autochain-preview",viewBox:"0 0 36 36",width:"36",height:"36","data-actual-width":"36","data-actual-height":"36",children:[(0,a.Y)("path",{d:"M2.77636 20.2837L1.83359 19.341C1.05254 18.5599 1.05254 17.2936 1.83359 16.5125L2.77468 15.5715"}),(0,a.Y)("path",{d:"M15.7398 33.2465L16.6826 34.1893C17.4636 34.9704 18.73 34.9704 19.511 34.1893L20.4521 33.2482"}),(0,a.Y)("path",{d:"M20.4412 2.61969L19.4984 1.67691C18.7173 0.89586 17.451 0.895861 16.67 1.67691L15.7289 2.618"}),(0,a.Y)("path",{d:"M33.4046 15.5825L34.3474 16.5252C35.1284 17.3063 35.1284 18.5726 34.3474 19.3537L33.4063 20.2948"}),(0,a.Y)("path",{d:"M21.6425 32.0586L23.4089 30.2921"}),(0,a.Y)("path",{d:"M24.5747 29.126L26.3412 27.3595"}),(0,a.Y)("path",{d:"M27.5073 26.1934L29.2737 24.4269"}),(0,a.Y)("path",{d:"M30.4753 23.2256L32.2418 21.4591"}),(0,a.Y)("path",{d:"M3.96771 21.4492L5.73546 23.217"}),(0,a.Y)("path",{d:"M6.90216 24.3838L8.6699 26.1515"}),(0,a.Y)("path",{d:"M9.83673 27.3184L11.6045 29.0861"}),(0,a.Y)("path",{d:"M12.8069 30.2881L14.5747 32.0558"}),(0,a.Y)("path",{d:"M3.96497 14.3809L5.73145 12.6144"}),(0,a.Y)("path",{d:"M6.89728 11.4482L8.66376 9.68176"}),(0,a.Y)("path",{d:"M9.82977 8.5166L11.5963 6.75012"}),(0,a.Y)("path",{d:"M12.7979 5.54785L14.5643 3.78137"}),(0,a.Y)("path",{d:"M21.6326 3.78418L23.4003 5.55192"}),(0,a.Y)("path",{d:"M24.567 6.71875L26.3347 8.48649"}),(0,a.Y)("path",{d:"M27.5016 9.65332L29.2693 11.4211"}),(0,a.Y)("path",{d:"M30.4718 12.623L32.2395 14.3908"})]})]})},kc=function(){return(0,a.FD)(a.FK,{children:[(0,a.FD)("symbol",{id:"unresolved-monomer",viewBox:"0 0 59 59",width:"59",height:"59",children:[(0,a.Y)("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",stroke:"#333333"}),(0,a.Y)("rect",{width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"#585858"})]}),(0,a.Y)("symbol",{id:"unresolved-monomer-hover",children:(0,a.Y)("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})}),(0,a.FD)("symbol",{id:"unresolved-monomer-autochain-preview",viewBox:"0 0 32 32",width:"32",height:"32","data-actual-width":"32","data-actual-height":"32",children:[(0,a.Y)("path",{d:"M1 4.63574V2.63574C1 1.53117 1.89543 0.635742 3 0.635742H5"}),(0,a.Y)("path",{d:"M1 26.6357V28.6357C1 29.7403 1.89543 30.6357 3 30.6357H5"}),(0,a.Y)("path",{d:"M31 4.63574V2.63574C31 1.53117 30.1046 0.635742 29 0.635742H27"}),(0,a.Y)("path",{d:"M31 26.6357V28.6357C31 29.7403 30.1046 30.6357 29 30.6357H27"}),(0,a.Y)("path",{d:"M7.02142 30.6357L10.0214 30.6357"}),(0,a.Y)("path",{d:"M12.0013 30.6357L15.0013 30.6357"}),(0,a.Y)("path",{d:"M16.9816 30.6357L19.9816 30.6357"}),(0,a.Y)("path",{d:"M22.0222 30.6357L25.0222 30.6357"}),(0,a.Y)("path",{d:"M1.02185 6.63574L1.02185 9.63574"}),(0,a.Y)("path",{d:"M1.02185 11.6152L1.02185 14.6152"}),(0,a.Y)("path",{d:"M1.02185 16.5957L1.02185 19.5957"}),(0,a.Y)("path",{d:"M1.02185 21.6367L1.02185 24.6367"}),(0,a.Y)("path",{d:"M7.02142 0.635742L10.0214 0.635742"}),(0,a.Y)("path",{d:"M12.0013 0.635742L15.0013 0.635742"}),(0,a.Y)("path",{d:"M16.9816 0.635742L19.9816 0.635742"}),(0,a.Y)("path",{d:"M22.0222 0.635742L25.0222 0.635742"}),(0,a.Y)("path",{d:"M31.0219 6.63574L31.0219 9.63574"}),(0,a.Y)("path",{d:"M31.0219 11.6152L31.0219 14.6152"}),(0,a.Y)("path",{d:"M31.0219 16.5957L31.0219 19.5957"}),(0,a.Y)("path",{d:"M31.0219 21.6367L31.0219 24.6367"})]})]})},Oc=function(){return(0,a.FD)(a.FK,{children:[(0,a.Y)("symbol",{id:"nucleotide",viewBox:"0 0 84 84",width:"42",height:"42",children:(0,a.Y)("path",{className:"monomer-body","data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)"})}),(0,a.Y)("symbol",{id:"nucleotide-hover",viewBox:"0 0 84 84",width:"42",height:"42",children:(0,a.Y)("path",{"data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)",fill:"none",stroke:"#0097A8",strokeWidth:"3"})}),(0,a.FD)("symbol",{id:"nucleotide-autochain-preview",viewBox:"0 0 36 32",width:"36",height:"32","data-actual-width":"36","data-actual-height":"32",children:[(0,a.Y)("path",{d:"M20.3771 2.38574L18.5929 1.0722C18.2402 0.812609 17.7598 0.812609 17.4071 1.0722L15.6229 2.38574M32.6021 11.3857L34.4405 12.7392C34.7769 12.9868 34.9239 13.4174 34.8092 13.8191L34.2725 15.6985M3.39787 11.3857L1.55948 12.7392C1.2231 12.9868 1.07608 13.4174 1.19078 13.8191L1.72751 15.6985M30.8088 27.8266L30.2138 29.9168C30.0914 30.3466 29.6988 30.643 29.252 30.643H27.0063M5.19116 27.8266L5.7931 29.9194C5.91633 30.3479 6.30831 30.643 6.75414 30.643H9.00194"}),(0,a.Y)("path",{d:"M10.5017 30.6426L13.5017 30.6426"}),(0,a.Y)("path",{d:"M16.5032 30.6426L19.5032 30.6426"}),(0,a.Y)("path",{d:"M22.5046 30.6426L25.5046 30.6426"}),(0,a.Y)("path",{d:"M2.23663 17.4971L3.06363 20.3808"}),(0,a.Y)("path",{d:"M3.83911 23.0859L4.66611 25.9697"}),(0,a.Y)("path",{d:"M22.356 3.85059L25.5765 6.22306"}),(0,a.Y)("path",{d:"M27.5099 7.64746L30.7304 10.0199"}),(0,a.Y)("path",{d:"M13.605 3.85156L10.3846 6.22404"}),(0,a.Y)("path",{d:"M8.45105 7.64844L5.23059 10.0209"}),(0,a.Y)("path",{d:"M33.7705 17.4971L32.9435 20.3808"}),(0,a.Y)("path",{d:"M32.168 23.0859L31.341 25.9697"})]})]})},Ic=function(){return(0,a.FD)(a.FK,{children:[(0,a.Y)("path",{strokeLinecap:"round",d:"M5,0 0,2.5 5,5z",id:"arrow-marker-content"}),(0,a.Y)("marker",{id:"arrow-marker",markerHeight:"3",markerWidth:"5",orient:"auto",refX:"2.5",refY:"1.5",children:(0,a.Y)("use",{href:"#arrow-marker-content",transform:"rotate(180 2.5 1.5) scale(1,0.6)",strokeWidth:"1.2500",fill:"black",stroke:"none"})}),(0,a.Y)("marker",{id:"arrow-marker-arc",markerWidth:"5",markerHeight:"5",viewBox:"0 0 5 5",refX:"5",refY:"2.5",orient:"auto",children:(0,a.Y)("use",{href:"#arrow-marker-content",transform:"rotate(180, 2.5, 2.5)",fill:"#365CFF",stroke:"none"})})]})},Dc=function(){return(0,a.Y)("symbol",{id:"sequence-start-arrow",viewBox:"0 0 65 65",width:"65",height:"95",children:(0,a.Y)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.Y)("path",{d:"M10.2802 5.09664C10.9756 5.49813 10.9756 6.50187 10.2802 6.90336L2.56467 11.3579C1.86926 11.7594 1 11.2576 1 10.4546V1.54541C1 0.742426 1.86926 0.240558 2.56467 0.642053L10.2802 5.09664Z",stroke:"#7C7C7F"})})})};var Sc=(0,L.A)("div",{target:"e1phidy70"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),Yc=function(){var e=Fr(),t=Tr(Vt),n=Tr(Wt)||"Error message",r=""!==t,o=function(){e(zt())};return(0,a.FD)(Si,{isOpen:r,title:n,onClose:o,testId:"info-modal-window",children:[(0,a.Y)(Si.Content,{children:(0,a.Y)(Sc,{"data-testid":"error-message-body",children:t})}),(0,a.Y)(Si.Footer,{children:(0,a.Y)(Ta,{label:"Close",clickHandler:o,"data-testid":"info-modal-close"})})]})},Ec=(0,L.A)("div",{target:"embh3ih3"})(function(){return{height:"100%"}},""),Pc=(0,L.A)("div",{target:"embh3ih2"})(function(){return{display:"flex",alignItems:"center"}},""),Lc=(0,L.A)("div",{target:"embh3ih1"})(function(){return{background:"","&.toggler-component-wrapper--disabled":{opacity:.4,pointerEvents:"none",cursor:"default"}}},""),jc=(0,L.A)("svg",{target:"embh3ih0"})(function(){return{"&.handCursor":{cursor:"\n      url('data:image/svg+xml;base64,PHN2ZwogICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICB3aWR0aD0iMjQiCiAgICAgICAgaGVpZ2h0PSIyNCIKICAgICAgICBmaWxsPSJub25lIgogICAgICAgIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjMDAwIgogICAgICAgICAgICBkPSJNMjAuNDM0IDcuNjczYy0uMS0uNi0uNzEzLTEuNzMxLTIuMzItMS43MzEtLjEyNiAwLS4yNTIuMDA3LS4zNzcuMDIzdi0uNzlhMS4wMSAxLjAxIDAgMCAwLS4wNDUtLjNjLS4xNzctLjU2NC0uODc2LTEuNjMxLTIuMjYyLTEuNjMxYTIuNTk5IDIuNTk5IDAgMCAwLS42NzYuMDg2IDIuMzk0IDIuMzk0IDAgMCAwLS4xNDYtLjIzYy0uNDUzLS42NDUtMS4xODYtMS0yLjA2My0xLS44NzcgMC0xLjU4NC4zNi0yLjAyNSAxLjAxN2EyLjQ2MSAyLjQ2MSAwIDAgMC0uMzYxLjg1IDIuNjYzIDIuNjYzIDAgMCAwLS40MDgtLjAzYy0xLjQ3NCAwLTIuMTI0IDEuMTUtMi4yNjIgMS43NTdhMS4wMzQgMS4wMzQgMCAwIDAtLjAyNC4yMjJWMTEuMWwtLjEzLS4xYy0uNTg4LS41LTIuMDM0LTEuMTIxLTMuMzkxLjAyOS0xLjM1NyAxLjE1LTEuMDE1IDIuNjY0LS40MzEgMy40NTIuNDUzLjc3MyA0LjUxMiA3LjQyNSAxMC4yMjMgNy40MjUgMy4yNSAwIDQuOTEtMS41MTIgNS43MjktMi43ODFhNi4yOTEgNi4yOTEgMCAwIDAgLjk4LTIuOFY3LjgzOGMuMDAxLS4wNTYtLjAwMy0uMTEtLjAxMS0uMTY1WiIKICAgIC8+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjZmZmIgogICAgICAgICAgICBzdHJva2U9IiNmZmYiCiAgICAgICAgICAgIGQ9Ik0xOC40NDggMTYuMjE1YTQuNDc0IDQuNDc0IDAgMCAxLS43IDEuODg3Yy0uODA1IDEuMi0yLjE1MyAxLjgtNC4wMDggMS44LTQuNzY4IDAtOC40ODQtNi40MTItOC41Mi02LjQ3NmEuNjY5LjY2OSAwIDAgMC0uMDktLjEyNmMtLjI5NC0uNDA4IDAtLjY1NS4xMDctLjc0OC4yNjctLjIyNy41NC0uMjM3LjgxLS4wMzFsMS43NyAxLjQ1MmExIDEgMCAwIDAgMS42NDQtLjc2M1Y2LjA4YS4yODcuMjg3IDAgMCAxIC4yOS0uMTQ4LjQ0LjQ0IDAgMCAxIC4zNzIuMTZ2NC43YTEgMSAwIDEgMCAyIDB2LTYuNDVjLjA2OC0uMjQ4LjMtLjI0OC40MjItLjI0OC4yIDAgLjQxNC4wMzIuNDgyLjI1NXY2LjQ0YTEgMSAwIDEgMCAyIDB2LTUuMmEuNzUuNzUgMCAwIDEgLjA3NC0uMTljLjA0OS0uMDgxLjEwOC0uMTUuMzI1LS4xNWEuMzUuMzUgMCAwIDEgLjMwNy4xNXY1LjM5YTEgMSAwIDEgMCAyIDBWOC4wNDdhLjU4My41ODMgMCAwIDEgLjM3Ny0uMWMuMDY1IDAgLjI1OC4wMDYuMzM0LjA3OGwuMDA0IDguMTlaIgogICAgLz4KPC9zdmc+Cg=='),\n      auto\n    "},"&.handCursorGrabbing":{cursor:"\n      url('data:image/svg+xml;base64,PHN2ZwogICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICAgd2lkdGg9IjI0IgogICAgaGVpZ2h0PSIyNCIKICAgIGZpbGw9Im5vbmUiCiAgICB2aWV3Qm94PSIwIDAgMzAgMzAiCiAgPgogICAgPHBhdGgKICAgICAgZmlsbD0iI2ZmZiIKICAgICAgZD0iTTEwLjc0NCAzQzguODkgMyA3LjM4NCA0LjUyNSA3LjM4NCA2LjR2LjIyaC0uMDEyYy0xLjk5NyAwLTMuNjIyIDEuNjAyLTMuNjIyIDMuNTY4bC4wMDEgNy4wMmMwIDEuNzcgMS41MTIgMy41MTUgMy4xMTIgNS4zNjEuNzIuODMgMS45MTkgMi4yMTYgMi4wMzQgMi43MzF2MS41MjJoMTMuNDQydi0xLjU1NGMwLS41OS42MTgtMS43NyAxLjE2My0yLjgxLjkzOC0xLjc4OSAxLjk5OC0zLjgxNSAxLjk5OC01Ljk5MSAwLTMuMjU4LS4wMS02LjI0OC0uMDEtNi4yNDggMC0xLjY5Ni0xLjM5LTMuMDgtMy4xLTMuMDgtLjIwMyAwLS40LjAyLS41OTIuMDU3YTMuNjUgMy42NSAwIDAgMC0zLjAzMy0xLjYwN2MtLjM2NyAwLS43Mi4wNTMtMS4wNTUuMTUzYTMuNjM2IDMuNjM2IDAgMCAwLTMuMDktMS43MDVjLS40NDQgMC0uODcuMDgtMS4yNjQuMjI1QTMuMzQ1IDMuMzQ1IDAgMCAwIDEwLjc0NCAzWiIKICAgIC8+CiAgICA8cGF0aAogICAgICBmaWxsPSIjMDAwIgogICAgICBkPSJNMTAuNzQ0IDQuNTU0YzEgMCAxLjgwOC44MjYgMS44MDggMS44NDV2MS4xOTdjMC0xLjEwOS45MjctMi4wMDggMi4wNjgtMi4wMDggMS4xNDMgMCAyLjA2OC45IDIuMDY4IDIuMDA4djEuNTUyYzAtMS4xMS45My0yLjAwOCAyLjA3Ny0yLjAwOCAxLjE0NyAwIDIuMDc2Ljg5OSAyLjA3NiAyLjAwOHYxLjA2OEExLjU0IDEuNTQgMCAwIDEgMjIuMzkgOC42OWMuODU2IDAgMS41NDguNjg0IDEuNTQ4IDEuNTMgMCAwIC4wMSAyLjk4OC4wMSA2LjI0NCAwIDMuMjU3LTMuMTYxIDYuNjM2LTMuMTYxIDguODAySDEwLjQ1YzAtMS45NC01LjE0Ni01Ljc3My01LjE0Ni04LjA2MXYtNy4wMmMwLTEuMTEyLjkyNi0yLjAxNCAyLjA3LTIuMDE1djQuMDUxYzAgLjM0Mi4zNS42Mi43ODEuNjIuNDMyIDAgLjc4Mi0uMjc4Ljc4Mi0uNjJWNi40YzAtMS4wMi44MDktMS44NDUgMS44MDctMS44NDVabTAtMS41NTRDOC44OSAzIDcuMzg0IDQuNTI1IDcuMzg0IDYuNHYuMjJoLS4wMTJjLTEuOTk3IDAtMy42MjIgMS42MDItMy42MjIgMy41NjhsLjAwMSA3LjAyYzAgMS43NyAxLjUxMiAzLjUxNSAzLjExMiA1LjM2MS43Mi44MyAxLjkxOSAyLjIxNiAyLjAzNCAyLjczMXYxLjUyMmgxMy40NDJ2LTEuNTU0YzAtLjU5LjYxOC0xLjc3IDEuMTYzLTIuODEuOTM4LTEuNzg5IDEuOTk4LTMuODE1IDEuOTk4LTUuOTkxIDAtMy4yNTgtLjAxLTYuMjQ4LS4wMS02LjI0OCAwLTEuNjk2LTEuMzktMy4wOC0zLjEtMy4wOC0uMjAzIDAtLjQuMDItLjU5Mi4wNTdhMy42NSAzLjY1IDAgMCAwLTMuMDMzLTEuNjA3Yy0uMzY3IDAtLjcyLjA1My0xLjA1NS4xNTNhMy42MzYgMy42MzYgMCAwIDAtMy4wOS0xLjcwNWMtLjQ0NCAwLS44Ny4wOC0xLjI2NC4yMjVBMy4zNDUgMy4zNDUgMCAwIDAgMTAuNzQ0IDNaIgogICAgLz4KICA8L3N2Zz4='),\n      auto\n    "}}},"");function Nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Tc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Bc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var zc=(0,L.A)("div",{target:"ex562360"})({name:"1vtgpt7",styles:"position:absolute;top:0;left:0;height:100%;width:100%;display:flex;justify-content:center;align-items:center"}),Rc=function(){return(0,a.Y)(zc,{children:(0,a.Y)(oa,{})})};var Hc=(0,L.A)("div",{target:"e1yct69a0"})({name:"14ocoqf",styles:"display:flex;& svg:first-of-type{display:flex;justify-content:center;align-items:center;width:24px;height:24px;padding:2px;border-radius:4px;}"}),_c=function(e){var t=(0,c.useState)(!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)),n=(0,i.A)(t,2),r=n[0],o=n[1];return(0,a.Y)(Hc,{className:e.className,children:(0,a.Y)(m.K0,{onClick:function(){var e,t=(0,m.Kn)();r?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=t).requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),o(!r)},iconName:r?"fullscreen-exit":"fullscreen-enter",testId:"fullscreen-mode-button"})})},qc=function(){return c.useContext(zr)};var Vc=(0,L.A)(m.K0,{target:"e1erwxoo0"})({name:"1y95nj0",styles:"margin:2px;outline:none"});function Wc(){var e;null===(e=document.activeElement)||void 0===e||e.blur()}var Uc=(0,L.A)(O.A,{target:"e1ann9o40"})({name:"2gmlyg",styles:"display:flex;justify-content:space-between;font-weight:400;font-size:12px;line-height:14px;padding:7px 8px;text-transform:none;color:#333333;width:max-content"}),Kc=function(e){var t=e.itemId,n=e.title,r=void 0===n?"":n,o=e.disabled,i=e.testId,l=e.onClick,d=e.type,s=void 0===d?"icon-button":d,u=qc(),p=u.isActive,h=u.activate,m=(0,c.useCallback)(function(){h(t),Wc(),l&&l()},[h,t]),f=p(t),v=f?" active":"";return(0,a.Y)(a.FK,{children:"icon-button"===s?(0,a.Y)(Vc,{title:r,className:t+v,isActive:f,onClick:m,iconName:t,testId:i,disabled:o}):(0,a.Y)(Uc,{title:r,onClick:m,disabled:o,"data-testid":i,children:r})})};var Qc=(0,L.A)(m.In,{shouldForwardProp:function(e){return"isActive"!==e},target:"e13kdqxv4"})("position:absolute;height:7px;width:7px;right:3px;bottom:3px;cursor:pointer;path{fill:",function(e){return e.isActive?"white":void 0},";}"),Gc=(0,L.A)("div",{target:"e13kdqxv3"})({name:"k5saax",styles:"display:flex;position:relative;align-items:center;&:active{.dropdown{fill:white;}}"}),Zc=(0,L.A)("div",{target:"e13kdqxv2"})("display:flex;border-radius:4px;flex-direction:",function(e){return e.isVertical?"column":"row"},";z-index:1;background-color:white;padding:2px;width:",function(e){var t=e.isVertical,n=e.isAutoSize;return t&&!n?"38px":"auto"},";height:",function(e){var t=e.isVertical,n=e.isAutoSize;return t||n?"auto":"38px"},";"),Xc=(0,L.A)(I.A,{target:"e13kdqxv1"})({name:"a4hmbt",styles:"position:absolute"}),Jc=(0,L.A)("div",{target:"e13kdqxv0"})({name:"a1qh1t",styles:"display:flex;align-items:center;position:relative;width:32px;height:32px;padding:0;justify-content:center;border-radius:2px"});function $c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$c(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var td=(0,L.A)("div",{target:"e1fh0ozy3"})(function(e){var t=e.theme,n=e.isHorizontal;return{backgroundColor:t.ketcher.color.background.primary,borderRadius:"4px",display:"flex",flexDirection:n?"row":"column",zIndex:t.ketcher.zIndex.toolbar}},""),nd=(0,L.A)("hr",{target:"e1fh0ozy2"})("width:18px;margin:6px 0;align-self:center;border-width:thin 0px 0px 0px;border-style:solid;border-color:",function(e){return e.theme.ketcher.color.divider},";"),rd=(0,L.A)("hr",{target:"e1fh0ozy1"})("height:18px;margin:0px 6px;align-self:center;border-width:0px thin 0px 0px;border-style:solid;border-color:",function(e){return e.theme.ketcher.color.divider},";"),od=(0,L.A)("div",{target:"e1fh0ozy0"})(function(e){var t=e.theme,n=e.isHorizontal;return{display:"flex",flexDirection:n?"row":"column",flexWrap:"nowrap",alignItems:"center",backgroundColor:t.ketcher.color.background.primary,borderRadius:"2px",width:n?void 0:"32px",marginBottom:n?void 0:"8px","> :last-child":n?void 0:{marginBottom:0}}},""),id=function(e){var t=e.children,n=e.divider,r=void 0!==n&&n,o=e.isHorizontal,i=c.Children.map(t,function(e){return e});return(0,a.FD)(a.FK,{children:[(0,a.Y)(od,{isHorizontal:o,children:i}),r&&(o?(0,a.Y)(rd,{}):(0,a.Y)(nd,{}))]})},ad=function(e){var t=e.children,n=e.onItemClick,r=e.activeMenuItems,o=e.testId,i=e.isHorizontal,l=c.useMemo(function(){return{isActive:function(e){return!!r&&r.includes(e)},activate:function(e){n(e)}}},[r,n]),d=c.Children.map(t,function(e){return e&&e.type===id?e:null});return(0,a.Y)(zr.Provider,{value:l,children:(0,a.Y)(td,{"data-testid":o,isHorizontal:i,children:d})})};ad.Group=id,ad.Item=Kc,ad.Submenu=function(e){var t,n=e.children,r=e.vertical,o=void 0!==r&&r,l=e.autoSize,d=void 0!==l&&l,s=e.disabled,u=void 0!==s&&s,p=e.needOpenByMenuItemClick,h=void 0!==p&&p,f=e.testId,v=e.layoutModeButton,g=void 0!==v&&v,b=e.generalTitle,y=e.activeItem,x=e.subMenuId,w=Fr(),A=(0,c.useRef)(null),C=(0,c.useState)(!1),M=(0,i.A)(C,2),k=M[0],O=M[1],I=qc().isActive,S=(0,m.dR)([A,k,o,m.tS]),Y=(0,i.A)(S,1)[0],E=Tr((t=x,function(e){return e.editor.selectedMenuGroupItems[t]})),P=x?E:null,L=function(){u||O(function(e){return!e})},j=function(){k&&O(!1)},N=c.Children.map(n,function(e){return e.type===Kc?e:null}),F=N.map(function(e){return e.props.itemId}).filter(function(e){return e}),T=F.filter(function(e){return I(e)})[0];(0,c.useEffect)(function(){x&&T&&T!==P&&w(Pe({groupName:x,activeItemName:T}))},[w,x,T,P]);var B=null!==y&&void 0!==y?y:T||P||F[0],z=N.find(function(e){return e.props.itemId===B}),R=null===z||void 0===z?void 0:z.props.testId,H=null!==b&&void 0!==b?b:null===z||void 0===z?void 0:z.props.title,_=document.querySelector(m.tS);return(0,a.Y)(Gc,{"data-testid":f,ref:A,children:(0,a.FD)(a.FK,{children:[(0,a.FD)(Jc,{children:[(0,a.Y)(Kc,{disabled:u,itemId:B,title:H,testId:R,onClick:h?L:Yr}),k||(0,a.Y)(Qc,{className:"dropdown",name:"dropdown",onClick:L,isActive:I(B),dataTestId:"dropdown-expand"})]}),_&&(0,q.createPortal)((0,a.Y)(Xc,{in:k,timeout:0,style:ed({},Y),unmountOnExit:!0,onClick:j,children:(0,a.Y)(D.x,{onClickAway:j,children:(0,a.Y)(Zc,{isVertical:o,isAutoSize:d,islayoutModeButton:g,"data-testid":"multi-tool-dropdown",children:N.map(function(e){return c.cloneElement(e,{key:e.props.itemId})})})})}),_)]})})};var ld=function(){var e=Tr(Fe),t=Br(),n=(0,c.useState)(t),r=(0,i.A)(n,2),o=r[0],l=r[1],d=Tr(Te),s=(0,c.useMemo)(function(){return{isActive:function(e){return o===e},activate:function(t){t!==o&&(l(t),null===e||void 0===e||e.events.selectMode.dispatch(t),null===e||void 0===e||e.events.layoutModeChange.dispatch(t))}}},[o,e]);return(0,c.useEffect)(function(){l(t)},[t]),(0,a.Y)(zr.Provider,{value:s,children:(0,a.FD)(ad.Submenu,{disabled:d,testId:"layout-mode",vertical:!0,needOpenByMenuItemClick:!0,layoutModeButton:!0,children:[(0,a.Y)(ad.Item,{itemId:"sequence-layout-mode",testId:"sequence-layout-mode",title:"Switch to sequence layout mode"}),(0,a.Y)(ad.Item,{itemId:"snake-layout-mode",testId:"snake-layout-mode",title:"Switch to snake layout mode"}),(0,a.Y)(ad.Item,{itemId:"flex-layout-mode",testId:"flex-layout-mode",title:"Switch to flex layout mode"})]})})};function cd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function dd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sd(e){var t=e.node;return t instanceof h.NxW||t instanceof h.yYC||(null===t||void 0===t?void 0:t.monomer)instanceof h.j5f}var ud=function(e){if(null!==e&&void 0!==e&&e.length){for(var t=(0,p.flatten)(e),n=t.length,r=li(t),o=!1,i=!0,a=!1,l=!0,c=function(e){var t,n=[],r=cd(e);try{for(r.s();!(t=r.n()).done;){var o,i,a,l=t.value,c=l.node,d=l.nodeIndexOverall,s=l.isNucleosideConnectedAndSelectedWithPhosphate,u=l.hasR1Connection,p=l.twoStrandedNode,m=Boolean(null===p||void 0===p?void 0:p.antisenseNode);if(c instanceof h.NxW)n.push({type:h.WDE.Nucleotide,baseLabel:null===c||void 0===c||null===(o=c.rnaBase)||void 0===o?void 0:o.label,sugarLabel:null===c||void 0===c||null===(i=c.sugar)||void 0===i?void 0:i.label,phosphateLabel:null===c||void 0===c||null===(a=c.phosphate)||void 0===a?void 0:a.label,rnaBaseMonomerItem:c.rnaBase instanceof h.cN8?c.rnaBase.variantMonomerItem:c.rnaBase.monomerItem,hasR1Connection:u,nodeIndexOverall:d,hasAntisense:m});else if(c instanceof h.yYC){var f,v;n.push({type:h.WDE.Nucleoside,baseLabel:null===c||void 0===c||null===(f=c.rnaBase)||void 0===f?void 0:f.label,sugarLabel:null===c||void 0===c||null===(v=c.sugar)||void 0===v?void 0:v.label,rnaBaseMonomerItem:c.rnaBase instanceof h.cN8?c.rnaBase.variantMonomerItem:c.rnaBase.monomerItem,isNucleosideConnectedAndSelectedWithPhosphate:s,hasR1Connection:u,nodeIndexOverall:d,hasAntisense:m})}else if((null===c||void 0===c?void 0:c.monomer)instanceof h.j5f){var g;n.push({type:h.WDE.Phosphate,phosphateLabel:null===c||void 0===c||null===(g=c.monomer)||void 0===g?void 0:g.label,nodeIndexOverall:d,hasAntisense:m})}}}catch(b){r.e(b)}finally{r.f()}return n}(t),d=0;d<c.length;d++){var s=c[d],u=c[d-1],m=s.type===h.WDE.Nucleotide||s.type===h.WDE.Nucleoside,f=null===u||void 0===u?void 0:u.isNucleosideConnectedAndSelectedWithPhosphate;m&&(o=!0),m||f?s.hasR1Connection&&(l=!1):(l=!1,i=!1),s.hasAntisense&&(a=!0)}return n>r&&(t.every(sd)||(i=!1)),{title:1===n||1===r&&i?function(e){for(var t="",n=1===e.length?e[0]:p.merge.apply(void 0,[{}].concat((0,T.A)(e))),r=0,o=["sugarLabel","baseLabel","phosphateLabel"];r<o.length;r++){var i=o[r],a=(0,p.get)(n,i,"");t+="baseLabel"===i?"(".concat(a,")"):a}return t}(c):i?"".concat(r," nucleotides"):"".concat(n," elements"),selectedSequenceLabeledNodes:c,isSelectedOnlyNucleoelements:i,isSelectedAtLeastOneNucleoelement:o,isSequenceFirstsOnlyNucleoelementsSelected:l,hasAntisense:a}}};function pd(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every(function(e){return e.every(function(e){return(0,h.mI6)(e.twoStrandedNode)})})}function hd(e){return null===e||void 0===e?void 0:e.monomers.some(function(e){return 0!==e.hydrogenBonds.length})}function md(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var vd,gd=function(e){var t=e.monomerItem;if("A"===t.props.MonomerNaturalAnalogCode||"C"===t.props.MonomerNaturalAnalogCode||"G"===t.props.MonomerNaturalAnalogCode||"T"===t.props.MonomerNaturalAnalogCode||"U"===t.props.MonomerNaturalAnalogCode)return!0;if(!e.monomerItem.isAmbiguous)return!1;if(e.subtype===h.Mk7.MIXTURE)return!1;var n=["ACGT","ACGU","CGT","CGU","AGT","AGU","ACT","ACU","GT","GU","AT","AU","CT","CU","AC","AG","CG","ACG"],r=e.monomers.map(function(e){return e.monomerItem.props.MonomerNaturalAnalogCode}).sort(function(e,t){return e.localeCompare(t)}).join("");return n.some(function(e){return e===r})},bd=function(e){return null===e||void 0===e?void 0:e.some(function(e){var t=e instanceof h.HvV&&(0,h.dJd)(e);return e instanceof h.P5K&&(e.hydrogenBonds.length>0||e.covalentBonds.length>1)||(0,h.W9x)(e)&&!gd(e)||t&&(t.hydrogenBonds.length>0||!gd(t))})},yd=function(e){return null===e||void 0===e?void 0:e.every(function(e){return!(e instanceof h.HvV)||e.label===h.Cuv.SUGAR_DNA})},xd=function(e){return null===e||void 0===e?void 0:e.every(function(e){return!(e instanceof h.HvV)||e.label===h.Cuv.SUGAR_RNA})},wd=function(e){return null===e||void 0===e?void 0:e.some(function(e){return e instanceof h.P5K&&(0,h.TKk)(e)||e instanceof h.HvV&&(0,h.dJd)(e)})},Ad="aminoAcidModification-",Cd=function(e){var t=new Set,n=new Set,r=new Map,o=h.JxB.provideEditorInstance();e.forEach(function(e){var t,n=e.monomerItem.props.MonomerNaturalAnalogCode;e instanceof h.qZ$&&n&&(r.has(n)||r.set(n,[]),null===(t=r.get(n))||void 0===t||t.push(e))}),null===o||void 0===o||o.monomersLibrary.forEach(function(e){var o,i=r.get(null===(o=e.props)||void 0===o?void 0:o.MonomerNaturalAnalogCode);if(e.props&&i){var a=e.props.modificationTypes;a&&a.forEach(function(r){i.some(function(t){return t.label!==e.label&&!(0,h.MEe)(t,e)})?n.add(r):i.every(function(t){return t.label===e.label})||t.add(r)})}});var i=(0,T.A)(t.values()).filter(function(e){return!n.has(e)}).map(function(t){var n=(0,h.MvC)(e,t,o.monomersLibrary);return{name:"".concat(Ad).concat(t),title:t,onMouseOver:function(){o.transientDrawingView.showModifyAminoAcidsView({monomersToModify:(0,T.A)(n.keys())}),o.transientDrawingView.update()},onMouseOut:function(){o.transientDrawingView.hideModifyAminoAcidsView(),o.transientDrawingView.update()}}});return i.sort(h.EtL),i},Md=function(e,t){var n,r,o=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.__data__,i=null===o||void 0===o||null===(r=o.node)||void 0===r?void 0:r.monomer,a=[];return e.length?a=e:i&&(a=[i]),a.filter(function(e){return e instanceof h.qZ$})},kd=function(e){if(e.length<3)return!1;var t,n=new Set(e),r=new Set,o=new Set,i=function e(t,i){r.add(t),o.add(t);var a,l=function(e){var t=[];return e.forEachBond(function(r){if(!(r instanceof h.t$8)){var o=r.firstMonomer,i=r.secondMonomer;if(o&&i){var a=r.getAnotherMonomer(e);a&&n.has(a)&&t.push(a)}}}),t}(t),c=md(l);try{for(c.s();!(a=c.n()).done;){var d=a.value;if(d!==i){if(o.has(d))return!0;if(!r.has(d)&&e(d,t))return!0}}}catch(s){c.e(s)}finally{c.f()}return o.delete(t),!1},a=md(e);try{for(a.s();!(t=a.n()).done;){var l=t.value;if(!r.has(l)&&i(l,null))return!0}}catch(c){a.e(c)}finally{a.f()}return!1};!function(e){e.title="sequence_menu_title",e.createRnaAntisenseStrand="create_antisense_rna_chain",e.createDnaAntisenseStrand="create_antisense_dna_chain",e.modifyInRnaBuilder="modify_in_rna_builder",e.modifyAminoAcids="modify_amino_acids",e.establishHydrogenBond="establish_hydrogen_bond",e.deleteHydrogenBond="delete_hydrogen_bond",e.editSequence="edit_sequence",e.startNewSequence="start_new_sequence",e.copy="copy",e.paste="paste",e.delete="delete"}(vd||(vd={}));var Od=function(e){var t,n,r=e.selections,o=e.contextMenuEvent,i=Tr(Fe),l=Fr(),c=ud(r),d=(null===r||void 0===r||null===(t=r.flat())||void 0===t?void 0:t.flatMap(function(e){return e.node.monomers}))||[],s=Md(d,o),u=Tr(Te),p="sequence-layout-mode"===Br(),f=Cd(s),v=null!==(n=null===r||void 0===r?void 0:r.some(function(e){return e.some(function(e){return hd(e.node)})}))&&void 0!==n&&n,g=(null===d||void 0===d?void 0:d.length)>0&&wd(d),b=!pd(r)||v,y=[{name:vd.title,title:null===c||void 0===c?void 0:c.title,isMenuTitle:!0,disabled:!0,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)||!(null!==c&&void 0!==c&&c.isSelectedAtLeastOneNucleoelement)}},{name:vd.copy,title:"Copy",icon:(0,a.Y)(m.In,{name:"copyMenu"}),disabled:0===(null===d||void 0===d?void 0:d.length)},{name:vd.paste,title:"Paste",icon:(0,a.Y)(m.In,{name:"pasteNavBar"}),disabled:!1,separator:!0},{name:vd.editSequence,title:"Edit sequence",disabled:!1,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)}},{name:vd.startNewSequence,title:"Start new sequence",disabled:!1,separator:g||b},{name:vd.createRnaAntisenseStrand,title:"Create RNA antisense strand",disabled:bd(d),hidden:function(){return!d||!wd(d)}},{name:vd.createDnaAntisenseStrand,title:"Create DNA antisense strand",disabled:bd(d),hidden:function(){return!d||!wd(d)}},{name:vd.establishHydrogenBond,title:"Establish Hydrogen Bonds",disabled:function(e){var t,n=e.props;return 0===(null===r||void 0===r?void 0:r.length)?(0,h.mI6)(null===n||void 0===n||null===(t=n.sequenceItemRenderer)||void 0===t?void 0:t.twoStrandedNode):pd(r)},hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)}},{name:vd.deleteHydrogenBond,title:"Remove hydrogen bonds",disabled:function(e){var t,n=e.props;return 0===(null===r||void 0===r?void 0:r.length)?!hd(null===n||void 0===n||null===(t=n.sequenceItemRenderer)||void 0===t?void 0:t.node):!(null!==r&&void 0!==r&&r.some(function(e){return e.some(function(e){return hd(e.node)})}))},hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)}},{name:vd.modifyInRnaBuilder,title:"Modify in RNA Builder...",disabled:!(null!==c&&void 0!==c&&c.isSelectedOnlyNucleoelements)||c.hasAntisense,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)||!(null!==c&&void 0!==c&&c.isSelectedAtLeastOneNucleoelement)}},{name:vd.modifyAminoAcids,title:"Modify amino acids",disabled:!1,hidden:!f.length,subMenuItems:f,separator:!0},{name:vd.delete,title:"Delete",disabled:0===(null===d||void 0===d?void 0:d.length),icon:(0,a.Y)(m.In,{name:"deleteMenu"})}],x=document.querySelector(m.tS);return x&&p&&!u?(0,q.createPortal)((0,a.Y)(wo,{id:po.FOR_SEQUENCE,handleMenuChange:function(e){var t,n=e.id,o=e.props;if(i)switch(!0){case n===vd.modifyInRnaBuilder:i.events.turnOnSequenceEditInRNABuilderMode.dispatch(),l(Ct(ct)),l(Nn(!0)),l(Mn({})),l(Dn(null)),null!==c&&void 0!==c&&null!==(t=c.selectedSequenceLabeledNodes)&&void 0!==t&&t.length&&null!==c&&void 0!==c&&c.title&&(l(On(null===c||void 0===c?void 0:c.title)),l(kn(null===c||void 0===c?void 0:c.selectedSequenceLabeledNodes)),l(In(null===c||void 0===c?void 0:c.isSequenceFirstsOnlyNucleoelementsSelected)));break;case n===vd.startNewSequence:i.events.startNewSequence.dispatch(o.sequenceItemRenderer);break;case n===vd.editSequence:i.events.editSequence.dispatch(o.sequenceItemRenderer);break;case n===vd.createRnaAntisenseStrand:i.events.createAntisenseChain.dispatch(!1);break;case n===vd.createDnaAntisenseStrand:i.events.createAntisenseChain.dispatch(!0);break;case n===vd.establishHydrogenBond:i.events.establishHydrogenBond.dispatch(o.sequenceItemRenderer);break;case n===vd.deleteHydrogenBond:var a,d=h.HQ1.sequenceViewModel.chainsCollection.monomerToChain,u=new Map;(null!==r&&void 0!==r&&r.length?r.reduce(function(e,t){return[].concat((0,T.A)(e),(0,T.A)(t))},[]).map(function(e){return e.twoStrandedNode}):[null===(a=o.sequenceItemRenderer)||void 0===a?void 0:a.twoStrandedNode]).forEach(function(e){if(e.antisenseChain&&e.antisenseNode&&!(e.antisenseNode instanceof h.RR||e.antisenseNode instanceof h.Dzo)){u.has(e.antisenseChain)||u.set(e.antisenseChain,new Set);var t=u.get(e.antisenseChain);if(!t)return;t.add(e)}});var p=!1;u.forEach(function(e,t){var n=(0,T.A)(e.values())[0].chain,r=new Set((0,T.A)(e.values()).map(function(e){return e.antisenseNode}));t.nodes.some(function(e){return!r.has(e)&&e.monomers.some(function(e){return e.hydrogenBonds.some(function(t){var r=t.getAnotherMonomer(e);return(r&&d.get(r))===n})})})||(p=!0)}),p?i.events.openConfirmationDialog.dispatch({title:"Deletion of all Hydrogen Bonds",confirmationText:"Deleting all hydrogen bonds will cause the separation of two chains. Do you wish to proceed?",onConfirm:function(){i.events.deleteHydrogenBond.dispatch(o.sequenceItemRenderer)}}):i.events.deleteHydrogenBond.dispatch(o.sequenceItemRenderer);break;case null===n||void 0===n?void 0:n.startsWith(Ad):var m=null===n||void 0===n?void 0:n.replace(Ad,"");i.events.modifyAminoAcids.dispatch({monomers:s,modificationType:m});break;case"copy"===n:i.events.copySelectedStructure.dispatch();break;case"paste"===n:i.events.pasteFromClipboard.dispatch();break;case"delete"===n:i.events.deleteSelectedStructure.dispatch()}},menuItems:y}),x):null};var Id=(0,L.A)("div",{target:"e1amohl43"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",function(e){return e.theme.ketcher.color.background.primary},";border:",function(e){return e.theme.ketcher.border.regular},";border-radius:",function(e){return e.theme.ketcher.border.radius.regular},";box-shadow:",function(e){return e.theme.ketcher.shadow.regular},";"),Dd=(0,L.A)("p",{target:"e1amohl42"})("width:calc(100% - 16px);padding:8px;color:",function(e){return e.theme.ketcher.color.text.primary},";background-color:#cceaee;font-size:",function(e){return e.theme.ketcher.font.size.regular},";font-weight:700;word-break:break-all;text-align:left;margin:0;white-space:pre-wrap;"),Sd=(0,L.A)(m.c9,{target:"e1amohl41"})({name:"156nqlv",styles:"height:100%;width:100%;padding:0 8px"}),Yd=(0,L.A)("div",{target:"e1amohl40"})({name:"10sp49k",styles:"width:100%;display:flex;gap:8px;padding:0 8px 4px"}),Ed=function(e){var t=e.monomerCaps,n=e.attachmentPointsToBonds;return(0,c.useMemo)(function(){var e=[],r=[];return t?(Object.entries(t).forEach(function(t){var o=(0,i.A)(t,2),a=o[0],l=o[1],c=Boolean(null===n||void 0===n?void 0:n[a]);c&&r.push(a);var d={id:a,label:Kl(l),connected:c};e.push(d)}),{preparedAttachmentPointsData:e,connectedAttachmentPoints:r}):{preparedAttachmentPointsData:e,connectedAttachmentPoints:r}},[t,n])},Pd=function(e){var t=e.idtAliases,n=e.attachmentPointsToBonds,r=e.monomerClass;return(0,c.useMemo)(function(){if(!t)return null;var e=t.base,o=t.modifications;if(!o)return Nr(e);var a=o.endpoint5,l=o.internal,c=o.endpoint3;if(n){var d,s,u=n.R1,p=n.R2;return r===h.IPc.Phosphate&&u&&!(u instanceof h.t$8)&&u.firstMonomer instanceof h.HvV?null:Nr(null!==u&&null===p?null!==c&&void 0!==c?c:l:null===u&&null!==p?null!==a&&void 0!==a?a:l:null!==u&&null!==p?null!==(d=null!==l&&void 0!==l?l:a)&&void 0!==d?d:c:null!==(s=null!==a&&void 0!==a?a:l)&&void 0!==s?s:c)}var m=Object.values(o).every(function(t){return t.includes(e)});if(c&&a&&l&&m)return Nr(e);var f={};return Object.values(o).forEach(function(e){var t,n=null!==(t=Nr(e))&&void 0!==t?t:"",r=[n.charAt(0),n.slice(1)],o=r[0],i=r[1];f[i]=f[i]?[].concat((0,T.A)(f[i]),[o]):[o]}),Object.entries(f).map(function(e){var t=(0,i.A)(e,2),n=t[0],r=t[1];return"(".concat(r.join(", "),")").concat(n)}).join(", ")},[t,n,r])};var Ld=(0,L.A)("span",{target:"epjjwrk3"})("width:max-content;max-width:100%;display:flex;flex-direction:column;align-items:flex-start;font-size:",function(e){return e.theme.ketcher.font.size.regular},";font-weight:500;line-height:normal;color:",function(e){return e.theme.ketcher.color.text.lightgrey},";padding-left:",function(e){return e.preset?"0":"8px"},";border-left:",function(e){return e.preset?"none":"1px solid #D9DCEA"},";"),jd=(0,L.A)("p",{target:"epjjwrk2"})({name:"ti75j2",styles:"margin:0"}),Nd=(0,L.A)("span",{target:"epjjwrk1"})({name:"3myie7",styles:"color:#7c7c7c;margin-right:4px"}),Fd=(0,L.A)("span",{target:"epjjwrk0"})({name:"9ig07c",styles:"color:#585858;white-space:normal;overflow-wrap:anywhere;word-break:break-word"});function Td(e){var t=e.idtAliasesText,n=e.axoLabsText,r=e.helmText,o=e.modificationTypeText,i=e.preset,l=[].concat((0,T.A)(t?[{label:"IDT",text:t}]:[]),(0,T.A)(n?[{label:"AxoLabs",text:n}]:[]),(0,T.A)(r?[{label:"HELM",text:r}]:[]),(0,T.A)(o?[{label:"Modification type",text:o}]:[]));return l.length?(0,a.Y)(Ld,{preset:i,children:l.map(function(e){return(0,a.FD)(jd,{children:[(0,a.FD)(Nd,{children:[e.label,":"]}),(0,a.Y)(Fd,{children:e.text})]},e.label)})}):null}var Bd=(0,L.A)("div",{target:"e112ss7f3"})({name:"1m2mukt",styles:"flex:1;display:flex;align-items:center;flex-wrap:wrap;gap:8px;font-size:12px;line-height:14px"}),zd=(0,L.A)("div",{target:"e112ss7f2"})("display:flex;align-items:center;gap:2px;border-radius:4px;background-color:",function(e){return e.connected?"#E1E5EA":"transparent"},";padding:",function(e){return e.connected?"4px":"0"},";color:",function(e){return e.connected?"#8A8B8E":"inherit"},";"),Rd=(0,L.A)("span",{target:"e112ss7f1"})({name:"f3vz0n",styles:"font-weight:500"}),Hd=(0,L.A)("span",{target:"e112ss7f0"})({name:"16ceglb",styles:"font-weight:600"}),_d=function(e){var t=e.preparedAttachmentPointsData;return t.length?(0,a.Y)(Bd,{children:t.map(function(e){var t=e.id,n=e.connected,r=e.label;return(0,a.FD)(zd,{connected:n,children:[(0,a.FD)(Rd,{children:[t,!n&&":"]}),!n&&(0,a.Y)(Hd,{children:r})]},t)})}):null},qd=(0,L.A)(function(e){var t,n=e.className,r=Tr(Le),o=r.monomer,i=r.attachmentPointsToBonds,l=null===o||void 0===o?void 0:o.props.idtAliases,c=null===o||void 0===o?void 0:o.props.aliasAxoLabs,d=null===o||void 0===o?void 0:o.props.aliasHELM,s=null===o||void 0===o?void 0:o.props.modificationTypes,u=Ed({monomerCaps:null===o||void 0===o?void 0:o.props.MonomerCaps,attachmentPointsToBonds:i}),p=u.preparedAttachmentPointsData,m=u.connectedAttachmentPoints,f=Pd({idtAliases:l,attachmentPointsToBonds:i,monomerClass:null===o||void 0===o?void 0:o.props.MonomerClass});if(!o)return null;var v=o.props.unresolved,g=v?o.label:(null===(t=o.struct)||void 0===t?void 0:t.name)||o.label,b=f||c||d||s;return(o.struct||v)&&(0,a.FD)(Id,{className:n,"data-testid":"polymer-library-preview","data-idtaliases":null!==f&&void 0!==f?f:void 0,"data-axolabs":null!==c&&void 0!==c?c:void 0,"data-helm":null!==d&&void 0!==d?d:void 0,"data-modificationtype":s?Array.isArray(s)?s.join(", "):s:void 0,children:[g&&(0,a.Y)(Dd,{"data-testid":"preview-tooltip-title",children:g}),v?(0,a.Y)(Xl,{}):(0,a.Y)(Sd,{struct:o.struct,options:{connectedMonomerAttachmentPoints:m,usageInMacromolecule:h.HT5.MonomerPreview,labelInPreview:!0,needCache:!1}}),(0,a.FD)(Yd,{children:[(0,a.Y)(_d,{preparedAttachmentPointsData:p}),b&&(0,a.Y)(Td,{idtAliasesText:null!==f&&void 0!==f?f:void 0,axoLabsText:null!==c&&void 0!==c?c:void 0,helmText:null!==d&&void 0!==d?d:void 0,modificationTypeText:Array.isArray(s)?s.join(", "):s})]})]})},{target:"e86yc5p0"})("width:",m.VH.width+"px",";height:",m.VH.height+"px",";"),Vd=qd;var Wd=(0,L.A)("div",{target:"ec5fs975"})("display:flex;flex-direction:column;align-items:center;gap:8px;padding:8px;background:",function(e){return e.theme.ketcher.color.background.primary},";border:",function(e){return e.theme.ketcher.border.regular},";border-radius:",function(e){return e.theme.ketcher.border.radius.regular},";box-shadow:",function(e){return e.theme.ketcher.shadow.regular},";"),Ud=(0,L.A)("div",{target:"ec5fs974"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Kd=(0,L.A)("div",{target:"ec5fs973"})("font-size:",function(e){return e.theme.ketcher.font.size.regular},";line-height:",function(e){return e.theme.ketcher.font.size.regular},";font-weight:600;padding-right:2px;"),Qd=(0,L.A)("div",{target:"ec5fs972"})("color:",function(e){return e.theme.ketcher.color.text.lightgrey},";font-size:",function(e){return e.theme.ketcher.font.size.regular},";font-weight:400;white-space:nowrap;"),Gd=(0,L.A)("p",{target:"ec5fs971"})("color:",function(e){return e.theme.ketcher.color.text.primary},";font-size:",function(e){return e.theme.ketcher.font.size.regular},";font-weight:700;word-break:break-all;text-align:center;margin-top:0;margin-bottom:8px;"),Zd=(0,L.A)(m.In,{target:"ec5fs970"})("height:14px;width:14px;margin-right:4px;color:",function(e){return e.theme.ketcher.color.icon.grey},";stroke:",function(e){return e.theme.ketcher.color.icon.grey},";"),Xd=function(e){var t=e.presetName,n=e.position,r=e.idtAliases;return(0,c.useMemo)(function(){if(!t||!r)return null;if(t.includes("MOE")){var e,i,a,l=r.base,c=r.modifications,d=null!==(e=Nr(null===c||void 0===c?void 0:c.endpoint5))&&void 0!==e?e:"5".concat(l),s=null!==(i=Nr(null===c||void 0===c?void 0:c.internal))&&void 0!==i?i:"i".concat(l),u=null!==(a=Nr(null===c||void 0===c?void 0:c.endpoint3))&&void 0!==a?a:"3".concat(l);switch(n){case o.Library:return"".concat(d,", ").concat(s);case o.ChainStart:return d;case o.ChainMiddle:return s;case o.ChainEnd:return u}}return Nr(r.base)},[t,n,r])},Jd=["sugar","base","phosphate"],$d=(0,L.A)(function(e){var t=e.className,n=Tr(Le),r=n.monomers,o=n.name,l=n.position,c=n.idtAliases,d=r.every(function(e){return(null===e||void 0===e?void 0:e.props.MonomerClass)===h.IPc.CHEM}),s=(0,i.A)(r,2)[1],u=null!==o&&void 0!==o?o:null===s||void 0===s?void 0:s.props.Name,p=null===s||void 0===s?void 0:s.props.aliasAxoLabs,m=Xd({presetName:u,position:l,idtAliases:c}),f=m||p;return(0,a.FD)(Wd,{className:t,style:{alignItems:"flex-start"},"data-testid":"polymer-library-preview",children:[(0,a.Y)(Gd,{"data-testid":"preview-tooltip-title",children:u}),r.map(function(e,t){return e?(0,a.FD)(Ud,{children:[(0,a.Y)(Zd,{name:d?"chem":Jd[t]}),(0,a.Y)(Kd,{children:e.label}),(0,a.FD)(Qd,{children:["(",e.props.Name,")"]})]},e.props.id):null}),f&&(0,a.Y)(Td,{preset:!0,idtAliasesText:null!==m&&void 0!==m?m:void 0,axoLabsText:p})]})},{target:"e1wupxfd0"})(""),es=$d,ts=(0,L.A)("div",{target:"envzkt90"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",function(e){return e.theme.ketcher.color.background.primary},";border:",function(e){return e.theme.ketcher.border.regular},";border-radius:",function(e){return e.theme.ketcher.border.radius.regular},";box-shadow:",function(e){return e.theme.ketcher.shadow.regular},";"),ns=(0,L.A)("div",{target:"e1m0yzrp2"})(function(e){var t=e.connected,n=e.inBond,r=e.theme;return{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",color:n||!t?r.ketcher.color.text.primary:"#B4B9D6"}},""),rs=(0,L.A)("p",{target:"e1m0yzrp1"})(function(e){return{margin:0,fontSize:e.theme.ketcher.font.size.small,lineHeight:"12px"}},""),os=(0,L.A)("p",{target:"e1m0yzrp0"})(function(e){var t=e.inBond;return{margin:0,padding:"4px",fontWeight:e.theme.ketcher.font.weight.bold,lineHeight:"14px",borderRadius:"4px",backgroundColor:t?"#CDF1FC":"transparent"}},""),is=function(e){var t=e.attachmentPoints,n=e.attachmentPointInBond;return(0,a.Y)(a.FK,{children:t.map(function(e){return(0,a.FD)(ns,{connected:e.connected,inBond:e.id===n,children:[(0,a.Y)(rs,{children:e.id}),(0,a.Y)(os,{inBond:e.id===n,children:e.label})]},e.id)})})},as=(0,L.A)(function(e){var t=e.className,n=Tr(Le),r=n.polymerBond,o=n.style,i=(0,c.useMemo)(function(){var e,t,n;return o?(0,L.A)(ts,{target:"e18hk05c1"})("top:",null!==(e=null===o||void 0===o?void 0:o.top)&&void 0!==e?e:"",";left:",null!==(t=null===o||void 0===o?void 0:o.left)&&void 0!==t?t:"",";right:",null!==(n=null===o||void 0===o?void 0:o.right)&&void 0!==n?n:"",";"):(0,L.A)(ts,{target:"e18hk05c2"})("")},[o]),l=r.firstMonomer,d=r.secondMonomer,s=r.firstMonomerAttachmentPoint,u=r.secondMonomerAttachmentPoint,p=Ed({monomerCaps:l.monomerCaps,attachmentPointsToBonds:l.attachmentPointsToBonds}),m=p.preparedAttachmentPointsData,f=p.connectedAttachmentPoints,v=Ed({monomerCaps:null===d||void 0===d?void 0:d.monomerCaps,attachmentPointsToBonds:null===d||void 0===d?void 0:d.attachmentPointsToBonds}),g=v.preparedAttachmentPointsData,b=v.connectedAttachmentPoints;return l&&d?(0,a.Y)(i,{className:t,"data-testid":"polymer-library-preview",children:(0,a.Y)(ic,{firstMonomer:l,secondMonomer:d,firstMonomerOverview:(0,a.Y)(ec,{monomer:l,usage:h.HT5.BondPreview,connectedAttachmentPoints:f,selectedAttachmentPoint:s,attachmentPoints:(0,a.Y)(is,{attachmentPoints:m,attachmentPointInBond:s})}),secondMonomerOverview:(0,a.Y)(ec,{monomer:d,usage:h.HT5.BondPreview,connectedAttachmentPoints:b,selectedAttachmentPoint:u,attachmentPoints:(0,a.Y)(is,{attachmentPoints:g,attachmentPointInBond:u})})})}):null},{target:"e18hk05c0"})("width:",m.VH.widthForBond,"px;height:",m.VH.heightForBond,"px;"),ls=as;function cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cs(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ss=(0,L.A)("div",{target:"e88xzqx0"})("display:inline-block;position:absolute;background:",function(e){return e.theme.ketcher.color.background.primary},";z-index:",function(e){return e.theme.ketcher.zIndex.overlay},";"),us=function(){var e=Tr(Le),t=(0,c.useRef)(null),n=(0,c.useState)(!1),o=(0,i.A)(n,2),d=o[0],s=o[1],u=(0,l.d4)(Fe);return(0,c.useEffect)(function(){if(t.current&&!e.style)if(null!==e&&void 0!==e&&e.type){var n,r,o;t.current.setAttribute("style",""),s(!0);var i=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect(),a=(null===i||void 0===i?void 0:i.height)||0,l=(null===i||void 0===i?void 0:i.width)||0,c=null===(r=h.OQ2.instance)||void 0===r||null===(r=r.canvasWrapper.node())||void 0===r?void 0:r.getBoundingClientRect(),p=(null===c||void 0===c?void 0:c.top)||0,m=(null===c||void 0===c?void 0:c.bottom)||0,f=(null===c||void 0===c?void 0:c.left)||0,v=(null===c||void 0===c?void 0:c.right)||0,g=null===(o=e.target)||void 0===o?void 0:o.getBoundingClientRect(),b=(null===g||void 0===g?void 0:g.top)||0,y=(null===g||void 0===g?void 0:g.bottom)||0,x=(null===g||void 0===g?void 0:g.left)||0,w=(null===g||void 0===g?void 0:g.width)||0,A=x-w/2,C=null===u||void 0===u?void 0:u.ketcherRootElementBoundingClientRect,M=(null===C||void 0===C?void 0:C.x)||0,k=(null===C||void 0===C?void 0:C.y)||0,O=b-a-5-k,I=y+5-k,D=x+w/2-l/2-M;if(t.current.style.top="".concat(b-a-5>=p||y+a>m&&y>m/2?O:I,"px"),A>l/2&&A+l/2<v)t.current.style.left="".concat(D,"px");else if(A<l/2)t.current.style.left="".concat(f,"px");else{t.current.style.left="".concat(v-l-10,"px")}}else d&&(s(!1),t.current.setAttribute("style",""))},[e]),e?(0,a.FD)(ss,{ref:t,style:ds({},null===e||void 0===e?void 0:e.style),children:[e.type===r.Monomer&&(0,a.Y)(Vd,{}),e.type===r.Preset&&(0,a.Y)(es,{}),e.type===r.Bond&&(0,a.Y)(ls,{}),e.type===r.AmbiguousMonomer&&(0,a.Y)(m.ye,{preview:e})]}):null},ps=(0,L.A)(O.A,{target:"e1brfei30"})(function(e){var t=e.theme,n=e.variant;return{color:"outlined"===n?t.ketcher.color.text.primary:t.ketcher.color.button.text.primary,boxShadow:"none",transition:"none",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:"4px 8px",border:"outlined"===n?t.ketcher.outline.small:"none",background:"outlined"===n?t.ketcher.color.background.primary:t.ketcher.color.button.group.active,borderRadius:t.ketcher.border.radius.regular,textTransform:"none",fontSize:t.ketcher.font.size.regular,fontWeight:t.ketcher.font.weight.regular,":hover":{color:"outlined"===n?t.ketcher.color.text.dark:t.ketcher.color.button.text.primary,background:"outlined"===n?t.ketcher.color.background.primary:t.ketcher.color.button.group.hover,boxShadow:"none"},":disabled":{cursor:"auto",background:"#e1e5ea",outline:"none"}}},""),hs=function(){var e=Tr(Fe),t=(0,c.useState)(null===e||void 0===e?void 0:e.events.changeSequenceTypeEnterMode),n=(0,i.A)(t,2),r=n[0],o=n[1],l=(0,c.useState)(!1),d=(0,i.A)(l,2),s=d[0],u=d[1],p=Tr(Te),m=Br(),f=!!p,v=Fr(),g=function(e){var t="object"===(0,ee.A)(e)?e.mode:e;u("sequence-layout-mode"===t)};(0,c.useEffect)(function(){return null===e||void 0===e||e.events.selectMode.add(g),null===e||void 0===e||e.events.changeSequenceTypeEnterMode.add(function(e){v(Ct(e===et?lt:ct)),o(e)}),null===e||void 0===e||e.events.changeSequenceTypeEnterMode.dispatch(h.Qjs.RNA),function(){null===e||void 0===e||e.events.selectMode.remove(g)}},[e]),(0,c.useEffect)(function(){g(m)},[m]);var b=function(t){null===e||void 0===e||e.events.changeSequenceTypeEnterMode.dispatch(t)};return s?(0,a.Y)(S.A,{sx:{mr:1,ml:1},children:(0,a.FD)(Y.A,{disabled:f,children:[(0,a.Y)(ps,{"data-testid":"".concat(h.Qjs.RNA,"Btn"),title:"RNA (Ctrl+Alt+R)",variant:r===h.Qjs.RNA?"contained":"outlined",onClick:function(){return b(h.Qjs.RNA)},children:"RNA"}),(0,a.Y)(ps,{"data-testid":"".concat(h.Qjs.DNA,"Btn"),title:"DNA (Ctrl+Alt+D)",variant:r===h.Qjs.DNA?"contained":"outlined",onClick:function(){return b(h.Qjs.DNA)},children:"DNA"}),(0,a.Y)(ps,{"data-testid":"".concat(h.Qjs.PEPTIDE,"Btn"),title:"Peptides (Ctrl+Alt+P)",variant:r===h.Qjs.PEPTIDE?"contained":"outlined",onClick:function(){return b(h.Qjs.PEPTIDE)},children:"PEP"})]})}):null},ms=function(){var e=Fr(),t=Tr(Fe),n=Tr(We),r=Tr(Ue),o=Tr(Ke),i=Tr(Qe);return function(){var a=(0,U.A)(Q().mark(function a(l){var c,d,s,u,p,f,v,g,b,y,x;return Q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&!l){a.next=2;break}return a.abrupt("return");case 2:if(d=m.e3.getIndigo(),s=t.drawingEntitiesManager.filterSelection(),u=new h.BBJ,p=s.hasDrawingEntities?s:t.drawingEntitiesManager,f=h.NbU.fromMonomers((0,T.A)(p.monomers.values())),v=null===(c=f.firstNode)||void 0===c?void 0:c.monomer,g=!v||f.chains.reduce(function(e,t){return e+t.monomers.length},0)<=(0,h.eXT)(v).length,p.hasDrawingEntities&&g){a.next=12;break}return e(ke(void 0)),a.abrupt("return");case 12:return b=u.serialize(new h._kM,t.drawingEntitiesManager,void 0,!1,!0),a.next=15,d.calculateMacromoleculeProperties({struct:b},{upc:o/ue[n],nac:i/ue[r]});case 15:y=a.sent;try{x=y.properties&&JSON.parse(y.properties),(0,h.qHi)(),e(ke(x))}catch(w){h.$yr.error("Error during parsing macromolecule properties: ",w),e(ke(void 0))}case 17:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},fs=["className"];function vs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gs(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gs(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function gs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var xs="Other",ws=function(e,t){var n,r=null===e||void 0===e||null===(n=e.monomerCount)||void 0===n?void 0:n[t];return r&&Object.keys(r).length>0},As=(0,L.A)("div",{target:"eifx56c30"})(function(e){return{width:"100%",height:e.hasError?"124px":"177px",position:"relative",backgroundColor:"white",padding:"2px 0",borderRadius:"8px 8px",overflow:"hidden",boxShadow:"0px 2px 5px rgba(103, 104, 132, 0.15)"}},""),Cs=(0,L.A)("div",{target:"eifx56c29"})(function(){return{display:"flex"}},""),Ms=(0,L.A)("div",{target:"eifx56c28"})(function(){return{flex:1,display:"flex",justifyContent:"center"}},""),ks=(0,L.A)(m.In,{target:"eifx56c27"})(function(){return{display:"flex",alignItems:"center",width:"12px",height:"12px",padding:"2px 6px",cursor:"pointer"}},""),Os=(0,L.A)("div",{target:"eifx56c26"})(function(){return{display:"flex",height:"25px",alignItems:"center",padding:"0 8px"}},""),Is=(0,L.A)("div",{target:"eifx56c25"})(function(){return{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"700",padding:"0 8px",color:"#585858"}},""),Ds=(0,L.A)("div",{target:"eifx56c24"})(function(){return{display:"flex",alignItems:"center",height:"24px",borderLeft:"1px solid #CAD3DD",color:"#585858"}},""),Ss=(0,L.A)("div",{target:"eifx56c23"})(function(){return{fontSize:"14px",fontWeight:"700",padding:"0 8px"}},""),Ys=(0,L.A)("div",{target:"eifx56c22"})(function(){return{width:"100%",height:"100%",top:"-25px",position:"relative"}},""),Es=(0,L.A)("div",{target:"eifx56c21"})(function(){return{width:"100%",padding:"0 4px 4px"}},""),Ps=(0,L.A)("div",{target:"eifx56c20"})(function(){return{display:"flex",width:"100%",height:"74px",flexDirection:"column",justifyContent:"center",alignItems:"center"}},""),Ls=(0,L.A)("div",{target:"eifx56c19"})(function(){return{fontSize:"14px"}},""),js=(0,L.A)("div",{target:"eifx56c18"})(function(){return{fontSize:"12px"}},""),Ns=(0,L.A)("div",{target:"eifx56c17"})(function(){return{display:"flex",padding:"4px 0px",height:"32px",gap:"12px"}},""),Fs=(0,L.A)("div",{target:"eifx56c16"})(function(){return{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0 2px"}},""),Ts=(0,L.A)("div",{target:"eifx56c15"})(function(){return{height:"90px",backgroundColor:"white",borderRadius:"8px",padding:"5px"}},""),Bs=(0,L.A)("div",{target:"eifx56c14"})(function(){return{display:"flex",justifyContent:"space-between"}},""),zs=(0,L.A)("div",{target:"eifx56c13"})(function(){return{display:"grid",gridTemplateColumns:"2fr 1fr"}},""),Rs=(0,L.A)("div",{target:"eifx56c12"})(function(e){var t=e.disabled;return{display:"flex",alignItems:"center",padding:"0 0 0 6px",pointerEvents:t?"none":"auto",opacity:t?.5:1}},""),Hs=(0,L.A)(function(e){var t=e.className,n=(0,G.A)(e,fs);return(0,a.Y)(te.A,ys(ys({},n),{},{classes:{popper:t}}))},{target:"eifx56c11"})(function(){return(0,j.A)({},"& .".concat(ne.A.tooltip),{maxWidth:"220px",padding:"12px",backgroundColor:"white",color:"rgba(0, 0, 0, 0.87)",boxShadow:"0 1px 5px 0 #CCCCCC",fontSize:11})},""),_s=(0,L.A)("div",{target:"eifx56c10"})(function(){return{display:"flex",flexDirection:"column",gap:"4px",fontSize:"12px",fontWeight:"700",color:"#585858",borderBottom:"1px solid #585858",paddingBottom:"8px",marginBottom:"8px"}},""),qs=(0,L.A)("div",{target:"eifx56c9"})(function(){return{fontSize:"10px",paddingRight:"5px",whiteSpace:"nowrap"}},""),Vs=(0,L.A)("div",{target:"eifx56c8"})(function(){return{fontSize:"14px",fontWeight:"700"}},""),Ws=(0,L.A)(m.In,{target:"eifx56c7"})(function(){return{width:"20px",height:"20px"}},""),Us=(0,L.A)("div",{target:"eifx56c6"})(function(){return{display:"flex",alignItems:"center"}},""),Ks=(0,L.A)(Ga,{target:"eifx56c5"})(function(){return{position:"relative",padding:"0 0 0 5px",zIndex:1}},""),Qs="text-input-field-input",Gs=(0,L.A)(jl,{target:"eifx56c4"})(function(){return(0,j.A)({margin:0},".".concat(Qs),{width:"60px","::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0},MozAppearance:"textfield"})},""),Zs=(0,L.A)("div",{target:"eifx56c3"})(function(){return{display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gap:"4px 6px",width:"100%",backgroundColor:"white",borderRadius:"8px",padding:"6px",height:"90px",alignContent:"flex-start"}},""),Xs=(0,L.A)("div",{target:"eifx56c2"})("display:flex;position:relative;justify-content:space-between;background-color:#eff2f5;padding:4px 6px;font-weight:500;font-size:12px;border-radius:2px;min-width:50px;flex:1;opacity:",function(e){return e.disabled?.4:1},";&:after{content:'';position:absolute;bottom:0;left:0;width:15px;height:2px;background:",function(e){var t,n=e.theme,r=e.monomerShortName;return(null===(t=(e.isPeptide?n.ketcher.peptide.color:n.ketcher.monomer.color)[r])||void 0===t?void 0:t.regular)||n.ketcher.monomer.color.default.regular},";border-radius:0 0 0 2px;}"),Js=(0,L.A)("div",{target:"eifx56c1"})(function(){return{fontWeight:"700"}},""),$s=function(e){var t=(e.isPeptide?h.Q_X:h.b$S).map(function(t){return[t,e.monomerCount[t]||0]});return t.push([xs,e.monomerCount[xs]||0]),t.sort(function(e,t){return e[0]===xs?1:e[0].localeCompare(t[0])}),(0,a.Y)(Zs,{children:ae()(t,function(t){var n=(0,i.A)(t,2),r=n[0],o=n[1];return(0,a.FD)(Xs,{monomerShortName:r,"data-testid":r+"-option",isPeptide:e.isPeptide,disabled:0===o,children:[(0,a.Y)(Js,{children:r}),(0,a.Y)("div",{children:o})]},r)})})},eu=function(e){var t;return(0,a.Y)(Rs,{"data-testid":e.testId,disabled:e.disabled,children:(0,a.FD)(a.FK,{children:[(0,a.FD)(qs,{children:[e.name,void 0!==e.value&&":"]}),e.onChangeValue?(0,a.Y)(Gs,{value:null!==(t=e.value)&&void 0!==t?t:"",id:"macromolecule-property-".concat(e.name),"data-testid":"".concat(e.testId,"-input"),type:"number",min:0,inputClassName:Qs,onChange:function(t){var n;return null===e||void 0===e||null===(n=e.onChangeValue)||void 0===n?void 0:n.call(e,Number(t))}}):(0,a.Y)(Vs,{"data-testid":e.testId+"-value",children:e.value}),e.hint&&(0,a.Y)(Hs,{title:e.hint,children:(0,a.Y)(Us,{children:(0,a.Y)(Ws,{name:"about",dataTestId:e.name+"-info"})})}),e.options&&e.selectedOption&&e.onChangeOption&&(0,a.Y)(Ks,{options:e.options.map(function(e){return{id:e,label:e}}),testId:e.testId+"-selector",currentSelection:e.selectedOption,selectionHandler:e.onChangeOption})]})})},tu=function(e){var t=e.part,n=t.match(/^([A-Za-z]+)(\d+)$/);if(!n)return t;var r=(0,i.A)(n,3);r[0];var o=r[1],l=r[2];return(0,a.FD)("span",{children:[o,(0,a.Y)("sub",{children:l})]})},nu=(0,L.A)("svg",{target:"eifx56c0"})(function(){return{width:"100%",height:"100%"}},"");var ru,ou,iu=function(e){return e<1?0:e<2?1:e<3?2:e<5?3:e<10?5:e<100?10*Math.floor(e/10):e<1e3?50*Math.floor(e/50):100*Math.floor(e/100)},au=function(e){var t=e.data,n=function(e,t,n){var r=e.length;if(n>=r||0===n)return{xs:e,ys:t};for(var o=[e[0]],i=[t[0]],a=(r-2)/(n-2),l=0,c=0;c<n-2;c++){for(var d=Math.floor((c+1)*a)+1,s=Math.floor((c+2)*a)+1,u=0,p=0,h=s-d,m=d;m<s;m++)u+=e[m],p+=t[m];u/=h,p/=h;for(var f=Math.floor(c*a)+1,v=Math.floor((c+1)*a)+1,g=-1,b=f,y=f;y<v;y++){var x=Math.abs((e[l]-u)*(t[y]-t[l])-(e[l]-e[y])*(p-t[l]));x>g&&(g=x,b=y)}o.push(e[b]),i.push(t[b]),l=b}return o.push(e[r-1]),i.push(t[r-1]),{xs:o,ys:i}}(t.map(function(e,t){return t+1}),t,100),r=(0,c.useState)(0),o=(0,i.A)(r,2),l=o[0],d=o[1],s=(0,c.useRef)(null);(0,c.useEffect)(function(){if(n.xs.length&&s.current){var e=s.current.width.baseVal.value,r=s.current.height.baseVal.value,o=10,i=10,a=20,l=30;V.Ltv(s.current).selectAll("*").remove();var c,d,u=V.m4Y().domain([0,n.xs.length-1]).range([l,e-i]),p=V.m4Y().domain([0,1]).range([r-a,o]),h=V.n8j().x(function(e,t){return u(t)}).y(function(e){return p(e)}).curve(V.lUB),m=V.Ltv(s.current),f=(c=e)>360?5:c>300?4:c>240?3:2,v=iu(t.length/f),g=v;if(v>=1){for(var b=-1/0,y=-1/0,x=-1/0,w=2;w<=f;w++){var A=w,C=iu(t.length/A),M=Number((C*(A/t.length)).toFixed(2));(M>x||M===x&&A>b)&&(b=A,x=M,y=C)}d=Array.from({length:b},function(e,t){return n.xs.findLastIndex(function(e){return e<=(t+1)*y&&e>t*y})}),g=y}else d=(0,T.A)(Array(Math.min(f,n.xs.length)).keys()),g=1;var k=V.l78(u).tickValues(d).tickFormat(function(e,t){return((t+1)*g).toString()});m.append("g").attr("transform","translate(0,".concat(r-a,")")).call(k).call(function(e){return e.select(".domain").remove()}).call(function(e){return e.selectAll("line").attr("stroke","#CAD3DD").attr("y1",-r)}).call(function(e){return e.selectAll("text").attr("font-size","8px")});var O=V.V4s(p).tickValues([0,.5,1]).tickFormat(V.GPZ(".1f"));m.append("g").attr("transform","translate(".concat(l,",0)")).call(O).call(function(e){return e.select(".domain").remove()}).call(function(t){t.selectAll("line").each(function(t,n,r){.5===t?V.Ltv(r[n]).attr("x1",e).attr("stroke","#CAD3DD").attr("stroke-dasharray",2):V.Ltv(r[n]).remove()})}).call(function(e){return e.selectAll("text").attr("font-size","8px")}),m.append("path").datum(n.ys).attr("fill","none").attr("stroke","#167782").attr("stroke-width",1).attr("d",h)}},[t,l]);var u=new ResizeObserver((0,p.debounce)(function(e){var t,n=vs(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.contentRect.width!==l&&d(r.contentRect.width)}}catch(o){n.e(o)}finally{n.f()}},100));return(0,c.useEffect)(function(){return s.current&&u.observe(s.current),function(){u.disconnect()}},[s,l]),(0,a.Y)(nu,{"data-testid":"Hydrophobicity-Chart",ref:s})},lu=function(e){return e.isError?(0,a.FD)(Ps,{children:[(0,a.Y)(Ls,{children:"No Data Available"}),(0,a.Y)(js,{children:"Select monomer, chain or part of a chain"})]}):(0,a.FD)(Es,{children:[(0,a.FD)(zs,{children:[(0,a.FD)(Ns,{children:[(0,a.Y)(eu,{name:"Isoelectric Point",testId:"Isoelectric Point",value:(0,p.isNumber)(e.macromoleculesProperties.pKa)?oe()(e.macromoleculesProperties.pKa,2):"\u2013",hint:"The isoelectric point is calculated as the median of all pKa values for the structure."}),(0,a.Y)(eu,{name:"Extinction Coef.(1/Mcm)",testId:"Extinction Coefficient",value:(0,p.isNumber)(e.macromoleculesProperties.extinctionCoefficient)?oe()(e.macromoleculesProperties.extinctionCoefficient):"\u2013",hint:(0,a.FD)("div",{children:["The extinction coefficient for wavelength of 280nm is calculated using the method from"," ",(0,a.Y)("i",{children:"Gill, S.C. and von Hippel, P.H. (1989)."})," Natural analogue is used in place of a modified amino acid."]})})]}),(0,a.Y)(eu,{name:"Hydrophobicity",testId:"Hydrophobicity",hint:(0,a.FD)("div",{children:[(0,a.FD)(_s,{children:[(0,a.Y)("div",{children:"y = Hydrophobicity score"}),(0,a.Y)("div",{children:"x = Position of the amino acid residue"})]}),"The hydrophobicity is calculated using the method from"," ",(0,a.Y)("i",{children:"Black S.D. and Mould D.R. (1991)."})," Natural analogue is used in place of a modified amino acid."]})})]}),(0,a.FD)(Fs,{children:[e.macromoleculesProperties.monomerCount.peptides&&(0,a.Y)($s,{monomerCount:e.macromoleculesProperties.monomerCount.peptides,isPeptide:!0}),(0,a.Y)(Ts,{children:e.macromoleculesProperties.hydrophobicity&&(0,a.Y)(au,{data:e.macromoleculesProperties.hydrophobicity})})]})]})},cu=function(e){return!/[^0.,]/.test(String(e))},du=function(e){var t=Fr(),n=Tr(We),r=Tr(Ue),o=Tr(Ke),i=Tr(Qe);return e.isError?(0,a.FD)(Ps,{children:[(0,a.Y)(Ls,{children:"No Data Available"}),(0,a.Y)(js,{children:"Select a nucleotide/nucleoside, chain or part of a chain containing nucleotides/nucleosides"})]}):(0,a.FD)(Es,{children:[(0,a.FD)(Bs,{children:[(0,p.isNumber)(e.macromoleculesProperties.Tm)?(0,a.Y)(eu,{name:"Melting Temp. (\xb0C)",value:oe()(e.macromoleculesProperties.Tm,1),testId:"Melting-Temperature",hint:(0,a.FD)("div",{children:["The melting temperature is calculated using the method from"," ",(0,a.Y)("i",{children:"Khandelwal G. and Bhyravabhotla J. (2010)."})," Natural analogue is used in place of a modified base."]})}):(0,a.Y)("div",{}),(0,a.FD)(Ns,{children:[(0,a.Y)(eu,{name:"[Unipositive Ions]",value:o,options:["nM","\u03bcM","mM"],testId:"Unipositive Ions",selectedOption:n,disabled:!(0,p.isNumber)(e.macromoleculesProperties.Tm)&&!cu(o),onChangeOption:function(e){t(Oe(e))},onChangeValue:function(e){t(Se(e.toString()))}}),(0,a.Y)(eu,{name:"[Oligonucleotides]",value:i,options:["nM","\u03bcM","mM"],testId:"Oligonucleotides",selectedOption:r,disabled:!(0,p.isNumber)(e.macromoleculesProperties.Tm)&&!cu(i),onChangeOption:function(e){t(Ie(e))},onChangeValue:function(e){t(Ye(e.toString()))}})]})]}),e.macromoleculesProperties.monomerCount.nucleotides&&(0,a.Y)($s,{monomerCount:e.macromoleculesProperties.monomerCount.nucleotides})]})};!function(e){e[e.PEPTIDES=0]="PEPTIDES",e[e.RNA=1]="RNA",e[e.NO_TAB=-1]="NO_TAB"}(ru||(ru={})),function(e){e.Da="Da",e.kDa="kDa",e.MDa="MDa"}(ou||(ou={}));var su,uu=(0,j.A)((0,j.A)((0,j.A)({},ou.Da,1),ou.kDa,1e3),ou.MDa,1e6),pu=function(e){return(0,p.isNumber)(e)?e<1e3?ou.Da:e<1e6?ou.kDa:ou.MDa:ou.Da},hu=function(){var e=Fr(),t=Tr(Fe),n=Tr(Ve),r=Tr(We),o=Tr(Ue),l=Tr(Ke),d=Tr(Qe),s=null===n||void 0===n?void 0:n[0],u=(0,c.useState)(ru.PEPTIDES),h=(0,i.A)(u,2),m=h[0],f=h[1],v=(0,c.useState)(pu(null===s||void 0===s?void 0:s.mass)),g=(0,i.A)(v,2),b=g[0],y=g[1],x=Tr(qe),w=ms(),A=!x,C=(0,c.useRef)(w),M=(0,c.useCallback)((0,p.debounce)(function(e){C.current(e)},500),[]);(0,c.useEffect)(function(){C.current=function(e){w(e)}},[w]),(0,c.useEffect)(function(){return su&&null!==t&&void 0!==t&&t.events.selectEntities.hasHandler(su)&&(null===t||void 0===t||t.events.selectEntities.remove(su)),su=function(){M(A)},null===t||void 0===t||t.events.selectEntities.add(su),function(){null===t||void 0===t||t.events.selectEntities.remove(su)}},[M,t,A]),(0,c.useEffect)(function(){M(A)},[r,o,l,d,A,M]),(0,c.useEffect)(function(){f(ws(s,"nucleotides")?ru.RNA:ru.PEPTIDES),y(pu(null===s||void 0===s?void 0:s.mass))},[s]);var k=!s||n.length>1,O=k||!ws(s,"peptides"),I=k||!ws(s,"nucleotides"),D=(0,c.useMemo)(function(){return null!==s&&void 0!==s&&s.grossFormula?(0,a.Y)(Is,{"data-testid":"Gross-formula",children:null===s||void 0===s?void 0:s.grossFormula.split(" ").map(function(e,t,n){return(0,a.FD)("span",{children:[(0,a.Y)(tu,{part:e}),t<n.length-1?" ":""]},"".concat(e,"-").concat(t))})}):null},[null===s||void 0===s?void 0:s.grossFormula]),S=(0,c.useMemo)(function(){return null!==s&&void 0!==s&&s.mass?(0,a.FD)(a.FK,{children:[(0,a.Y)(Ss,{"data-testid":"Molecular-Mass-Value",children:oe()((null===s||void 0===s?void 0:s.mass)/uu[b],3)})," "]}):null},[null===s||void 0===s?void 0:s.mass,b]);return x?(0,a.FD)(As,{hasError:m===ru.PEPTIDES&&O||m===ru.RNA&&I,"data-testid":"macromolecule-properties-window",children:[(0,a.FD)(Cs,{children:[(0,a.Y)(Ms,{children:(0,a.FD)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.Y)("path",{d:"M2 6H14",stroke:"#333333"}),(0,a.Y)("path",{d:"M2 10H14",stroke:"#333333"})]})}),(0,a.Y)(ks,{name:"close",onClick:function(){e(Ce(!1))},dataTestId:"macromolecule-properties-close"})]}),(0,a.FD)(Os,{children:[D,S&&(0,a.FD)(Ds,{children:[S,(0,a.Y)(Ks,{testId:"Molecular Mass Unit",options:[ou.Da,ou.kDa,ou.MDa].map(function(e){return{id:e,label:e}}),currentSelection:b,selectionHandler:function(e){y(e)}})]})]}),(0,a.Y)(Ys,{children:(0,a.Y)(Sr,{selectedTabIndex:m,onChange:function(e,t){f(t)},isLayoutToRight:!0,tabs:[{caption:"Peptides",testId:"peptides-properties-tab",component:lu,props:{macromoleculesProperties:s,isError:O}},{caption:"RNA/DNA",component:du,testId:"rna-properties-tab",props:{macromoleculesProperties:s,isError:I}}]})})]}):null},mu=(0,h.MxE)(h.KtH),fu=function(e,t){t&&(t.value="".concat(Math.round(e),"%"))},vu=(0,L.A)(m.$n,{target:"e1pc97tg0"})(function(e){var t=e.theme,n=e.isActive;return{width:"28px",height:"28px",backgroundColor:n?t.ketcher.color.button.group.active:"white",margin:"2px",padding:"0",borderRadius:"4px",outline:"none",":hover":{backgroundColor:n?t.ketcher.color.button.group.hover:"white"},":hover svg":{fill:n?"white":t.ketcher.color.button.group.active}}},""),gu=function(){var e=Fr(),t=Tr(qe),n=ms(),r=function(){var r=(0,U.A)(Q().mark(function r(){var o;return Q().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=!t,r.next=3,n(o);case 3:e(Me({})),Wc();case 5:case"end":return r.stop()}},r)}));return function(){return r.apply(this,arguments)}}();return(0,a.Y)(vu,{isActive:t,onClick:r,title:"Calculate properties (".concat(mu.toggleMacromoleculesPropertiesVisibility,")"),"data-testid":"calculate-macromolecule-properties-button",children:(0,a.Y)("svg",{width:"15",height:"16",viewBox:"0 0 15 16",xmlns:"http://www.w3.org/2000/svg",fill:t?"white":"#333333",children:(0,a.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.87727 1.65517H9.03053V4.46737L9.42288 5.12973C9.76799 5.04496 10.1287 5 10.5 5C12.9853 5 15 7.01472 15 9.5C15 10.6812 14.5449 11.7562 13.8004 12.559C14.4936 14.1572 13.3016 16 11.456 16H2.54694C0.627617 16 -0.60048 14.0008 0.302223 12.3451C1.6087 9.94883 3.5345 6.39671 4.51457 4.49368V1.65517H3.66783V0H9.87727V1.65517ZM12.2962 13.6272C11.746 13.867 11.1385 14 10.5 14C8.01472 14 6 11.9853 6 9.5C6 7.98987 6.74386 6.65348 7.88515 5.83725L7.33705 4.91194V1.65517H6.20806V4.88502L6.11866 5.05976C5.15873 6.93619 3.14099 10.658 1.79676 13.1235C1.49524 13.6765 1.9056 14.3448 2.54694 14.3448H11.456C11.9075 14.3448 12.2417 14.0139 12.2962 13.6272ZM13.5375 9.5C13.5375 11.1776 12.1776 12.5375 10.5 12.5375C8.82244 12.5375 7.4625 11.1776 7.4625 9.5C7.4625 7.82243 8.82244 6.4625 10.5 6.4625C12.1776 6.4625 13.5375 7.82243 13.5375 9.5Z"})})})};function bu(){var e,t=Fr(),n=Tr(je),r=Tr(Fe),o=Br(),l=Tr(Te),d=(0,c.useState)([]),s=(0,i.A)(d,2),u=s[0],p=s[1],h=(0,c.useState)(!1),m=(0,i.A)(h,2),f=m[0],v=m[1],g=(0,c.useState)(),b=(0,i.A)(g,2),y=b[0],x=b[1],w=[n],A=l,C=Tr(Xe),M="flex-layout-mode"===o,k=u.filter(function(e){return e&&"function"===typeof e.forEachBond}),O=(null!==(e=null===r||void 0===r?void 0:r.drawingEntitiesManager.selectedMicromoleculeEntities.length)&&void 0!==e?e:0)>0||!kd(k);(0,c.useEffect)(function(){var e=function(e){p(e),e.length&&!bd(e)&&(v(!1),yd(e)?x("antisenseDnaStrand"):xd(e)?x("antisenseRnaStrand"):(x("antisenseStrand"),v(!0)))};return null===r||void 0===r||r.events.selectEntities.add(e),function(){null===r||void 0===r||r.events.selectEntities.remove(e)}},[r]);return(0,a.FD)(ad,{onItemClick:function(e){mc[e]?t(jt(e)):"undo"===e||"redo"===e?null===r||void 0===r||r.events.selectHistory.dispatch(e):"clear"===e?(null===r||void 0===r||r.events.selectTool.dispatch([e]),t(ve(C)),null===r||void 0===r||r.events.selectTool.dispatch([C]),l&&ai(t,r)):"antisenseRnaStrand"===e||"antisenseDnaStrand"===e?null===r||void 0===r||r.events.createAntisenseChain.dispatch("antisenseDnaStrand"===e):"arrange-ring"===e&&(null===r||void 0===r||r.events.layoutCircular.dispatch())},activeMenuItems:w,isHorizontal:!0,children:[(0,a.FD)(ad.Group,{isHorizontal:!0,divider:!0,children:[(0,a.Y)(ad.Item,{itemId:"clear",title:"Clear Canvas (".concat(mu.clear,")"),testId:"clear-canvas"}),(0,a.Y)(ad.Item,{itemId:"open",title:"Open...",disabled:A,testId:"open-file-button"}),(0,a.Y)(ad.Item,{itemId:"save",title:"Save as...",testId:"save-file-button"})]}),(0,a.FD)(ad.Group,{isHorizontal:!0,divider:!0,children:[(0,a.Y)(ad.Item,{itemId:"undo",title:"Undo (".concat(mu.undo,")"),disabled:A,testId:"undo"}),(0,a.Y)(ad.Item,{itemId:"redo",title:"Redo (".concat(mu.redo,")"),disabled:A,testId:"redo"})]}),M&&(0,a.Y)(ad.Group,{isHorizontal:!0,divider:!0,children:(0,a.Y)(ad.Item,{itemId:"arrange-ring",title:"Arrange as a Ring (".concat(mu.arrangeRing,")"),disabled:O,testId:"arrange-ring"})}),(0,a.FD)(ad.Group,{isHorizontal:!0,children:[(0,a.FD)(ad.Submenu,{disabled:!(null!==u&&void 0!==u&&u.length)||!wd(u)||bd(u),needOpenByMenuItemClick:f,vertical:!0,autoSize:!0,layoutModeButton:!0,generalTitle:"Create Antisense Strand",testId:"Create Antisense Strand",activeItem:y,children:[(0,a.Y)(ad.Item,{itemId:"antisenseRnaStrand",title:"Create RNA Antisense Strand (".concat(mu.createRnaAntisenseStrand,")"),disabled:!(null!==u&&void 0!==u&&u.length)||!wd(u)||bd(u),testId:"antisenseRnaStrand",type:"button"}),(0,a.Y)(ad.Item,{itemId:"antisenseDnaStrand",title:"Create DNA Antisense Strand (".concat(mu.createDnaAntisenseStrand,")"),disabled:!(null!==u&&void 0!==u&&u.length)||!wd(u)||bd(u),testId:"antisenseDnaStrand",type:"button"})]}),(0,a.Y)(gu,{})]})]})}function yu(){var e=Tr(je),t=Tr(Fe),n="sequence-layout-mode"===Br(),r=[e];return(0,a.FD)(ad,{testId:"left-toolbar",onItemClick:function(e){null===t||void 0===t||t.events.selectTool.dispatch([e,{toolName:e}])},activeMenuItems:r,children:[(0,a.FD)(ad.Group,{divider:!0,children:[(0,a.Y)(ad.Item,{itemId:"hand",title:"Hand Tool (".concat(mu.hand,")"),testId:"hand"}),(0,a.Y)(ad.Group,{children:(0,a.FD)(ad.Submenu,{testId:"select-drop-down-button",subMenuId:ce,needOpenByMenuItemClick:!0,children:[(0,a.Y)(ad.Item,{itemId:"select-rectangle",title:"Select Rectangle (".concat(mu.switchSelectTool,")"),testId:"select-rectangle"}),(0,a.Y)(ad.Item,{itemId:"select-lasso",title:"Lasso selection (".concat(mu.switchSelectTool,")"),testId:"select-lasso"}),(0,a.Y)(ad.Item,{itemId:"select-structure",title:"Structure Selection (".concat(mu.switchSelectTool,")"),testId:"select-structure"})]})}),(0,a.Y)(ad.Item,{itemId:"erase",title:"Erase (".concat(mu.erase,")"),testId:"erase",disabled:n})]}),(0,a.Y)(ad.Group,{children:(0,a.FD)(ad.Submenu,{disabled:n,testId:"bonds-drop-down-button",needOpenByMenuItemClick:!1,children:[(0,a.Y)(ad.Item,{itemId:"bond-single",title:"Single Bond (1)",testId:"single-bond",disabled:n}),(0,a.Y)(ad.Item,{itemId:"bond-hydrogen",title:"Hydrogen Bond (2)",testId:"hydrogen-bond",disabled:n})]})})]})}var xu=(0,L.A)("div",{target:"e1aw4j3q7"})({name:"bjn8wh",styles:"position:relative"}),wu=(0,L.A)(O.A,{target:"e1aw4j3q6"})("display:flex;color:",function(e){return e.theme.ketcher.color.dropdown.primary},";padding-right:0;padding-left:0;& svg{margin-left:2px;width:1rem;height:1rem;}"),Au=(0,L.A)("span",{target:"e1aw4j3q5"})({name:"td41hq",styles:"width:35px"}),Cu=(0,L.A)(E.Ay,{target:"e1aw4j3q4"})("& .MuiPopover-paper{padding:8px;width:175px;border:none;border-radius:0px 0px 4px 4px;box-shadow:",function(e){return e.theme.ketcher.shadow.regular},";box-sizing:border-box;}"),Mu=(0,L.A)("div",{target:"e1aw4j3q3"})({name:"5s1n17",styles:"display:flex;flex-direction:column;white-space:nowrap;word-break:keep-all;background:white"}),ku=(0,L.A)(O.A,{target:"e1aw4j3q2"})("display:flex;justify-content:space-between;font-size:",function(e){return e.theme.ketcher.font.size.regular},";line-height:14px;padding:7px 8px;text-transform:none;color:",function(e){return e.theme.ketcher.color.dropdown.primary},";"),Ou=(0,L.A)("span",{target:"e1aw4j3q1"})({name:"btyqtq",styles:"color:#cad3dd"}),Iu=(0,L.A)("input",{target:"e1aw4j3q0"})("border:1px solid #cad3dd;border-radius:4px;padding:3px 8px;color:",function(e){return e.theme.ketcher.color.text.light},";font-size:",function(e){return e.theme.ketcher.font.size.medium},";line-height:16px;margin-bottom:8px;&:hover{border-color:",function(e){return e.theme.ketcher.color.input.border.hover},";}&:active,&:focus{border-color:",function(e){return e.theme.ketcher.outline.selected.color},";outline:none;}&::after,&::before{display:none;}"),Du=function(e){var t=e.onZoomSubmit,n=e.currentZoom,r=e.inputRef,o=(0,c.useCallback)(function(e){var n=r.current;n&&([mu["zoom-out"],mu["zoom-in"]].includes(e.key)||e.nativeEvent.stopImmediatePropagation(),"Enter"===e.key&&(t(),n.select()))},[t,r,mu]);return(0,c.useEffect)(function(){var e=r.current;fu(n,e),document.activeElement===e&&(null===e||void 0===e||e.select())},[n,r]),(0,c.useEffect)(function(){var e=r.current;null===e||void 0===e||e.focus(),null===e||void 0===e||e.select()},[r]),(0,a.Y)(Iu,{ref:r,"data-testid":"zoom-value",onFocus:function(e){e.target.select()},onKeyDown:o})},Su=function(){var e=(0,c.useState)(!1),t=(0,i.A)(e,2),n=t[0],r=t[1],o=(0,c.useState)(100),l=(0,i.A)(o,2),d=l[0],s=l[1],u=(0,c.useRef)(null),p=(0,c.useRef)(null);(0,c.useEffect)(function(){var e;null===h.OQ2||void 0===h.OQ2||null===(e=h.OQ2.instance)||void 0===e||e.subscribeOnZoomEvent(function(){var e;s(Math.round(100*(null===h.OQ2||void 0===h.OQ2||null===(e=h.OQ2.instance)||void 0===e?void 0:e.getZoomLevel())))})},[null===h.OQ2||void 0===h.OQ2?void 0:h.OQ2.instance]);var f=(0,c.useCallback)(function(){var e=p.current;if(e){var t=function(e){var t=parseInt(null!==e&&void 0!==e?e:"");return isNaN(t)?0:t}(e.value);if(t&&t!==d){var n=function(e,t){if(0===e)return t;var n=100*h.OQ2.instance.MINZOOMSCALE,r=100*h.OQ2.instance.MAXZOOMSCALE;return e<n?n:e>r?r:e}(t,d);fu(n,e),h.OQ2.instance.zoomTo(n/100)}else fu(d,e)}},[d]);return(0,a.FD)(xu,{ref:u,children:[(0,a.FD)(wu,{onClick:function(){r(!0)},"data-testid":"zoom-selector",children:[(0,a.FD)(Au,{"data-testid":"zoom-input",children:[d,"%"]}),(0,a.Y)(m.In,{name:"chevron"})]}),(0,a.Y)(Cu,{open:n,onClose:function(){r(!1)},anchorEl:u.current,container:document.querySelector(m.tS),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,a.FD)(Mu,{children:[(0,a.Y)(Du,{onZoomSubmit:f,inputRef:p,currentZoom:d}),(0,a.FD)(ku,{"data-testid":"zoom-out",title:"Zoom Out",onClick:function(){h.OQ2.instance.zoomOut()},children:[(0,a.Y)("span",{children:"Zoom out"}),(0,a.Y)(Ou,{children:mu["zoom-minus"]})]}),(0,a.FD)(ku,{"data-testid":"zoom-in",title:"Zoom In",onClick:function(){h.OQ2.instance.zoomIn()},children:[(0,a.Y)("span",{children:"Zoom in"}),(0,a.Y)(Ou,{children:mu["zoom-plus"]})]}),(0,a.FD)(ku,{"data-testid":"zoom-default",title:"Zoom 100%",onClick:function(){h.OQ2.instance.resetZoom()},children:[(0,a.Y)("span",{children:"Zoom 100%"}),(0,a.Y)(Ou,{children:mu["zoom-reset"]})]})]})})]})};function Yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Eu,Pu,Lu,ju,Nu,Fu=[h.w52.bondSingle,h.w52.selectRectangle],Tu=function(){var e=Tr(Fe),t=Tr(je),n=Tr(_e),l=Fr(),d=Tr(wn),s=Tr(He),u=Tr(Xe),f=(0,c.useCallback)(function(){l(bt(null===e||void 0===e?void 0:e.monomersLibrary)),l(yt(null===e||void 0===e?void 0:e.defaultRnaPresetsLibraryItems))},[e]);(0,c.useEffect)(function(){return null===e||void 0===e||e.events.updateMonomersLibrary.add(f),function(){null===e||void 0===e||e.events.updateMonomersLibrary.remove(f)}},[e]),(0,c.useEffect)(function(){var t=function(){null===e||void 0===e||e.events.selectTool.dispatch([u]),l(ve(u))};return e&&e.events.selectSelectionTool.add(t),function(){null===e||void 0===e||e.events.selectSelectionTool.remove(t)}},[l,e,u]),(0,c.useEffect)(function(){var n=function(e){var n=(0,i.A)(e,1)[0];n!==t&&l(ve(n))};return e&&(e.events.error.add(function(e){l(Ft(e))}),e.events.openErrorModal.add(function(e){l(Bt(e))}),l(ve("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add(function(e){return l(jt({name:"monomerConnection",additionalProps:e}))}),e.events.openConfirmationDialog.add(function(e){return l(jt({name:"confirmationDialog",additionalProps:e}))}),e.events.selectTool.add(n)),function(){l(ve(null)),null===e||void 0===e||e.events.selectTool.remove(n)}},[e]);var v=(0,c.useCallback)(function(e){return l(we(e))},[l]),g=(0,c.useCallback)((0,p.debounce)(function(e){return v(e)},500),[v]);(0,c.useEffect)(function(){var n=function(e){var n=(0,i.A)(e,1)[0];n!==t&&l(ve(n))};return e&&(e.events.error.add(function(e){l(Ft(e))}),e.events.openErrorModal.add(function(e){l(Bt(e))}),l(ve("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add(function(e){return l(jt({name:"monomerConnection",additionalProps:e}))}),e.events.selectTool.add(n)),function(){l(ve(null)),null===e||void 0===e||e.events.selectTool.remove(n)}},[e]);var b=(0,c.useCallback)(function(e,t){var n={type:r.Bond,polymerBond:e,style:t};g(n)},[g]),y=(0,c.useCallback)(function(e){var t,i,a;if(1!==e.buttons&&2!==e.buttons){if(n)return e.preventDefault(),void e.stopPropagation();var l=null===(t=e.target.__data__)||void 0===t?void 0:t.polymerBond;if(!(l&&!l.finished||l instanceof h.eOK))if(l){var c=(0,m.Xx)(l,e.target.getBoundingClientRect());b(l,c)}else{var s=null===(i=e.target.__data__)||void 0===i?void 0:i.node,u=(null===(a=e.target.__data__)||void 0===a?void 0:a.monomer)||(null===s||void 0===s?void 0:s.monomer);if(!(s&&s instanceof h.Dzo))if(u instanceof h.cN8){var p={type:r.AmbiguousMonomer,monomer:u.variantMonomerItem,target:e.target};g(p)}else{var f=u.monomerItem,v=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},u.attachmentPointsToBonds),y=s instanceof h.NxW||s instanceof h.yYC;if(s instanceof h.dL6){var x=s.monomers;if(x.length>1){var w={type:r.Preset,monomers:x.map(function(e){return e.monomerItem}),position:o.ChainMiddle,target:e.target};return void g(w)}}if(y){var A,C=s instanceof h.NxW?[s.sugar.monomerItem,s.rnaBase.monomerItem,null===(A=s.phosphate)||void 0===A?void 0:A.monomerItem]:[s.sugar.monomerItem,s.rnaBase.monomerItem];if(s.rnaBase instanceof h.cN8){var M={type:r.AmbiguousMonomer,monomer:s.rnaBase.variantMonomerItem,presetMonomers:C,target:e.target};return void g(M)}var k,O=d.find(function(e){var t=[e.sugar,e.base,e.phosphate];return C.every(function(e,n){var r;return(null===e||void 0===e?void 0:e.props.Name)===(null===(r=t[n])||void 0===r?void 0:r.props.Name)})});k=s instanceof h.yYC?o.ChainEnd:void 0!==s.firstMonomerInNode.R1AttachmentPoint?o.ChainStart:o.ChainMiddle;var I={type:r.Preset,monomers:C,name:null===O||void 0===O?void 0:O.name,idtAliases:null===O||void 0===O?void 0:O.idtAliases,position:k,target:e.target};g(I)}else{var D={type:r.Monomer,monomer:f,attachmentPointsToBonds:v,target:e.target};g(D)}}}}},[b,g,d,n]),x=(0,c.useCallback)(function(){g.cancel(),l(we(void 0))},[g,l]);return(0,c.useEffect)(function(){null===e||void 0===e||e.events.mouseOverMonomer.add(y),null===e||void 0===e||e.events.mouseLeaveMonomer.add(x),null===e||void 0===e||e.events.mouseLeaveAttachmentPoint.add(x),null===e||void 0===e||e.events.mouseDownAttachmentPoint.add(x),null===e||void 0===e||e.events.mouseOverSequenceItem.add(y),null===e||void 0===e||e.events.mouseLeaveSequenceItem.add(x),null===e||void 0===e||e.events.mouseOverPolymerBond.add(y),null===e||void 0===e||e.events.mouseLeavePolymerBond.add(x);var n=function(e){x(),1===e.buttons&&Fu.includes(t)||y(e)};return null===e||void 0===e||e.events.mouseOnMoveMonomer.add(n),null===e||void 0===e||e.events.mouseMoveAttachmentPoint.add(n),null===e||void 0===e||e.events.mouseOnMoveSequenceItem.add(n),null===e||void 0===e||e.events.mouseOnMovePolymerBond.add(n),window.addEventListener("hidePreview",x),function(){null===e||void 0===e||e.events.mouseOverMonomer.remove(y),null===e||void 0===e||e.events.mouseLeaveMonomer.remove(x),null===e||void 0===e||e.events.mouseLeaveAttachmentPoint.remove(x),null===e||void 0===e||e.events.mouseOverSequenceItem.remove(y),null===e||void 0===e||e.events.mouseLeaveSequenceItem.remove(x),null===e||void 0===e||e.events.mouseOverPolymerBond.remove(y),null===e||void 0===e||e.events.mouseLeavePolymerBond.remove(x),null===e||void 0===e||e.events.mouseOnMoveMonomer.remove(n),null===e||void 0===e||e.events.mouseMoveAttachmentPoint.remove(n),null===e||void 0===e||e.events.mouseOnMoveSequenceItem.remove(n),null===e||void 0===e||e.events.mouseOnMovePolymerBond.remove(n),window.removeEventListener("hidePreview",x)}},[e,t,y,x]),(0,c.useEffect)(function(){s||null===e||void 0===e||e.events.resetSequenceEditMode.dispatch()},[s]),(0,a.Y)(a.FK,{})},Bu=function(e){var t=e.selectedMonomers,n=e.contextMenuEvent,r=t||[],o=Tr(Fe),i=(0,_.EF)({id:po.FOR_SELECTED_MONOMERS}).hideAll,l=Md(r,n),c=function(e){var t,n,r=(null!==(t=null===o||void 0===o||null===(n=o.drawingEntitiesManager)||void 0===n||null===(n=n.selectedEntitiesArr)||void 0===n?void 0:n.length)&&void 0!==t?t:0)>0;return!(null!==e&&void 0!==e&&e.polymerBondRenderer)&&(!(null!==e&&void 0!==e&&e.selectedMonomers)||0===(null===e||void 0===e?void 0:e.selectedMonomers.length))&&!r},d=Cd(l),s=function(e){return!(null===e||void 0===e||!e.polymerBondRenderer)},u=r&&r.length>0&&wd(r),p="flex-layout-mode"!==(null===o||void 0===o?void 0:o.mode.modeName)||(null===o||void 0===o?void 0:o.drawingEntitiesManager.selectedMicromoleculeEntities.length)>0||!kd(r),h=[{name:"copy",title:"Copy",icon:(0,a.Y)(m.In,{name:"copyMenu"}),disabled:function(e){var t=e.props,n=void 0===t?{}:t;return s(n)||c(n)}},{name:vd.paste,title:"Paste",icon:(0,a.Y)(m.In,{name:"pasteNavBar"}),disabled:function(e){var t=e.props;return!c(void 0===t?{}:t)},separator:!0},{name:"create_antisense_rna_chain",title:"Create Antisense RNA Strand",separator:!1,disabled:bd(r),hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.selectedMonomers)||!wd(null===t||void 0===t?void 0:t.selectedMonomers)}},{name:"create_antisense_dna_chain",title:"Create Antisense DNA Strand",disabled:bd(r),hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.selectedMonomers)||!wd(null===t||void 0===t?void 0:t.selectedMonomers)},separator:u},{name:vd.modifyAminoAcids,title:"Modify amino acids",disabled:!1,hidden:!d.length,subMenuItems:d},{name:"layout_circular",title:"Arrange as a Ring",disabled:p},{name:"edit_attachment_points",title:"Edit Attachment Points...",disabled:function(e){var t=e.props;return!s(t)},separator:!0},{name:"delete",title:"Delete",icon:(0,a.Y)(m.In,{name:"deleteMenu"}),disabled:function(e){var t=e.props;return c(void 0===t?{}:t)}}],f=document.querySelector(m.tS);return f&&(0,q.createPortal)((0,a.Y)(wo,{id:po.FOR_SELECTED_MONOMERS,handleMenuChange:function(e){var t=e.id,n=e.props;switch(!0){case"layout_circular"===t:null===o||void 0===o||o.events.layoutCircular.dispatch(),i();break;case"copy"===t:null===o||void 0===o||o.events.copySelectedStructure.dispatch();break;case"create_antisense_rna_chain"===t:null===o||void 0===o||o.events.createAntisenseChain.dispatch(!1);break;case"create_antisense_dna_chain"===t:null===o||void 0===o||o.events.createAntisenseChain.dispatch(!0);break;case"delete"===t:null===o||void 0===o||o.events.deleteSelectedStructure.dispatch();break;case"paste"===t:null===o||void 0===o||o.events.pasteFromClipboard.dispatch();break;case"edit_attachment_points"===t:var r,a=null===n||void 0===n||null===(r=n.polymerBondRenderer)||void 0===r?void 0:r.polymerBond;if(!a)return;null===o||void 0===o||o.events.openMonomerConnectionModal.dispatch({firstMonomer:a.firstMonomer,secondMonomer:a.secondMonomer,polymerBond:a,isReconnectionDialog:!0});break;case null===t||void 0===t?void 0:t.startsWith(Ad):var c=null===t||void 0===t?void 0:t.replace(Ad,"");null===o||void 0===o||o.events.modifyAminoAcids.dispatch({monomers:l,modificationType:c})}},menuItems:h}),f)},zu=(0,L.A)(m.$n,{target:"e1846tr80"})(function(e){var t=e.theme,n=e.isActive;return{width:"40px",height:"31px",backgroundColor:n?t.ketcher.color.button.group.active:"white",marginRight:"8px",border:n?t.ketcher.outline.selected.color:t.ketcher.outline.small,borderRadius:"4px",outline:"none",":hover":{backgroundColor:n?t.ketcher.color.button.group.hover:"white"},":hover svg":{fill:n?"white":t.ketcher.color.button.group.active}}},""),Ru=function(){var e=Tr(Fe),t=(0,c.useState)(!0),n=(0,i.A)(t,2),r=n[0],o=n[1],l="sequence-layout-mode"===Br(),d=Tr(He);return(0,c.useEffect)(function(){l&&d&&(null===e||void 0===e||e.events.toggleIsSequenceSyncEditMode.dispatch(r))},[l,d]),l&&d?(0,a.Y)(zu,{isActive:r,onClick:function(){var t=!r;o(t),null===e||void 0===e||e.events.toggleIsSequenceSyncEditMode.dispatch(t),Wc()},"data-testid":"sync_sequence_edit_mode","data-isactive":r,children:(0,a.FD)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:r?"white":"#333333",children:[(0,a.Y)("rect",{x:"1",y:"1.5",width:"22",height:"2",rx:"1"}),(0,a.Y)("rect",{x:"2.5",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 2.5 1.5)"}),(0,a.Y)("rect",{x:"9.33333",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 9.33333 1.5)"}),(0,a.Y)("rect",{x:"16.1667",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 16.1667 1.5)"}),(0,a.Y)("rect",{x:"23",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 23 1.5)"}),(0,a.Y)("path",{d:"M2.16873 14.2715C2.08963 14.3652 2.02518 14.4253 1.97537 14.4517C1.9285 14.478 1.8699 14.4912 1.79959 14.4912C1.66189 14.4912 1.55057 14.4458 1.46561 14.355C1.38357 14.2612 1.34256 14.1074 1.34256 13.8936V13.2871C1.34256 13.0703 1.38357 12.9165 1.46561 12.8257C1.55057 12.7319 1.66189 12.6851 1.79959 12.6851C1.90506 12.6851 1.99295 12.7129 2.06326 12.7686C2.1365 12.8242 2.19217 12.918 2.23025 13.0498C2.26834 13.1787 2.30789 13.2666 2.34891 13.3135C2.43387 13.4043 2.58475 13.4966 2.80154 13.5903C3.01834 13.6841 3.25564 13.731 3.51346 13.731C3.91482 13.731 4.24441 13.6372 4.50223 13.4497C4.66629 13.3354 4.74832 13.1948 4.74832 13.0278C4.74832 12.9165 4.70877 12.8125 4.62967 12.7158C4.55057 12.6162 4.42166 12.5342 4.24295 12.4697C4.12576 12.4258 3.86355 12.3657 3.45633 12.2896C2.96414 12.1987 2.59207 12.0889 2.34012 11.96C2.08816 11.8311 1.88895 11.6494 1.74246 11.415C1.59598 11.1807 1.52273 10.9272 1.52273 10.6548C1.52273 10.2241 1.70291 9.84766 2.06326 9.52539C2.42361 9.2002 2.89236 9.0376 3.46951 9.0376C3.70096 9.0376 3.91482 9.06396 4.11111 9.1167C4.31033 9.1665 4.49051 9.24414 4.65164 9.34961C4.76883 9.23535 4.88602 9.17822 5.0032 9.17822C5.13504 9.17822 5.24197 9.2251 5.324 9.31885C5.40897 9.40967 5.45145 9.56201 5.45145 9.77588V10.4526C5.45145 10.6694 5.40897 10.8247 5.324 10.9185C5.24197 11.0093 5.13504 11.0547 5.0032 11.0547C4.89188 11.0547 4.7952 11.021 4.71316 10.9536C4.64871 10.9038 4.60037 10.8042 4.56814 10.6548C4.53592 10.5054 4.4949 10.3984 4.4451 10.334C4.36014 10.2227 4.2327 10.1289 4.06277 10.0527C3.89285 9.97656 3.69656 9.93848 3.47391 9.93848C3.14871 9.93848 2.8909 10.0146 2.70047 10.167C2.51297 10.3164 2.41922 10.4731 2.41922 10.6372C2.41922 10.7485 2.4573 10.8569 2.53348 10.9624C2.61258 11.0649 2.72684 11.1455 2.87625 11.2041C2.97586 11.2451 3.25564 11.311 3.71561 11.4019C4.1785 11.4927 4.53299 11.5923 4.77908 11.7007C5.02811 11.8091 5.23465 11.979 5.39871 12.2104C5.56277 12.4419 5.6448 12.7173 5.6448 13.0366C5.6448 13.4819 5.48807 13.8379 5.17459 14.1045C4.75857 14.4561 4.2283 14.6318 3.58377 14.6318C3.33475 14.6318 3.09158 14.6011 2.85428 14.5396C2.6199 14.481 2.39139 14.3916 2.16873 14.2715ZM9.615 12.2632V13.5991H10.2214C10.4382 13.5991 10.5921 13.6416 10.6829 13.7266C10.7766 13.8086 10.8235 13.917 10.8235 14.0518C10.8235 14.1836 10.7766 14.292 10.6829 14.377C10.5921 14.459 10.4382 14.5 10.2214 14.5H8.10768C7.89381 14.5 7.74 14.459 7.64625 14.377C7.55543 14.292 7.51002 14.1821 7.51002 14.0474C7.51002 13.9155 7.55543 13.8086 7.64625 13.7266C7.74 13.6416 7.89381 13.5991 8.10768 13.5991H8.71412V12.2632L7.22438 10.0747C7.02516 10.0747 6.87867 10.0322 6.78492 9.94727C6.6941 9.8623 6.64869 9.75391 6.64869 9.62207C6.64869 9.4873 6.6941 9.37891 6.78492 9.29688C6.87867 9.21191 7.03395 9.16943 7.25074 9.16943L8.06813 9.17383C8.28492 9.17383 8.43873 9.21484 8.52955 9.29688C8.6233 9.37891 8.67018 9.4873 8.67018 9.62207C8.67018 9.82422 8.55152 9.9751 8.31422 10.0747L9.16676 11.3315L10.0017 10.0747C9.86988 10.0249 9.77613 9.96191 9.72047 9.88574C9.6648 9.80957 9.63697 9.72168 9.63697 9.62207C9.63697 9.4873 9.68238 9.37891 9.7732 9.29688C9.86695 9.21484 10.0222 9.17236 10.239 9.16943L11.0872 9.17383C11.304 9.17383 11.4578 9.21484 11.5486 9.29688C11.6423 9.37891 11.6892 9.4873 11.6892 9.62207C11.6892 9.75684 11.6423 9.8667 11.5486 9.95166C11.4548 10.0337 11.3025 10.0747 11.0916 10.0747L9.615 12.2632ZM13.7082 10.8745V13.5991H14.0334C14.2502 13.5991 14.404 13.6416 14.4949 13.7266C14.5886 13.8086 14.6355 13.917 14.6355 14.0518C14.6355 14.1836 14.5886 14.292 14.4949 14.377C14.404 14.459 14.2502 14.5 14.0334 14.5H12.8513C12.6345 14.5 12.4792 14.459 12.3855 14.377C12.2947 14.292 12.2493 14.1821 12.2493 14.0474C12.2493 13.9185 12.2947 13.8115 12.3855 13.7266C12.4763 13.6416 12.6169 13.5991 12.8074 13.5991V10.0747H12.6667C12.4499 10.0747 12.2947 10.0337 12.2009 9.95166C12.1101 9.8667 12.0647 9.75684 12.0647 9.62207C12.0647 9.4873 12.1101 9.37891 12.2009 9.29688C12.2947 9.21191 12.4499 9.16943 12.6667 9.16943L13.7082 9.17383L16.011 12.7861V10.0747H15.6858C15.469 10.0747 15.3137 10.0337 15.22 9.95166C15.1291 9.8667 15.0837 9.75684 15.0837 9.62207C15.0837 9.4873 15.1291 9.37891 15.22 9.29688C15.3137 9.21191 15.469 9.16943 15.6858 9.16943L16.8679 9.17383C17.0847 9.17383 17.2385 9.21484 17.3293 9.29688C17.4231 9.37891 17.47 9.4873 17.47 9.62207C17.47 9.75391 17.4246 9.8623 17.3337 9.94727C17.2429 10.0322 17.1038 10.0747 16.9163 10.0747V14.5H16.0242L13.7082 10.8745ZM21.9236 9.40234C21.9792 9.32617 22.0393 9.26904 22.1037 9.23096C22.1711 9.19287 22.2429 9.17383 22.3191 9.17383C22.4509 9.17383 22.5578 9.21924 22.6399 9.31006C22.7248 9.40088 22.7673 9.55469 22.7673 9.77148V10.5361C22.7673 10.7529 22.7248 10.9082 22.6399 11.002C22.5578 11.0928 22.4509 11.1382 22.3191 11.1382C22.1989 11.1382 22.1023 11.1045 22.029 11.0371C21.9558 10.9697 21.9016 10.8438 21.8664 10.6592C21.8459 10.5361 21.8049 10.4409 21.7434 10.3735C21.6233 10.2417 21.4548 10.1362 21.238 10.0571C21.0241 9.97803 20.8088 9.93848 20.592 9.93848C20.3225 9.93848 20.0749 9.99707 19.8493 10.1143C19.6237 10.2314 19.4245 10.4219 19.2517 10.6855C19.0788 10.9492 18.9924 11.2627 18.9924 11.626V12.2104C18.9924 12.644 19.1491 13.0059 19.4626 13.2959C19.779 13.5859 20.217 13.731 20.7766 13.731C21.1106 13.731 21.3933 13.6855 21.6247 13.5947C21.7595 13.542 21.903 13.438 22.0554 13.2827C22.1491 13.189 22.2224 13.1289 22.2751 13.1025C22.3279 13.0732 22.3879 13.0586 22.4553 13.0586C22.5754 13.0586 22.6809 13.104 22.7717 13.1948C22.8625 13.2856 22.9079 13.3926 22.9079 13.5156C22.9079 13.6387 22.8464 13.7705 22.7234 13.9111C22.5446 14.1162 22.3147 14.2773 22.0334 14.3945C21.6555 14.5527 21.238 14.6318 20.781 14.6318C20.2478 14.6318 19.7673 14.522 19.3396 14.3022C18.9939 14.1265 18.6994 13.8496 18.4563 13.4717C18.2131 13.0908 18.0915 12.6763 18.0915 12.228V11.6172C18.0915 11.1484 18.1999 10.7119 18.4167 10.3076C18.6364 9.90039 18.9397 9.58691 19.3264 9.36719C19.7131 9.14746 20.1233 9.0376 20.5569 9.0376C20.8176 9.0376 21.0608 9.06836 21.2863 9.12988C21.5149 9.18848 21.7273 9.2793 21.9236 9.40234Z"}),(0,a.Y)("rect",{x:"23",y:"22.5",width:"22",height:"2",rx:"1",transform:"rotate(-180 23 22.5)"}),(0,a.Y)("rect",{x:"21.5",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 21.5 22.5)"}),(0,a.Y)("rect",{x:"14.6667",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 14.6667 22.5)"}),(0,a.Y)("rect",{x:"7.83333",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 7.83333 22.5)"}),(0,a.Y)("rect",{x:"1",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 1 22.5)"})]})}):null},Hu=function(e,t){var n=(0,c.useRef)(null);(0,c.useLayoutEffect)(function(){var r=e.current;if(r)return n.current=requestAnimationFrame(function(){r.style.transform="translateX(".concat(t,"px)")}),function(){n.current&&(cancelAnimationFrame(n.current),n.current=null)}},[e,t])},_u={rulerArea:"RulerArea-module_rulerArea__Kix1O",rulerInput:"RulerArea-module_rulerInput__nCNOa",rulerInputDragging:"RulerArea-module_rulerInputDragging__saoOk",rulerScale:"RulerArea-module_rulerScale__4YOKH",rulerHandle:"RulerArea-module_rulerHandle__g4GPl"},qu=(0,c.memo)(function(e){var t=e.lineLengthValue,n=e.offsetX,r=e.isDragging,o=e.layoutMode,l=e.onCommitValue,d=(0,c.useRef)(null);Hu(d,n);var s=t.toString(),u=(0,c.useState)(null),p=(0,i.A)(u,2),h=p[0],m=p[1],f=null!==h?h:s;return(0,a.Y)("input",{className:(0,W.A)(_u.rulerInput,r&&_u.rulerInputDragging),title:"Number of monomers in a line",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:f,onChange:function(e){m(e.target.value)},onBlur:function(){if(h&&""!==h.trim()){var e=Number(h);if(Number.isNaN(e)||e<1)m(null);else{var t="sequence-layout-mode"===o?10*Math.round(e/10):e;m(null),l(t)}}else m(null)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.currentTarget.blur())},"data-testid":"ruler-input",disabled:r,ref:d})}),Vu=h.XKT,Wu=(0,c.memo)(function(e){var t=e.transform,n=e.layoutMode;e.lineLengthValue;var r=(0,c.useRef)(null),o=t.k-.5<Number.EPSILON,i=function(e,t,n,r){var o=Math.max(0,Math.floor((e-r)/n)),i=Math.ceil((t-r)/n)+10;return Array.from({length:i-o},function(e,t){return r+(o+t)*n})},l=(0,c.useMemo)(function(){var e,o=(null===(e=r.current)||void 0===e||null===(e=e.ownerSVGElement)||void 0===e?void 0:e.width.baseVal.value)||1e3,a=t.invertX(0),l=t.invertX(o);if("sequence-layout-mode"===n){return i(a,l,210,40)}return"snake-layout-mode"===n?i(a,l,Vu,25):[]},[n,t]),d=(0,c.useMemo)(function(){var e=[];return l.forEach(function(r,i){if("sequence-layout-mode"===n)e.push((0,a.Y)("line",{x1:t.applyX(r),y1:14,x2:t.applyX(r),y2:22,stroke:"#7C7C7F",strokeWidth:1},"ruler-mark-".concat(r)));else if("snake-layout-mode"===n){if(o)i%5===0?e.push((0,a.Y)("text",{x:t.applyX(r),y:18,fontSize:10,fontWeight:500,fill:"#7C7C7F",textAnchor:"middle",dominantBaseline:"middle",children:i},"ruler-label-".concat(r))):e.push((0,a.Y)("line",{x1:t.applyX(r),y1:14,x2:t.applyX(r),y2:22,stroke:"#7C7C7F",strokeWidth:1},"ruler-mark-".concat(r)));else e.push((0,a.Y)("text",{x:t.applyX(r),y:18,fontSize:10,fontWeight:500,fill:"#7C7C7F",textAnchor:"middle",dominantBaseline:"middle",children:i},"ruler-label-".concat(r)))}var c=l[i+1];void 0!==c&&(o&&"snake-layout-mode"===n||e.push((0,a.Y)("line",{x1:t.applyX(r+10),y1:18,x2:t.applyX(c-10),y2:18,stroke:"#B4B9D6",strokeDasharray:"2,2",strokeWidth:1},"ruler-fill-".concat(r,"-").concat(c))))}),e},[l,n,t,o]);return(0,a.Y)("svg",{className:_u.rulerScale,ref:r,"data-testid":"ruler-scale",children:d})}),Uu=(0,c.memo)(function(e){var t=e.offsetX,n=e.onDragStart,r=e.onDrag,o=e.onDragEnd,i=(0,c.useRef)(null),l=(0,c.useRef)(null);return Hu(i,t),(0,c.useEffect)(function(){if(l.current){var e=(0,V.Ltv)(l.current),t=(0,V.$Er)().on("start",n).on("drag",r).on("end",o);return e.call(t),function(){e.on(".drag",null)}}},[r,o,n]),(0,a.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",className:_u.rulerHandle,viewBox:"0 0 16 13",fill:"none",pointerEvents:"none",ref:i,"data-testid":"ruler-handle",children:(0,a.FD)("g",{cursor:"pointer",pointerEvents:"all",ref:l,children:[(0,a.Y)("mask",{id:"ruler-handle-mask",fill:"#fff",children:(0,a.Y)("path",{fillRule:"evenodd",d:"M16 1.625a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v4.5a1 1 0 0 0 .4.8l7 5.25a1 1 0 0 0 1.2 0l7-5.25a1 1 0 0 0 .4-.8v-4.5Z",clipRule:"evenodd"})}),(0,a.Y)("path",{fill:"#CAD3DD",fillRule:"evenodd",d:"M16 1.625a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v4.5a1 1 0 0 0 .4.8l7 5.25a1 1 0 0 0 1.2 0l7-5.25a1 1 0 0 0 .4-.8v-4.5Z",clipRule:"evenodd"}),(0,a.Y)("path",{fill:"#B4B9D6",d:"m15.6 6.925-.6-.8.6.8Zm-8.2 5.25.6-.8-.6.8Zm-7-5.25.6-.8-.6.8Zm.6-5.3h14v-2H1v2Zm0 4.5v-4.5h-2v4.5h2Zm7 5.25-7-5.25-1.2 1.6 7 5.25 1.2-1.6Zm7-5.25-7 5.25 1.2 1.6 7-5.25-1.2-1.6Zm0-4.5v4.5h2v-4.5h-2Zm1.2 6.1a2 2 0 0 0 .8-1.6h-2l1.2 1.6Zm-9.4 5.25a2 2 0 0 0 2.4 0l-1.2-1.6-1.2 1.6ZM-1 6.125a2 2 0 0 0 .8 1.6l1.2-1.6h-2Zm16-4.5h2a2 2 0 0 0-2-2v2Zm-14-2a2 2 0 0 0-2 2h2v-2Z",mask:"url(#ruler-handle-mask)"})]})})}),Ku=function(){var e=(0,c.useState)(new V.uVw(1,0,0)),t=(0,i.A)(e,2),n=t[0],r=t[1];return(0,c.useEffect)(function(){var e=h.OQ2.instance;if(e){var t=function(e){e&&requestAnimationFrame(function(){r(e)})};return e.subscribeOnZoomEvent(t),function(){e.unsubscribeOnZoomEvent(t)}}},[h.OQ2.instance]),n},Qu=function(){var e,t,n,r=Br(),o=(0,l.d4)(Ge)[r],d=(0,l.d4)(Fe),s=(0,c.useRef)(0),u=(0,c.useState)(0),p=(0,i.A)(u,2),h=p[0],m=p[1],f=(0,c.useState)(!1),v=(0,i.A)(f,2),g=v[0],b=v[1],y=Ku(),x=o/10-1,w=(0,c.useMemo)(function(){if("sequence-layout-mode"===r){return 40+210*Math.floor(o/10)}return"snake-layout-mode"===r?25+o*Vu:0},[r,o]),A=(0,c.useMemo)(function(){var e=y.applyX(w)+h,t=e-8,n=e+10,r=null===d||void 0===d?void 0:d.canvas.width.baseVal.value;if(!r)return[n,t];var o=null===d||void 0===d?void 0:d.canvas.parentElement,i=(null===o||void 0===o?void 0:o.scrollLeft)||0,a=i,l=i+((null===o||void 0===o?void 0:o.clientWidth)||r);return n+35>l&&(n=l-35),n<a&&(n=a),[n,t]},[null===d||void 0===d?void 0:d.canvas.width.baseVal.value,null===d||void 0===d?void 0:d.canvas.parentElement,y,w,h]),C=(0,i.A)(A,2),M=C[0],k=C[1],O=(0,c.useCallback)(function(e){null===d||void 0===d||d.events.setEditorLineLength.dispatch((0,j.A)({},r,e))},[null===d||void 0===d||null===(e=d.events)||void 0===e?void 0:e.setEditorLineLength,r]),I=(0,c.useCallback)(function(e){if("sequence-layout-mode"===r){var t=(e-10*x-40)/20;return Math.max(10,10*Math.round(t/10))}if("snake-layout-mode"===r){var n=(e-25)/Vu;return Math.max(1,Math.round(n))}return o},[r,x,o]),D=(0,c.useCallback)(function(e){var t=e-s.current,n=y.applyX(w)+t;return[t,y.invertX(n)]},[y,w]),S=(0,c.useMemo)(function(){if(!g)return o;var e=D(s.current+h),t=(0,i.A)(e,2)[1];return I(t)},[g,o,D,s,h,I]),Y=(0,c.useCallback)(function(e){b(!0),s.current=e.sourceEvent.clientX,null===d||void 0===d||d.events.toggleLineLengthHighlighting.dispatch(!0,w)},[null===d||void 0===d||null===(t=d.events)||void 0===t?void 0:t.toggleLineLengthHighlighting,w]),E=(0,c.useCallback)(function(e){var t=D(e.sourceEvent.clientX),n=(0,i.A)(t,2),r=n[0],o=n[1];m(r),null===d||void 0===d||d.events.toggleLineLengthHighlighting.dispatch(!0,o)},[null===d||void 0===d||null===(n=d.events)||void 0===n?void 0:n.toggleLineLengthHighlighting,D]),P=(0,c.useCallback)(function(e){b(!1);var t=D(e.sourceEvent.clientX),n=(0,i.A)(t,2)[1],r=I(n);r!==o&&O(r),m(0),s.current=0,null===d||void 0===d||d.events.toggleLineLengthHighlighting.dispatch(!1)},[D,I,o,null===d||void 0===d?void 0:d.events.toggleLineLengthHighlighting,O]);return"flex-layout-mode"===r?null:!window._ketcher_isChainLengthRulerDisabled?(0,a.FD)("div",{className:(0,W.A)(_u.rulerArea,g&&_u.rulerAreaDragging),"data-testid":"ruler-area",children:[(0,a.Y)(qu,{lineLengthValue:g?S:o,offsetX:M,isDragging:g,layoutMode:r,onCommitValue:O}),(0,a.Y)(Uu,{offsetX:k,onDragStart:Y,onDrag:E,onDragEnd:P}),(0,a.Y)(Wu,{transform:y,layoutMode:r,lineLengthValue:o})]}):null},Gu="DragGhost-module_dragGhost__m5lHf",Zu=function(e){var t=e.preset,n=t.sugar,r=t.phosphate,o=t.base;if(!n)return null;var l=(0,h.w7j)(n),c=(0,i.A)(l,2),d=c[0],s=new(0,c[1])(new d(n)),u=r?function(){var e=(0,h.w7j)(r),t=(0,i.A)(e,2),n=t[0];return new(0,t[1])(new n(r))}():null,p=o?function(){var e=(0,h.w7j)(o),t=(0,i.A)(e,2),n=t[0];return new(0,t[1])(new n(o))}():null,m=s.monomerSize,f=null===u||void 0===u?void 0:u.monomerSize,v=null===p||void 0===p?void 0:p.monomerSize,g=f?0+m.width+30:0,b=0+(m.width-((null===v||void 0===v?void 0:v.width)||0))/2,y=0+m.height+30,x=Math.max(0+m.width,f?g+f.width:0,v?b+v.width:0),w=Math.max(0+m.height,f?0+f.height:0,v?y+v.height:0),A=(m.width-4)/m.width,C=(m.height-4)/m.height,M=Math.min(A,C),k=(m.width-m.width*M)/2,O=(m.height-m.height*M)/2,I=f?Math.min((f.width-4)/f.width,(f.height-4)/f.height):1,D=f?(f.width-f.width*I)/2:0,S=f?(f.height-f.height*I)/2:0,Y=v?Math.min((v.width-4)/v.width,(v.height-4)/v.height):1,E=v?(v.width-v.width*Y)/2:0,P=v?(v.height-v.height*Y)/2:0;return(0,a.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:x,height:w,viewBox:"0 0 ".concat(x," ").concat(w),overflow:"visible",children:(0,a.FD)("g",{style:{filter:"drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.4))"},children:[(0,a.FD)("g",{transform:"translate(".concat(0,", ").concat(0,")"),children:[(0,a.Y)("use",{href:s.monomerSymbolElementId,fill:"white"}),(0,a.Y)("g",{transform:"translate(".concat(k,", ").concat(O,") scale(").concat(M,")"),children:(0,a.Y)("use",{href:s.monomerSymbolElementId,fill:"#CAD3DD"})}),(0,a.Y)("text",{x:m.width/2,y:m.height/2,textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",fill:"#333",fontSize:"7px",fontWeight:"bold",children:n.label})]}),f&&(0,a.FD)("g",{transform:"translate(".concat(g,", ").concat(0,")"),children:[(0,a.Y)("use",{href:u.monomerSymbolElementId,fill:"white"}),(0,a.Y)("g",{transform:"translate(".concat(D,", ").concat(S,") scale(").concat(I,")"),children:(0,a.Y)("use",{href:u.monomerSymbolElementId,fill:"#CAD3DD"})}),(0,a.Y)("text",{x:f.width/2,y:f.height/2,textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",fill:"#333",fontSize:"7px",fontWeight:"bold",children:null===r||void 0===r?void 0:r.label})]}),v&&(0,a.FD)("g",{transform:"translate(".concat(b,", ").concat(y,")"),children:[(0,a.Y)("use",{href:p.monomerSymbolElementId,fill:"white"}),(0,a.Y)("g",{transform:"translate(".concat(E,", ").concat(P,") scale(").concat(Y,")"),children:(0,a.Y)("use",{href:p.monomerSymbolElementId,fill:"#CAD3DD"})}),(0,a.Y)("text",{x:v.width/2,y:v.height/2,textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",fill:"#333",fontSize:"7px",fontWeight:"bold",children:null===o||void 0===o?void 0:o.label})]}),f&&(0,a.FD)("g",{children:[(0,a.Y)("line",{x1:0+m.width,y1:0+m.height/2,x2:g+2,y2:0+f.height/2,stroke:"white",strokeWidth:7,strokeLinecap:"butt"}),(0,a.Y)("line",{x1:0+m.width-3,y1:0+m.height/2,x2:g+3,y2:0+f.height/2,stroke:"#CAD3DD",strokeWidth:4,strokeLinecap:"round"})]}),v&&(0,a.FD)("g",{children:[(0,a.Y)("line",{x1:0+m.width/2,y1:0+m.height,x2:b+v.width/2,y2:y+3,stroke:"white",strokeWidth:7,strokeLinecap:"butt"}),(0,a.Y)("line",{x1:0+m.width/2,y1:0+m.height-3,x2:b+v.width/2,y2:y+3,stroke:"#CAD3DD",strokeWidth:4,strokeLinecap:"round"})]})]})})},Xu=function(e){var t=e.monomerItem,n=(0,c.useMemo)(function(){if((0,h.eoH)(t)){var e=new h.cN8(t);return new h.TYn(e)}var n=(0,h.w7j)(t),r=(0,i.A)(n,2),o=r[0];return new(0,r[1])(new o(t))},[t]),r=n.monomerSymbolElementId,o=n.monomerSize,l=o.width,d=o.height;return(0,a.FD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:d,viewBox:"0 0 ".concat(l," ").concat(d),overflow:"visible",children:[(0,a.Y)("use",{href:r,fill:"#CAD3DD",stroke:"white",strokeWidth:2,style:{filter:"drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.4))"}}),(0,a.Y)("text",{x:l/2,y:d/2,textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",fill:"#333",fontSize:"7px",fontWeight:"bold",children:t.label})]})},Ju=function(){var e,t,n=(0,l.d4)(Fe),r=(0,c.useState)(null),o=(0,i.A)(r,2),d=o[0],s=o[1],u=(0,c.useRef)(null),p=(0,c.useRef)(null),m=(0,c.useRef)(null),f=Ku();(0,c.useEffect)(function(){if(n){var e=function(e){s(e)};return n.events.setLibraryItemDragState.add(e),function(){n.events.setLibraryItemDragState.remove(e)}}},[n]),(0,c.useEffect)(function(){if(h.OQ2.instance&&d){var e=h.OQ2.instance.canvasWrapper.node();e&&(m.current=e.getBoundingClientRect())}},[d]);var v=(null===n||void 0===n||null===(e=n.ketcherRootElementBoundingClientRect)||void 0===e?void 0:e.left)||0,g=(null===n||void 0===n||null===(t=n.ketcherRootElementBoundingClientRect)||void 0===t?void 0:t.top)||0,b=m.current&&d&&d.position.x+v>=m.current.left&&d.position.x+v<=m.current.right&&d.position.y+g>=m.current.top&&d.position.y+g<=m.current.bottom;return(0,c.useLayoutEffect)(function(){var e=u.current;if(e&&d)return p.current=requestAnimationFrame(function(){var t=d.position,n=t.x,r=t.y;if(b&&m.current){var o=f.k;e.style.transformOrigin="0 0",e.style.transform="translate(".concat(n,"px, ").concat(r,"px) scale(").concat(o,")")}else e.style.transform="translate(".concat(n,"px, ").concat(r,"px)")}),function(){p.current&&(cancelAnimationFrame(p.current),p.current=null)}},[b,d,f.k]),d?(0,a.Y)("div",{className:Gu,ref:u,"data-testid":"drag-ghost",children:(0,h.jT0)(d.item)?(0,a.Y)(Zu,{preset:d.item}):(0,a.Y)(Xu,{monomerItem:d.item})}):null};function $u(){return $u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$u.apply(null,arguments)}function ep(e){return c.createElement("svg",$u({width:22,height:24,viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Eu||(Eu=c.createElement("path",{fill:"transparent",d:"M0 0h21.503v24H0z"})),Pu||(Pu=c.createElement("path",{d:"M13.507 18.936l-2.04-1.92c-.7-.659-1.403-1.317-2.108-1.983v3.097c0 .43.003.86.007 1.289 0 .049-.007.09-.007.126v2.04c0 .834 0 1.557.003 2.02l.278.163c.719.3 1.434.307 2.151.033l4.264-2.469c-.358-.326-1.395-1.31-2.548-2.396zM6.159 19.39v-1.091L6.163 2.23v-.002L1.26 5.059C.421 5.647.002 6.482.002 7.553c0 2.944.006 5.888-.002 8.831-.003 1.08.398 1.913 1.212 2.517l4.946 2.856v-2.318-.05z",fill:"#676767"})),Lu||(Lu=c.createElement("path",{d:"M18.642 4.137l1.672.966c.785.58 1.187 1.385 1.188 2.41v8.974c0 1-.385 1.79-1.133 2.367l-1.423.822h-.004c-.097-.097-6.384-6.375-6.513-6.386.044-.044.56-.582 1.278-1.33L20.3 5.097l-1.658-.96z",fill:"url(#logo_svg__paint0_linear_5175_84899)"})),ju||(ju=c.createElement("path",{d:"M17.335 3.383L11.849.216c-.718-.29-1.455-.29-2.219.011l-.27.139s0 10.346.041 11.106c.341-.346 7.808-7.96 7.934-8.09z",fill:"url(#logo_svg__paint1_linear_5175_84899)"})),Nu||(Nu=c.createElement("defs",null,c.createElement("linearGradient",{id:"logo_svg__paint0_linear_5175_84899",x1:19.854,y1:4.363,x2:11.579,y2:13.111,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#3BC2D7"}),c.createElement("stop",{offset:.74,stopColor:"#1D9DB1"})),c.createElement("linearGradient",{id:"logo_svg__paint1_linear_5175_84899",x1:19.854,y1:4.363,x2:11.579,y2:13.111,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#3BC2D7"}),c.createElement("stop",{offset:.74,stopColor:"#1D9DB1"})))))}var tp=(0,L.A)("div",{target:"e1dr48d30"})(function(e){var t,n,r=e.theme;return{width:"430px",minHeight:"260px",padding:"0 18px",borderRadius:"6px",fontSize:"12px",color:r.ketcher.color.text.primary,fontWeight:null===(t=r.ketcher)||void 0===t||null===(t=t.font)||void 0===t||null===(t=t.weight)||void 0===t?void 0:t.regular,a:{color:"#167782"},".body":{borderRadius:"6px",padding:"5px 65px",overflowY:"auto",overflowX:"hidden",".versionName":{fontWeight:400,marginBottom:"2px"},".firstline":{display:"inline-block"},".links":{textAlign:"right"},".indigoVersion":{marginTop:"20px",display:"flex",gap:"2px"}},".headerContent":{display:"flex",justifyContent:"space-between",padding:"0 30px",a:{display:"flex",alignItems:"center",gap:"10px",textDecoration:"none",color:null===(n=r.ketcher)||void 0===n||null===(n=n.color)||void 0===n||null===(n=n.text)||void 0===n?void 0:n.primary},".title":{fontSize:"20px",lineHeight:"22px"}},".indigoFirstLine":{display:"inline-block"},dd:{margin:0,marginBottom:"0.2em"},dt:{marginTop:"3px"},".okButton":{border:"1px solid #333333",backgroundColor:"#FFFFFF",color:"#333333",display:"inline-flex",justifyContent:"center",alignItems:"center",outline:"none",minWidth:"70px",lineHeight:"14px",height:"24px",borderRadius:"4px",fontSize:"10px","&:hover":{color:"#333333",border:"1px solid  #333333"},"&:active":{color:"#333333",border:"1px solid #333333"},"&:disabled":{color:"rgba(51, 51, 51, 0.7)",border:"1px solid rgba(51, 51, 51, 0.7)"}},".aboutFooter":{borderTop:"1px solid #e1e5ea",margin:0,padding:"15px 0",display:"flex",justifyContent:"flex-end",alignItems:"center"}}},"");function np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?np(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):np(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var op="http://lifescience.opensource.epam.com/ketcher/#feedback",ip="https://lifescience.opensource.epam.com/ketcher/index.html",ap="http://lifescience.opensource.epam.com/",lp="http://lifescience.opensource.epam.com/indigo/";function cp(e){var t=e.isOpen,n=e.onClose,r=Fr();!function(){var e=Fr(),t=Tr(Ze);(0,c.useEffect)(function(){function n(){return(n=(0,U.A)(Q().mark(function n(){var r,o;return Q().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(r=m.e3.getIndigo())||void 0===r||!r.info){n.next=11;break}return n.prev=2,n.next=5,r.info();case 5:o=n.sent,e(Ee(rp(rp({},t),{},{indigoVersion:o.indigoVersion||""}))),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(2);case 11:case"end":return n.stop()}},n,null,[[2,9]])}))).apply(this,arguments)}!function(){n.apply(this,arguments)}()},[e])}();var o=Tr(Ze),l=o.buildDate,d=o.indigoVersion,s=o.version,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e.includes("T"))return e;var t=e.split("T"),n=(0,i.A)(t,2),r=n[0],o=n[1];return"".concat(r,"; ").concat(o)}(l),p=function(){r({type:"MODAL_CLOSE"}),n()};return(0,a.Y)(Si,{title:"",isOpen:t,onClose:p,hideHeaderBorder:!0,children:(0,a.Y)(Si.Content,{children:(0,a.FD)(tp,{children:[(0,a.Y)("div",{className:"headerContent",children:(0,a.FD)("a",{href:ip,target:"_blank",rel:"noopener noreferrer",children:[(0,a.Y)(ep,{}),(0,a.Y)("span",{className:"title",children:"Ketcher"})]})}),(0,a.Y)("div",{className:"body",children:(0,a.FD)("dl",{children:[(0,a.Y)("dt",{"data-testid":"build-version",children:(0,a.FD)("a",{href:ip,target:"_blank",rel:"noopener noreferrer",children:["Version ",s]})}),(0,a.FD)("dd",{"data-testid":"build-time",children:["Build at ",(0,a.Y)("time",{children:u})]}),(0,a.FD)("div",{className:"infoLinks",children:[(0,a.Y)("dt",{children:(0,a.Y)("a",{href:op,target:"_blank",rel:"noopener noreferrer",children:"Feedback"})}),(0,a.Y)("dt",{children:(0,a.Y)("a",{href:ap,target:"_blank",rel:"noopener noreferrer",children:"EPAM Life Sciences"})})]}),(0,a.Y)("div",{className:"indigoVersion",children:(0,a.Y)("a",{href:lp,target:"_blank",rel:"noopener noreferrer",children:"Indigo Toolkit"})}),(0,a.Y)("div",{"data-testid":"build-indigo-version",children:d?(0,a.FD)("dd",{children:["Version ",d]}):(0,a.Y)("p",{children:"Standalone"})})]})}),(0,a.Y)("div",{className:"aboutFooter",children:(0,a.Y)("button",{onClick:p,className:"okButton","data-testid":"ok-button",children:"Ok"})})]})})})}function dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(n),!0).forEach(function(t){(0,j.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function up(){var e=(0,c.useState)(!1),t=(0,i.A)(e,2),n=t[0],r=t[1],o={isOpen:n,onClose:function(){return r(!1)}};return(0,a.FD)(a.FK,{children:[(0,a.FD)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.Y)(m.K0,{iconName:"help",title:"Help (?)",onClick:function(){var e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.HELP_LINK||"master";window.open("https://github.com/epam/ketcher/blob/".concat(e,"/documentation/help.md#ketcher-macromolecules-mode"),"_blank")},testId:"help-button"}),(0,a.Y)(m.K0,{iconName:"about",title:"About",onClick:function(){return r(!0)},testId:"about-button"})]}),(0,a.Y)(cp,sp({},o))]})}var pp=(0,u.A)({});function hp(e){var t=e.onInit,n=e.ketcherId,r=e.theme,o=e.togglerComponent,i=e.monomersLibraryUpdate,u=e.monomersLibraryReplace,h=e.isMacromoleculesEditorTurnedOn,f=(0,c.useRef)(null),v=r?(0,p.merge)(Qn,r):Qn,g=(0,p.merge)(pp,{ketcher:v});return(0,c.useEffect)(function(){Wn.dispatch(fe(n))},[n]),(0,a.Y)(l.Kq,{store:Wn,children:(0,a.FD)(s.a,{theme:g,children:[(0,a.Y)(d.mL,{styles:Gn}),(0,a.Y)(Hr,{rootRef:f,isMacromoleculesEditorTurnedOn:h,children:(0,a.Y)(Ec,{ref:f,className:m.$2,children:(0,a.Y)(mp,{ketcherId:n,theme:v,togglerComponent:o,monomersLibraryUpdate:i,monomersLibraryReplace:u,onInit:t})})})]})})}function mp(e){var t=e.theme,n=e.togglerComponent,r=e.monomersLibraryUpdate,o=e.monomersLibraryReplace,l=e.onInit,d=Fr(),s=(0,c.useRef)(null),u=Tr(qt),p=Tr(Fe),m=Tr(Re),f=function(){var e,t,n=Tr(Ne),r=(0,c.useState)(!1),o=(0,i.A)(r,2),a=o[0],l=o[1];try{t=h.qd$.getKetcher(n)}catch(u){h.$yr.error("Failed to get ketcher instance with id ".concat(n),u)}var d=(0,c.useCallback)(function(){return l(!0)},[l]),s=(0,c.useCallback)(function(){return l(!1)},[l]);return(0,c.useEffect)(function(){var e,n,r;return null===(e=t)||void 0===e||e.eventBus.addListener(h.i0C.LOADING,d),null===(n=t)||void 0===n||n.eventBus.addListener(h.i0C.SUCCESS,s),null===(r=t)||void 0===r||r.eventBus.addListener(h.i0C.FAILURE,s),function(){var e,n,r;null===(e=t)||void 0===e||e.eventBus.removeListener(h.i0C.LOADING,d),null===(n=t)||void 0===n||n.eventBus.removeListener(h.i0C.SUCCESS,s),null===(r=t)||void 0===r||r.eventBus.removeListener(h.i0C.FAILURE,s)}},[null===(e=t)||void 0===e?void 0:e.eventBus,s,d]),a}(),v=(0,c.useState)(!1),g=(0,i.A)(v,2),b=g[0],y=g[1],x=function(){var e=Tr(Fe),t=Tr(Te),n=(0,c.useState)(t),r=(0,i.A)(n,2),o=r[0],a=r[1],l=(0,c.useCallback)(function(e){a(e)},[]);return(0,c.useEffect)(function(){return null===e||void 0===e||e.events.toggleSequenceEditInRNABuilderMode.add(l),function(){null===e||void 0===e||e.events.toggleSequenceEditInRNABuilderMode.remove(l)}},[l,e]),o}(),w=(0,c.useState)(),A=(0,i.A)(w,2),C=A[0],M=A[1],k=(0,c.useState)(),O=(0,i.A)(k,2),I=O[0],D=O[1],S=(0,c.useState)([]),Y=(0,i.A)(S,2),E=Y[0],L=Y[1],j=(0,_.EF)({id:po.FOR_SEQUENCE}).show,N=(0,_.EF)({id:po.FOR_SELECTED_MONOMERS}).show;(0,c.useEffect)(function(){return d(ye({theme:t,canvas:s.current,monomersLibraryUpdate:r,monomersLibraryReplace:o,onInit:l})),function(){d(xe(null))}},[d]),function(){var e=Fr(),t=Tr(Fe),n=Tr(Et);(0,c.useEffect)(function(){if(t){var r=t.monomersLibrary,o=n.length?n:t.defaultRnaPresetsLibraryItems,i=(0,T.A)(Lr(r,o,!0)),a=Gt(),l=[],c=i.map(function(e){return e.name});if(a){var d,s=Tc(a);try{for(s.s();!(d=s.n()).done;){for(var u=d.value,p=0,h=u.name;c.includes(h);)p++,h="".concat(u.name).concat("_Copy".repeat(p));h!==u.name&&Xt(Fc(Fc({},u),{},{name:h}))}}catch(m){s.e(m)}finally{s.f()}a=Gt(),l=Lr(r,a)}return e(bt(r)),e(xt(null)),e(Bn(i)),a&&e(zn(l)),e(_n()),function(){e(bt([])),e(qn())}}},[t,n])}(),(0,c.useEffect)(function(){var e="https://github.com/epam/ketcher/blob/".concat({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.HELP_LINK||"master","/documentation/help.md#ketcher-macromolecules-mode"),t=function(t){if(!t.defaultPrevented){var n,r,o=t.target;o&&("INPUT"===o.tagName||"TEXTAREA"===o.tagName||o.isContentEditable||o.closest('[contenteditable="true"]'))||("?"===t.key||"/"===t.key&&t.shiftKey)&&!t.repeat&&(t.preventDefault(),null===(n=window.open(e,"_blank"))||void 0===n||null===(r=n.focus)||void 0===r||r.call(n))}};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}},[]),(0,c.useEffect)(function(){null===p||void 0===p||p.events.rightClickSequence.add(function(e){var t=(0,i.A)(e,2),n=t[0],r=t[1];M(r),D(n),window.dispatchEvent(new Event("hidePreview")),d(Ae(!0)),j({event:n,props:{sequenceItemRenderer:n.target.__data__}})}),null===p||void 0===p||p.events.rightClickPolymerBond.add(function(e){var t=(0,i.A)(e,2),n=t[0],r=t[1];D(n),L([]),N({event:n,props:{polymerBondRenderer:r}})}),null===p||void 0===p||p.events.rightClickSelectedMonomers.add(function(e){var t=(0,i.A)(e,2),n=t[0],r=t[1];L(r),D(n),N({event:n,props:{selectedMonomers:r}})}),null===p||void 0===p||p.events.rightClickCanvas.add(function(e){var t=(0,i.A)(e,2),n=t[0],r=t[1];D(n),window.dispatchEvent(new Event("hidePreview")),d(Ae(!0)),p.mode instanceof h.zuW?(M(r),j({event:n,props:{}})):(L(r),N({event:n,props:{selectedMonomers:r}}))}),null===p||void 0===p||p.events.toggleMacromoleculesPropertiesVisibility.add(function(){d(Me({}))})},[p]),(0,c.useEffect)(function(){return null===p||void 0===p||p.zoomTool.observeCanvasResize(),function(){null===p||void 0===p||p.zoomTool.destroy()}},[p]),(0,c.useEffect)(function(){var e=function(e){var t=e.detail;t&&d(De(t))};return window.addEventListener(h.wmv,e),function(){window.removeEventListener(h.wmv,e)}},[d]);var F=function(){d(Tt())},B=(0,c.useCallback)(function(){y(function(e){return!e})},[]);return(0,a.FD)(a.FK,{children:[(0,a.FD)(yr,{children:[(0,a.FD)(yr.Top,{shortened:!b,"data-testid":"top-toolbar",children:[(0,a.Y)(bu,{}),(0,a.FD)(Pc,{children:[(0,a.Y)(Ru,{}),(0,a.Y)(ld,{}),(0,a.Y)(hs,{}),(0,a.Y)(Lc,{className:x?"toggler-component-wrapper--disabled":"",children:n}),(0,a.Y)(rd,{}),(0,a.Y)(up,{}),(0,a.Y)(_c,{}),(0,a.Y)(rd,{}),(0,a.Y)(Su,{})]})]}),(0,a.Y)(yr.Left,{children:(0,a.Y)(yu,{})}),(0,a.FD)(yr.Main,{children:[(0,a.Y)(Tu,{}),(0,a.Y)(Qu,{}),(0,a.FD)(jc,{id:"polymer-editor-canvas","data-testid":"ketcher-canvas","data-canvasmode":"macromolecules-mode",preserveAspectRatio:"xMidYMid meet",ref:s,width:"100%",height:"100%",style:{overflow:"hidden",overflowClipMargin:"content-box"},children:[(0,a.FD)("defs",{children:[(0,a.Y)(wc,{}),(0,a.Y)(xc,{}),(0,a.Y)(Ac,{}),(0,a.Y)(Cc,{}),(0,a.Y)(Mc,{}),(0,a.Y)(kc,{}),(0,a.Y)(Oc,{}),(0,a.Y)(Dc,{}),(0,a.Y)(Ic,{})]}),(0,a.Y)("g",{className:"drawn-structures","data-testid":"drawn-structures"}),m&&(0,a.Y)("rect",{x:0,y:0,width:"100%",height:"100%",fill:"transparent",pointerEvents:"all"})]}),f&&(0,a.Y)(Rc,{})]}),(0,a.Y)(yr.Right,{hide:b,children:(0,a.Y)(ea,{toggleLibraryVisibility:B})}),(0,a.Y)(yr.Bottom,{children:(0,a.Y)(hu,{})}),(0,a.Y)(yr.InsideRoot,{children:b&&(0,a.Y)(na,{onClick:B})})]}),(0,a.Y)(us,{}),(0,a.Y)(Ju,{}),(0,a.Y)(Od,{selections:C,contextMenuEvent:I}),(0,a.Y)(Bu,{selectedMonomers:E,contextMenuEvent:I}),(0,a.Y)(vc,{}),(0,a.Y)(Yc,{}),(0,a.Y)(P.A,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(u),onClose:F,autoHideDuration:6e3,children:(0,a.FD)(gc,{id:"error-tooltip",children:[(0,a.Y)(bc,{"data-testid":"error-tooltip",children:u}),(0,a.Y)(yc,{testId:"error-tooltip-close",iconName:"close",onClick:F})]})})]})}}}]);